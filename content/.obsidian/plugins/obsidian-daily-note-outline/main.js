/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[Object.keys(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// node_modules/obsidian-daily-notes-interface/dist/main.js
var require_main = __commonJS({
  "node_modules/obsidian-daily-notes-interface/dist/main.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var obsidian = require("obsidian");
    var DEFAULT_DAILY_NOTE_FORMAT = "YYYY-MM-DD";
    var DEFAULT_WEEKLY_NOTE_FORMAT = "gggg-[W]ww";
    var DEFAULT_MONTHLY_NOTE_FORMAT = "YYYY-MM";
    var DEFAULT_QUARTERLY_NOTE_FORMAT = "YYYY-[Q]Q";
    var DEFAULT_YEARLY_NOTE_FORMAT = "YYYY";
    function shouldUsePeriodicNotesSettings(periodicity) {
      var _a, _b;
      const periodicNotes = window.app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a[periodicity]) == null ? void 0 : _b.enabled);
    }
    function getDailyNoteSettings() {
      var _a, _b, _c, _d;
      try {
        const { internalPlugins, plugins } = window.app;
        if (shouldUsePeriodicNotesSettings("daily")) {
          const { format: format2, folder: folder2, template: template2 } = ((_b = (_a = plugins.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.daily) || {};
          return {
            format: format2 || DEFAULT_DAILY_NOTE_FORMAT,
            folder: (folder2 == null ? void 0 : folder2.trim()) || "",
            template: (template2 == null ? void 0 : template2.trim()) || ""
          };
        }
        const { folder, format, template } = ((_d = (_c = internalPlugins.getPluginById("daily-notes")) == null ? void 0 : _c.instance) == null ? void 0 : _d.options) || {};
        return {
          format: format || DEFAULT_DAILY_NOTE_FORMAT,
          folder: (folder == null ? void 0 : folder.trim()) || "",
          template: (template == null ? void 0 : template.trim()) || ""
        };
      } catch (err) {
        console.info("No custom daily note settings found!", err);
      }
    }
    function getWeeklyNoteSettings() {
      var _a, _b, _c, _d, _e, _f, _g;
      try {
        const pluginManager = window.app.plugins;
        const calendarSettings = (_a = pluginManager.getPlugin("calendar")) == null ? void 0 : _a.options;
        const periodicNotesSettings = (_c = (_b = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _b.settings) == null ? void 0 : _c.weekly;
        if (shouldUsePeriodicNotesSettings("weekly")) {
          return {
            format: periodicNotesSettings.format || DEFAULT_WEEKLY_NOTE_FORMAT,
            folder: ((_d = periodicNotesSettings.folder) == null ? void 0 : _d.trim()) || "",
            template: ((_e = periodicNotesSettings.template) == null ? void 0 : _e.trim()) || ""
          };
        }
        const settings = calendarSettings || {};
        return {
          format: settings.weeklyNoteFormat || DEFAULT_WEEKLY_NOTE_FORMAT,
          folder: ((_f = settings.weeklyNoteFolder) == null ? void 0 : _f.trim()) || "",
          template: ((_g = settings.weeklyNoteTemplate) == null ? void 0 : _g.trim()) || ""
        };
      } catch (err) {
        console.info("No custom weekly note settings found!", err);
      }
    }
    function getMonthlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("monthly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.monthly) || {};
        return {
          format: settings.format || DEFAULT_MONTHLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom monthly note settings found!", err);
      }
    }
    function getQuarterlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("quarterly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.quarterly) || {};
        return {
          format: settings.format || DEFAULT_QUARTERLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom quarterly note settings found!", err);
      }
    }
    function getYearlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("yearly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.yearly) || {};
        return {
          format: settings.format || DEFAULT_YEARLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom yearly note settings found!", err);
      }
    }
    function join2(...partSegments) {
      let parts = [];
      for (let i = 0, l = partSegments.length; i < l; i++) {
        parts = parts.concat(partSegments[i].split("/"));
      }
      const newParts = [];
      for (let i = 0, l = parts.length; i < l; i++) {
        const part = parts[i];
        if (!part || part === ".")
          continue;
        else
          newParts.push(part);
      }
      if (parts[0] === "")
        newParts.unshift("");
      return newParts.join("/");
    }
    function basename(fullPath) {
      let base = fullPath.substring(fullPath.lastIndexOf("/") + 1);
      if (base.lastIndexOf(".") != -1)
        base = base.substring(0, base.lastIndexOf("."));
      return base;
    }
    function ensureFolderExists2(path) {
      return __async(this, null, function* () {
        const dirs = path.replace(/\\/g, "/").split("/");
        dirs.pop();
        if (dirs.length) {
          const dir = join2(...dirs);
          if (!window.app.vault.getAbstractFileByPath(dir)) {
            yield window.app.vault.createFolder(dir);
          }
        }
      });
    }
    function getNotePath(directory, filename) {
      return __async(this, null, function* () {
        if (!filename.endsWith(".md")) {
          filename += ".md";
        }
        const path = obsidian.normalizePath(join2(directory, filename));
        yield ensureFolderExists2(path);
        return path;
      });
    }
    function getTemplateInfo(template) {
      return __async(this, null, function* () {
        const { metadataCache, vault } = window.app;
        const templatePath = obsidian.normalizePath(template);
        if (templatePath === "/") {
          return Promise.resolve(["", null]);
        }
        try {
          const templateFile = metadataCache.getFirstLinkpathDest(templatePath, "");
          const contents = yield vault.cachedRead(templateFile);
          const IFoldInfo = window.app.foldManager.load(templateFile);
          return [contents, IFoldInfo];
        } catch (err) {
          console.error(`Failed to read the daily note template '${templatePath}'`, err);
          new obsidian.Notice("Failed to read the daily note template");
          return ["", null];
        }
      });
    }
    function getDateUID4(date, granularity = "day") {
      const ts = date.clone().startOf(granularity).format();
      return `${granularity}-${ts}`;
    }
    function removeEscapedCharacters(format) {
      return format.replace(/\[[^\]]*\]/g, "");
    }
    function isFormatAmbiguous(format, granularity) {
      if (granularity === "week") {
        const cleanFormat = removeEscapedCharacters(format);
        return /w{1,2}/i.test(cleanFormat) && (/M{1,4}/.test(cleanFormat) || /D{1,4}/.test(cleanFormat));
      }
      return false;
    }
    function getDateFromFile3(file, granularity) {
      return getDateFromFilename(file.basename, granularity);
    }
    function getDateFromPath(path, granularity) {
      return getDateFromFilename(basename(path), granularity);
    }
    function getDateFromFilename(filename, granularity) {
      const getSettings = {
        day: getDailyNoteSettings,
        week: getWeeklyNoteSettings,
        month: getMonthlyNoteSettings,
        quarter: getQuarterlyNoteSettings,
        year: getYearlyNoteSettings
      };
      const format = getSettings[granularity]().format.split("/").pop();
      const noteDate = window.moment(filename, format, true);
      if (!noteDate.isValid()) {
        return null;
      }
      if (isFormatAmbiguous(format, granularity)) {
        if (granularity === "week") {
          const cleanFormat = removeEscapedCharacters(format);
          if (/w{1,2}/i.test(cleanFormat)) {
            return window.moment(filename, format.replace(/M{1,4}/g, "").replace(/D{1,4}/g, ""), false);
          }
        }
      }
      return noteDate;
    }
    var DailyNotesFolderMissingError = class extends Error {
    };
    function createDailyNote3(date) {
      return __async(this, null, function* () {
        const app2 = window.app;
        const { vault } = app2;
        const moment = window.moment;
        const { template, format, folder } = getDailyNoteSettings();
        const [templateContents, IFoldInfo] = yield getTemplateInfo(template);
        const filename = date.format(format);
        const normalizedPath = yield getNotePath(folder, filename);
        try {
          const createdFile = yield vault.create(normalizedPath, templateContents.replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
            const now = moment();
            const currentDate = date.clone().set({
              hour: now.get("hour"),
              minute: now.get("minute"),
              second: now.get("second")
            });
            if (calc) {
              currentDate.add(parseInt(timeDelta, 10), unit);
            }
            if (momentFormat) {
              return currentDate.format(momentFormat.substring(1).trim());
            }
            return currentDate.format(format);
          }).replace(/{{\s*yesterday\s*}}/gi, date.clone().subtract(1, "day").format(format)).replace(/{{\s*tomorrow\s*}}/gi, date.clone().add(1, "d").format(format)));
          app2.foldManager.save(createdFile, IFoldInfo);
          return createdFile;
        } catch (err) {
          console.error(`Failed to create file: '${normalizedPath}'`, err);
          new obsidian.Notice("Unable to create new file.");
        }
      });
    }
    function getDailyNote2(date, dailyNotes) {
      var _a;
      return (_a = dailyNotes[getDateUID4(date, "day")]) != null ? _a : null;
    }
    function getAllDailyNotes2() {
      const { vault } = window.app;
      const { folder } = getDailyNoteSettings();
      const dailyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!dailyNotesFolder) {
        throw new DailyNotesFolderMissingError("Failed to find daily notes folder");
      }
      const dailyNotes = {};
      obsidian.Vault.recurseChildren(dailyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile3(note, "day");
          if (date) {
            const dateString = getDateUID4(date, "day");
            dailyNotes[dateString] = note;
          }
        }
      });
      return dailyNotes;
    }
    var WeeklyNotesFolderMissingError = class extends Error {
    };
    function getDaysOfWeek2() {
      const { moment } = window;
      let weekStart = moment.localeData()._week.dow;
      const daysOfWeek = [
        "sunday",
        "monday",
        "tuesday",
        "wednesday",
        "thursday",
        "friday",
        "saturday"
      ];
      while (weekStart) {
        daysOfWeek.push(daysOfWeek.shift());
        weekStart--;
      }
      return daysOfWeek;
    }
    function getDayOfWeekNumericalValue2(dayOfWeekName) {
      return getDaysOfWeek2().indexOf(dayOfWeekName.toLowerCase());
    }
    function createWeeklyNote(date) {
      return __async(this, null, function* () {
        const { vault } = window.app;
        const { template, format, folder } = getWeeklyNoteSettings();
        const [templateContents, IFoldInfo] = yield getTemplateInfo(template);
        const filename = date.format(format);
        const normalizedPath = yield getNotePath(folder, filename);
        try {
          const createdFile = yield vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
            const now = window.moment();
            const currentDate = date.clone().set({
              hour: now.get("hour"),
              minute: now.get("minute"),
              second: now.get("second")
            });
            if (calc) {
              currentDate.add(parseInt(timeDelta, 10), unit);
            }
            if (momentFormat) {
              return currentDate.format(momentFormat.substring(1).trim());
            }
            return currentDate.format(format);
          }).replace(/{{\s*title\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi, (_, dayOfWeek, momentFormat) => {
            const day = getDayOfWeekNumericalValue2(dayOfWeek);
            return date.weekday(day).format(momentFormat.trim());
          }));
          window.app.foldManager.save(createdFile, IFoldInfo);
          return createdFile;
        } catch (err) {
          console.error(`Failed to create file: '${normalizedPath}'`, err);
          new obsidian.Notice("Unable to create new file.");
        }
      });
    }
    function getWeeklyNote(date, weeklyNotes) {
      var _a;
      return (_a = weeklyNotes[getDateUID4(date, "week")]) != null ? _a : null;
    }
    function getAllWeeklyNotes2() {
      const weeklyNotes = {};
      if (!appHasWeeklyNotesPluginLoaded()) {
        return weeklyNotes;
      }
      const { vault } = window.app;
      const { folder } = getWeeklyNoteSettings();
      const weeklyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!weeklyNotesFolder) {
        throw new WeeklyNotesFolderMissingError("Failed to find weekly notes folder");
      }
      obsidian.Vault.recurseChildren(weeklyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile3(note, "week");
          if (date) {
            const dateString = getDateUID4(date, "week");
            weeklyNotes[dateString] = note;
          }
        }
      });
      return weeklyNotes;
    }
    var MonthlyNotesFolderMissingError = class extends Error {
    };
    function createMonthlyNote(date) {
      return __async(this, null, function* () {
        const { vault } = window.app;
        const { template, format, folder } = getMonthlyNoteSettings();
        const [templateContents, IFoldInfo] = yield getTemplateInfo(template);
        const filename = date.format(format);
        const normalizedPath = yield getNotePath(folder, filename);
        try {
          const createdFile = yield vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
            const now = window.moment();
            const currentDate = date.clone().set({
              hour: now.get("hour"),
              minute: now.get("minute"),
              second: now.get("second")
            });
            if (calc) {
              currentDate.add(parseInt(timeDelta, 10), unit);
            }
            if (momentFormat) {
              return currentDate.format(momentFormat.substring(1).trim());
            }
            return currentDate.format(format);
          }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
          window.app.foldManager.save(createdFile, IFoldInfo);
          return createdFile;
        } catch (err) {
          console.error(`Failed to create file: '${normalizedPath}'`, err);
          new obsidian.Notice("Unable to create new file.");
        }
      });
    }
    function getMonthlyNote(date, monthlyNotes) {
      var _a;
      return (_a = monthlyNotes[getDateUID4(date, "month")]) != null ? _a : null;
    }
    function getAllMonthlyNotes2() {
      const monthlyNotes = {};
      if (!appHasMonthlyNotesPluginLoaded()) {
        return monthlyNotes;
      }
      const { vault } = window.app;
      const { folder } = getMonthlyNoteSettings();
      const monthlyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!monthlyNotesFolder) {
        throw new MonthlyNotesFolderMissingError("Failed to find monthly notes folder");
      }
      obsidian.Vault.recurseChildren(monthlyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile3(note, "month");
          if (date) {
            const dateString = getDateUID4(date, "month");
            monthlyNotes[dateString] = note;
          }
        }
      });
      return monthlyNotes;
    }
    var QuarterlyNotesFolderMissingError = class extends Error {
    };
    function createQuarterlyNote2(date) {
      return __async(this, null, function* () {
        const { vault } = window.app;
        const { template, format, folder } = getQuarterlyNoteSettings();
        const [templateContents, IFoldInfo] = yield getTemplateInfo(template);
        const filename = date.format(format);
        const normalizedPath = yield getNotePath(folder, filename);
        try {
          const createdFile = yield vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
            const now = window.moment();
            const currentDate = date.clone().set({
              hour: now.get("hour"),
              minute: now.get("minute"),
              second: now.get("second")
            });
            if (calc) {
              currentDate.add(parseInt(timeDelta, 10), unit);
            }
            if (momentFormat) {
              return currentDate.format(momentFormat.substring(1).trim());
            }
            return currentDate.format(format);
          }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
          window.app.foldManager.save(createdFile, IFoldInfo);
          return createdFile;
        } catch (err) {
          console.error(`Failed to create file: '${normalizedPath}'`, err);
          new obsidian.Notice("Unable to create new file.");
        }
      });
    }
    function getQuarterlyNote(date, quarterly) {
      var _a;
      return (_a = quarterly[getDateUID4(date, "quarter")]) != null ? _a : null;
    }
    function getAllQuarterlyNotes2() {
      const quarterly = {};
      if (!appHasQuarterlyNotesPluginLoaded()) {
        return quarterly;
      }
      const { vault } = window.app;
      const { folder } = getQuarterlyNoteSettings();
      const quarterlyFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!quarterlyFolder) {
        throw new QuarterlyNotesFolderMissingError("Failed to find quarterly notes folder");
      }
      obsidian.Vault.recurseChildren(quarterlyFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile3(note, "quarter");
          if (date) {
            const dateString = getDateUID4(date, "quarter");
            quarterly[dateString] = note;
          }
        }
      });
      return quarterly;
    }
    var YearlyNotesFolderMissingError = class extends Error {
    };
    function createYearlyNote2(date) {
      return __async(this, null, function* () {
        const { vault } = window.app;
        const { template, format, folder } = getYearlyNoteSettings();
        const [templateContents, IFoldInfo] = yield getTemplateInfo(template);
        const filename = date.format(format);
        const normalizedPath = yield getNotePath(folder, filename);
        try {
          const createdFile = yield vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
            const now = window.moment();
            const currentDate = date.clone().set({
              hour: now.get("hour"),
              minute: now.get("minute"),
              second: now.get("second")
            });
            if (calc) {
              currentDate.add(parseInt(timeDelta, 10), unit);
            }
            if (momentFormat) {
              return currentDate.format(momentFormat.substring(1).trim());
            }
            return currentDate.format(format);
          }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
          window.app.foldManager.save(createdFile, IFoldInfo);
          return createdFile;
        } catch (err) {
          console.error(`Failed to create file: '${normalizedPath}'`, err);
          new obsidian.Notice("Unable to create new file.");
        }
      });
    }
    function getYearlyNote(date, yearlyNotes) {
      var _a;
      return (_a = yearlyNotes[getDateUID4(date, "year")]) != null ? _a : null;
    }
    function getAllYearlyNotes2() {
      const yearlyNotes = {};
      if (!appHasYearlyNotesPluginLoaded()) {
        return yearlyNotes;
      }
      const { vault } = window.app;
      const { folder } = getYearlyNoteSettings();
      const yearlyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!yearlyNotesFolder) {
        throw new YearlyNotesFolderMissingError("Failed to find yearly notes folder");
      }
      obsidian.Vault.recurseChildren(yearlyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile3(note, "year");
          if (date) {
            const dateString = getDateUID4(date, "year");
            yearlyNotes[dateString] = note;
          }
        }
      });
      return yearlyNotes;
    }
    function appHasDailyNotesPluginLoaded() {
      var _a, _b;
      const { app: app2 } = window;
      const dailyNotesPlugin = app2.internalPlugins.plugins["daily-notes"];
      if (dailyNotesPlugin && dailyNotesPlugin.enabled) {
        return true;
      }
      const periodicNotes = app2.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.daily) == null ? void 0 : _b.enabled);
    }
    function appHasWeeklyNotesPluginLoaded() {
      var _a, _b;
      const { app: app2 } = window;
      if (app2.plugins.getPlugin("calendar")) {
        return true;
      }
      const periodicNotes = app2.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.weekly) == null ? void 0 : _b.enabled);
    }
    function appHasMonthlyNotesPluginLoaded() {
      var _a, _b;
      const { app: app2 } = window;
      const periodicNotes = app2.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.monthly) == null ? void 0 : _b.enabled);
    }
    function appHasQuarterlyNotesPluginLoaded() {
      var _a, _b;
      const { app: app2 } = window;
      const periodicNotes = app2.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.quarterly) == null ? void 0 : _b.enabled);
    }
    function appHasYearlyNotesPluginLoaded() {
      var _a, _b;
      const { app: app2 } = window;
      const periodicNotes = app2.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.yearly) == null ? void 0 : _b.enabled);
    }
    function getPeriodicNoteSettings(granularity) {
      const getSettings = {
        day: getDailyNoteSettings,
        week: getWeeklyNoteSettings,
        month: getMonthlyNoteSettings,
        quarter: getQuarterlyNoteSettings,
        year: getYearlyNoteSettings
      }[granularity];
      return getSettings();
    }
    function createPeriodicNote2(granularity, date) {
      const createFn = {
        day: createDailyNote3,
        month: createMonthlyNote,
        week: createWeeklyNote
      };
      return createFn[granularity](date);
    }
    exports.DEFAULT_DAILY_NOTE_FORMAT = DEFAULT_DAILY_NOTE_FORMAT;
    exports.DEFAULT_MONTHLY_NOTE_FORMAT = DEFAULT_MONTHLY_NOTE_FORMAT;
    exports.DEFAULT_QUARTERLY_NOTE_FORMAT = DEFAULT_QUARTERLY_NOTE_FORMAT;
    exports.DEFAULT_WEEKLY_NOTE_FORMAT = DEFAULT_WEEKLY_NOTE_FORMAT;
    exports.DEFAULT_YEARLY_NOTE_FORMAT = DEFAULT_YEARLY_NOTE_FORMAT;
    exports.appHasDailyNotesPluginLoaded = appHasDailyNotesPluginLoaded;
    exports.appHasMonthlyNotesPluginLoaded = appHasMonthlyNotesPluginLoaded;
    exports.appHasQuarterlyNotesPluginLoaded = appHasQuarterlyNotesPluginLoaded;
    exports.appHasWeeklyNotesPluginLoaded = appHasWeeklyNotesPluginLoaded;
    exports.appHasYearlyNotesPluginLoaded = appHasYearlyNotesPluginLoaded;
    exports.createDailyNote = createDailyNote3;
    exports.createMonthlyNote = createMonthlyNote;
    exports.createPeriodicNote = createPeriodicNote2;
    exports.createQuarterlyNote = createQuarterlyNote2;
    exports.createWeeklyNote = createWeeklyNote;
    exports.createYearlyNote = createYearlyNote2;
    exports.getAllDailyNotes = getAllDailyNotes2;
    exports.getAllMonthlyNotes = getAllMonthlyNotes2;
    exports.getAllQuarterlyNotes = getAllQuarterlyNotes2;
    exports.getAllWeeklyNotes = getAllWeeklyNotes2;
    exports.getAllYearlyNotes = getAllYearlyNotes2;
    exports.getDailyNote = getDailyNote2;
    exports.getDailyNoteSettings = getDailyNoteSettings;
    exports.getDateFromFile = getDateFromFile3;
    exports.getDateFromPath = getDateFromPath;
    exports.getDateUID = getDateUID4;
    exports.getMonthlyNote = getMonthlyNote;
    exports.getMonthlyNoteSettings = getMonthlyNoteSettings;
    exports.getPeriodicNoteSettings = getPeriodicNoteSettings;
    exports.getQuarterlyNote = getQuarterlyNote;
    exports.getQuarterlyNoteSettings = getQuarterlyNoteSettings;
    exports.getTemplateInfo = getTemplateInfo;
    exports.getWeeklyNote = getWeeklyNote;
    exports.getWeeklyNoteSettings = getWeeklyNoteSettings;
    exports.getYearlyNote = getYearlyNote;
    exports.getYearlyNoteSettings = getYearlyNoteSettings;
  }
});

// src/main.ts
__export(exports, {
  DAYS_PER_UNIT: () => DAYS_PER_UNIT,
  DEFAULT_SETTINGS: () => DEFAULT_SETTINGS,
  FILEINFO_TO_DISPLAY: () => FILEINFO_TO_DISPLAY,
  FILEINFO_TO_DISPLAY_DAY: () => FILEINFO_TO_DISPLAY_DAY,
  GRANULARITY_LIST: () => GRANULARITY_LIST,
  GRANULARITY_TO_PERIODICITY: () => GRANULARITY_TO_PERIODICITY,
  default: () => DailyNoteOutlinePlugin3
});
var import_obsidian9 = __toModule(require("obsidian"));

// src/view.ts
var import_obsidian6 = __toModule(require("obsidian"));
var import_obsidian7 = __toModule(require("obsidian"));
var import_obsidian_daily_notes_interface4 = __toModule(require_main());

// src/drawUI.ts
var import_obsidian3 = __toModule(require("obsidian"));

// src/createAndOpenDailyNote.ts
var import_obsidian_daily_notes_interface = __toModule(require_main());
function createAndOpenDailyNote(granularity, date, allFiles) {
  return __async(this, null, function* () {
    const { workspace } = window.app;
    const createFile = () => __async(this, null, function* () {
      let newNote;
      switch (granularity) {
        case "quarter":
          newNote = yield (0, import_obsidian_daily_notes_interface.createQuarterlyNote)(date);
          break;
        case "year":
          newNote = yield (0, import_obsidian_daily_notes_interface.createYearlyNote)(date);
          break;
        default:
          newNote = yield (0, import_obsidian_daily_notes_interface.createPeriodicNote)(granularity, date);
      }
      yield workspace.getLeaf().openFile(newNote);
    });
    const dailynote = allFiles[(0, import_obsidian_daily_notes_interface.getDateUID)(date, granularity)];
    if (!dailynote) {
      yield createFile();
    } else {
      yield workspace.getLeaf().openFile(dailynote);
    }
  });
}

// src/modalExtract.ts
var import_obsidian = __toModule(require("obsidian"));
var ModalExtract = class extends import_obsidian.Modal {
  constructor(app2, plugin, onSubmit) {
    super(app2);
    this.plugin = plugin;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    this.inputedValue = this.plugin.settings.wordsToExtract;
    const { contentEl } = this;
    contentEl.createEl("br");
    new import_obsidian.Setting(contentEl).setName("Extract by word or phrase:").addText((text) => {
      text.setValue(this.plugin.settings.wordsToExtract).inputEl.select();
      text.onChange((value) => {
        this.inputedValue = value;
      });
    });
    new import_obsidian.Setting(contentEl).addButton((btn) => btn.setButtonText("Extract").setCta().onClick(() => __async(this, null, function* () {
      this.executeExtract();
    }))).addButton((btn) => btn.setButtonText("Cancel").onClick(() => {
      this.close();
    }));
    this.scope.register([], "Enter", (evt) => {
      this.executeExtract();
    });
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
  executeExtract() {
    return __async(this, null, function* () {
      this.close();
      this.plugin.settings.wordsToExtract = this.inputedValue;
      yield this.plugin.saveSettings();
      this.onSubmit(true);
    });
  }
};

// src/createAndOpenPeriodicNote.ts
var import_obsidian2 = __toModule(require("obsidian"));
var DEFAULT_NOTE_FORMAT = {
  day: "YYYY-MM-DD",
  week: "gggg-[W]ww",
  month: "YYYY-MM",
  quarter: "YYYY-[Q]Q",
  year: "YYYY"
};
function createAndOpenPeriodicNote(granularity, date, calendarSet) {
  return __async(this, null, function* () {
    const { workspace } = window.app;
    let file = window.app.plugins.getPlugin("periodic-notes").cache.getPeriodicNote(calendarSet.id, granularity, date);
    if (!file) {
      const config = calendarSet[granularity];
      const format = calendarSet[granularity].format;
      const filename = date.format(format ? format : DEFAULT_NOTE_FORMAT[granularity]);
      const templateContents = yield getTemplateContents(window.app, config.templatePath);
      const renderedContents = applyTemplateTransformations(filename, granularity, date, format, templateContents);
      const destPath = yield getNoteCreationPath(window.app, filename, config);
      file = yield window.app.vault.create(destPath, renderedContents);
    }
    yield workspace.getLeaf().openFile(file);
  });
}
function getTemplateContents(app2, templatePath) {
  return __async(this, null, function* () {
    const { metadataCache, vault } = app2;
    const normalizedTemplatePath = (0, import_obsidian2.normalizePath)(templatePath != null ? templatePath : "");
    if (templatePath === "/") {
      return Promise.resolve("");
    }
    try {
      const templateFile = metadataCache.getFirstLinkpathDest(normalizedTemplatePath, "");
      return templateFile ? vault.cachedRead(templateFile) : "";
    } catch (err) {
      console.error(`Failed to read the daily note template '${normalizedTemplatePath}'`, err);
      new import_obsidian2.Notice("Failed to read the daily note template");
      return "";
    }
  });
}
function applyTemplateTransformations(filename, granularity, date, format, rawTemplateContents) {
  let templateContents = rawTemplateContents;
  templateContents = rawTemplateContents.replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename);
  if (granularity === "day") {
    templateContents = templateContents.replace(/{{\s*yesterday\s*}}/gi, date.clone().subtract(1, "day").format(format)).replace(/{{\s*tomorrow\s*}}/gi, date.clone().add(1, "d").format(format)).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
      const now = window.moment();
      const currentDate = date.clone().set({
        hour: now.get("hour"),
        minute: now.get("minute"),
        second: now.get("second")
      });
      if (calc) {
        currentDate.add(parseInt(timeDelta, 10), unit);
      }
      if (momentFormat) {
        return currentDate.format(momentFormat.substring(1).trim());
      }
      return currentDate.format(format);
    });
  }
  if (granularity === "week") {
    templateContents = templateContents.replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi, (_, dayOfWeek, momentFormat) => {
      const day = getDayOfWeekNumericalValue(dayOfWeek);
      return date.weekday(day).format(momentFormat.trim());
    });
  }
  if (granularity === "month") {
    templateContents = templateContents.replace(/{{\s*(month)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
      const now = window.moment();
      const monthStart = date.clone().startOf("month").set({
        hour: now.get("hour"),
        minute: now.get("minute"),
        second: now.get("second")
      });
      if (calc) {
        monthStart.add(parseInt(timeDelta, 10), unit);
      }
      if (momentFormat) {
        return monthStart.format(momentFormat.substring(1).trim());
      }
      return monthStart.format(format);
    });
  }
  if (granularity === "quarter") {
    templateContents = templateContents.replace(/{{\s*(quarter)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
      const now = window.moment();
      const monthStart = date.clone().startOf("quarter").set({
        hour: now.get("hour"),
        minute: now.get("minute"),
        second: now.get("second")
      });
      if (calc) {
        monthStart.add(parseInt(timeDelta, 10), unit);
      }
      if (momentFormat) {
        return monthStart.format(momentFormat.substring(1).trim());
      }
      return monthStart.format(format);
    });
  }
  if (granularity === "year") {
    templateContents = templateContents.replace(/{{\s*(year)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
      const now = window.moment();
      const monthStart = date.clone().startOf("year").set({
        hour: now.get("hour"),
        minute: now.get("minute"),
        second: now.get("second")
      });
      if (calc) {
        monthStart.add(parseInt(timeDelta, 10), unit);
      }
      if (momentFormat) {
        return monthStart.format(momentFormat.substring(1).trim());
      }
      return monthStart.format(format);
    });
  }
  return templateContents;
}
function getNoteCreationPath(app2, filename, periodicConfig) {
  return __async(this, null, function* () {
    var _a;
    const directory = (_a = periodicConfig.folder) != null ? _a : "";
    const filenameWithExt = !filename.endsWith(".md") ? `${filename}.md` : filename;
    const path = (0, import_obsidian2.normalizePath)(join(directory, filenameWithExt));
    yield ensureFolderExists(app2, path);
    return path;
  });
}
function join(...partSegments) {
  let parts = [];
  for (let i = 0, l = partSegments.length; i < l; i++) {
    parts = parts.concat(partSegments[i].split("/"));
  }
  const newParts = [];
  for (let i = 0, l = parts.length; i < l; i++) {
    const part = parts[i];
    if (!part || part === ".")
      continue;
    else
      newParts.push(part);
  }
  if (parts[0] === "")
    newParts.unshift("");
  return newParts.join("/");
}
function ensureFolderExists(app2, path) {
  return __async(this, null, function* () {
    const dirs = path.replace(/\\/g, "/").split("/");
    dirs.pop();
    if (dirs.length) {
      const dir = join(...dirs);
      if (!app2.vault.getAbstractFileByPath(dir)) {
        yield app2.vault.createFolder(dir);
      }
    }
  });
}
function getDaysOfWeek() {
  const { moment } = window;
  let weekStart = moment.localeData()._week.dow;
  const daysOfWeek = [
    "sunday",
    "monday",
    "tuesday",
    "wednesday",
    "thursday",
    "friday",
    "saturday"
  ];
  while (weekStart) {
    const day = daysOfWeek.shift();
    if (day)
      daysOfWeek.push(day);
    weekStart--;
  }
  return daysOfWeek;
}
function getDayOfWeekNumericalValue(dayOfWeekName) {
  return getDaysOfWeek().indexOf(dayOfWeekName.toLowerCase());
}

// src/drawUI.ts
function drawUI() {
  const navHeader = createDiv("nav-header");
  const navButtonContainer = navHeader.createDiv("nav-buttons-container");
  const granularity = GRANULARITY_LIST[this.activeGranularity];
  uiPreviousPage.call(this, navButtonContainer, granularity);
  uiNextPage.call(this, navButtonContainer, granularity);
  uiReturnHome.call(this, navButtonContainer);
  uiSetting.call(this, navButtonContainer, granularity);
  uiCreateDailyNote.call(this, navButtonContainer, granularity);
  uiExtract.call(this, navButtonContainer);
  uiCollapse.call(this, navButtonContainer);
  const navDateRange = navHeader.createDiv("nav-date-range");
  let latest = this.searchRange.latest.clone();
  let earliest = this.searchRange.earliest.clone();
  if (this.settings.initialSearchType == "backward") {
    earliest = latest.clone().subtract(this.settings.duration[granularity] - 1, granularity);
    if (latest.isSame(window.moment(), "day")) {
      latest = latest.add(Math.ceil(this.settings.offset / DAYS_PER_UNIT[granularity]), granularity);
    }
  }
  if (this.settings.initialSearchType == "forward") {
    latest = earliest.clone().add(this.settings.duration[granularity] - 1, granularity);
  }
  const dateRange = earliest.format("YYYY/MM/DD [-] ") + latest.format(earliest.isSame(latest, "year") ? "MM/DD" : "YYYY/MM/DD");
  navDateRange.createDiv("nav-date-range-content").setText(dateRange);
  navDateRange.addEventListener("click", (event) => __async(this, null, function* () {
    event.preventDefault();
    const onsetDate = window.moment(this.settings.onset, "YYYY-MM-DD");
    if (onsetDate.isValid()) {
      this.searchRange.earliest = onsetDate;
      this.searchRange.latest = onsetDate.clone().add(this.settings.duration.day - 1, "days");
    } else {
      this.searchRange.latest = window.moment().startOf("day");
      this.searchRange.earliest = window.moment().startOf("day").subtract(this.settings.duration.day - 1, "days");
    }
    this.refreshView(false, true, true);
  }));
  if (this.settings.periodicNotesEnabled) {
    const navGranularity = navHeader.createDiv("nav-date-range");
    navGranularity.createDiv("nav-date-range-content").setText(GRANULARITY_LIST[this.activeGranularity]);
    navGranularity.addEventListener("click", (evet) => {
      var _a, _b, _c;
      if (this.settings.showDebugInfo) {
        console.log("DNO:clicked to change granularity. verPN, calendarSets:", this.activeGranularity, this.verPN, this.calendarSets);
      }
      const initialGranularity = this.activeGranularity;
      do {
        this.activeGranularity = (this.activeGranularity + 1) % GRANULARITY_LIST.length;
      } while ((this.verPN == 2 && !((_a = this.calendarSets[this.activeSet][GRANULARITY_LIST[this.activeGranularity]]) == null ? void 0 : _a.enabled) || this.verPN == 1 && !((_c = (_b = this.app.plugins.getPlugin("periodic-notes").settings) == null ? void 0 : _b[GRANULARITY_TO_PERIODICITY[GRANULARITY_LIST[this.activeGranularity]]]) == null ? void 0 : _c.enabled)) && this.activeGranularity != initialGranularity);
      this.app.workspace.requestSaveLayout();
      this.refreshView(true, true, true);
    });
    navGranularity.addEventListener("contextmenu", (event) => {
      var _a, _b, _c;
      const menu = new import_obsidian3.Menu();
      for (let i = 0; i < GRANULARITY_LIST.length; i++) {
        if (this.verPN == 2 && ((_a = this.calendarSets[this.activeSet][GRANULARITY_LIST[i]]) == null ? void 0 : _a.enabled) || this.verPN == 1 && ((_c = (_b = this.app.plugins.getPlugin("periodic-notes").settings) == null ? void 0 : _b[GRANULARITY_TO_PERIODICITY[GRANULARITY_LIST[i]]]) == null ? void 0 : _c.enabled)) {
          const icon = i == this.activeGranularity ? "check" : "";
          menu.addItem((item) => item.setTitle(GRANULARITY_LIST[i]).setIcon(icon).onClick(() => {
            this.activeGranularity = i;
            this.app.workspace.requestSaveLayout();
            this.refreshView(true, true, true);
          }));
        }
      }
      menu.showAtMouseEvent(event);
    });
  }
  if (this.settings.calendarSetsEnabled) {
    const navCalendarSet = navHeader.createDiv("nav-date-range");
    navCalendarSet.createDiv("nav-date-range-content").setText(this.calendarSets[this.activeSet].id);
    navCalendarSet.addEventListener("click", (evet) => {
      this.activeSet = (this.activeSet + 1) % this.calendarSets.length;
      this.app.workspace.requestSaveLayout();
      this.refreshView(false, true, true);
    });
    navCalendarSet.addEventListener("contextmenu", (event) => {
      const menu = new import_obsidian3.Menu();
      for (let i = 0; i < this.calendarSets.length; i++) {
        const icon = i == this.activeSet ? "check" : "";
        menu.addItem((item) => item.setTitle(this.calendarSets[i].id).setIcon(icon).onClick(() => {
          this.activeSet = i;
          this.app.workspace.requestSaveLayout();
          this.refreshView(false, true, true);
        }));
      }
      menu.showAtMouseEvent(event);
    });
  }
  this.contentEl.empty();
  this.contentEl.appendChild(navHeader);
}
function uiPreviousPage(parentEl, granularity) {
  let navActionButton = parentEl.createDiv("clickable-icon nav-action-button");
  navActionButton.ariaLabel = "previous notes";
  (0, import_obsidian3.setIcon)(navActionButton, "arrow-left");
  navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
    this.searchRange.latest = this.searchRange.latest.subtract(this.settings.duration[granularity], granularity);
    this.searchRange.earliest = this.searchRange.earliest.subtract(this.settings.duration[granularity], granularity);
    this.refreshView(false, true, true);
  }));
}
function uiNextPage(parentEl, granularity) {
  let navActionButton = parentEl.createDiv("clickable-icon nav-action-button");
  navActionButton.ariaLabel = "next notes";
  (0, import_obsidian3.setIcon)(navActionButton, "arrow-right");
  navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
    this.searchRange.latest = this.searchRange.latest.add(this.settings.duration[granularity], granularity);
    this.searchRange.earliest = this.searchRange.earliest.add(this.settings.duration[granularity], granularity);
    this.refreshView(false, true, true);
  }));
}
function uiReturnHome(parentEl) {
  let navActionButton = parentEl.createDiv("clickable-icon nav-action-button");
  navActionButton.ariaLabel = "home";
  (0, import_obsidian3.setIcon)(navActionButton, "home");
  navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
    this.resetSearchRange();
    this.refreshView(false, true, true);
  }));
  navActionButton.addEventListener("contextmenu", (event) => {
    const menu = new import_obsidian3.Menu();
    menu.addItem((item) => item.setTitle("refresh view").setIcon("refresh-cw").onClick(() => __async(this, null, function* () {
      this.refreshView(true, true, true);
    })));
    menu.showAtMouseEvent(event);
  });
}
function uiSetting(parentEl, granularity) {
  let navActionButton = parentEl.createDiv("clickable-icon nav-action-button");
  navActionButton.ariaLabel = "open settings";
  (0, import_obsidian3.setIcon)(navActionButton, "settings");
  navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
    this.app.setting.open();
    this.app.setting.openTabById(this.plugin.manifest.id);
  }));
  navActionButton.addEventListener("contextmenu", (event) => {
    const menu = new import_obsidian3.Menu();
    for (const element in this.settings.showElements) {
      const icon = this.settings.showElements[element] == true ? "check" : "";
      menu.addItem((item) => item.setTitle(`show ${element}`).setIcon(icon).onClick(() => __async(this, null, function* () {
        this.settings.showElements[element] = !this.settings.showElements[element];
        yield this.plugin.saveSettings();
        this.refreshView(false, false, false);
      })));
    }
    if (this.settings.showElements.listItems) {
      const icon = this.settings.taskOnly ? "check" : "";
      menu.addItem((item) => item.setTitle("tasks only").setIcon(icon).onClick(() => __async(this, null, function* () {
        this.settings.taskOnly = !this.settings.taskOnly;
        yield this.plugin.saveSettings();
        this.refreshView(false, false, false);
      })));
    }
    const iconBacklink = this.settings.showBacklinks == true ? "check" : "";
    menu.addItem((item) => item.setTitle(`show backlink files`).setIcon(iconBacklink).onClick(() => __async(this, null, function* () {
      this.settings.showBacklinks = !this.settings.showBacklinks;
      yield this.plugin.saveSettings();
      this.refreshView(false, false, false);
    })));
    menu.addSeparator();
    if (granularity == "day") {
      for (let index in FILEINFO_TO_DISPLAY_DAY) {
        const icon = index == this.settings.displayFileInfoDaily ? "check" : "";
        menu.addItem((item) => item.setTitle(FILEINFO_TO_DISPLAY_DAY[index]).setIcon(icon).onClick(() => __async(this, null, function* () {
          this.settings.displayFileInfoDaily = index;
          yield this.plugin.saveSettings();
          this.refreshView(false, false, false);
        })));
      }
    } else {
      for (let index in FILEINFO_TO_DISPLAY) {
        const icon = index == this.settings.displayFileInfoPeriodic ? "check" : "";
        menu.addItem((item) => item.setTitle(FILEINFO_TO_DISPLAY[index]).setIcon(icon).onClick(() => __async(this, null, function* () {
          this.settings.displayFileInfoPeriodic = index;
          yield this.plugin.saveSettings();
          this.refreshView(false, false, false);
        })));
      }
    }
    menu.addSeparator();
    const iconTooltip = this.settings.tooltipPreview ? "check" : "";
    menu.addItem((item) => item.setTitle("show tooltip preview").setIcon(iconTooltip).onClick(() => __async(this, null, function* () {
      this.settings.tooltipPreview = !this.settings.tooltipPreview;
      yield this.plugin.saveSettings();
      this.refreshView(false, false, false);
    })));
    menu.showAtMouseEvent(event);
  });
}
function uiCreateDailyNote(parentEl, granularity) {
  let navActionButton = parentEl.createDiv("clickable-icon nav-action-button");
  let labelForToday = "create/open ";
  let labelForNext = "create/open ";
  if (granularity == "day") {
    labelForToday = labelForToday + "today's ";
    labelForNext = labelForNext + "tomorrow's ";
  } else {
    labelForToday = labelForToday + "present ";
    labelForNext = labelForNext + "next ";
  }
  labelForToday = labelForToday + GRANULARITY_TO_PERIODICITY[granularity] + " note";
  labelForNext = labelForNext + GRANULARITY_TO_PERIODICITY[granularity] + " note";
  if (this.verPN == 2) {
    labelForToday = labelForToday + " for " + this.calendarSets[this.activeSet].id;
    labelForNext = labelForNext + " for " + this.calendarSets[this.activeSet].id;
  }
  navActionButton.ariaLabel = labelForToday;
  (0, import_obsidian3.setIcon)(navActionButton, "calendar-plus");
  navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
    event.preventDefault;
    const date = window.moment();
    if (this.verPN == 2) {
      createAndOpenPeriodicNote(granularity, date, this.calendarSets[this.activeSet]);
    } else {
      createAndOpenDailyNote(granularity, date, this.allDailyNotes);
    }
  }));
  navActionButton.addEventListener("contextmenu", (event) => {
    const menu = new import_obsidian3.Menu();
    menu.addItem((item) => item.setTitle(labelForNext).setIcon("calendar-plus").onClick(() => __async(this, null, function* () {
      const date = window.moment().add(1, granularity);
      if (this.verPN == 2) {
        createAndOpenPeriodicNote(granularity, date, this.calendarSets[this.activeSet]);
      } else {
        createAndOpenDailyNote(granularity, date, this.allDailyNotes);
      }
    })));
    menu.showAtMouseEvent(event);
  });
}
function uiExtract(parentEl) {
  let navActionButton = parentEl.createDiv("clickable-icon nav-action-button");
  if (!this.extractMode) {
    navActionButton.ariaLabel = "extract";
    (0, import_obsidian3.setIcon)(navActionButton, "search");
    navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
      event.preventDefault;
      const onSubmit = (enableExtract) => {
        if (enableExtract) {
          this.extractMode = true;
          this.refreshView(false, false, false);
        }
      };
      new ModalExtract(this.app, this.plugin, onSubmit).open();
    }));
  } else {
    navActionButton.ariaLabel = "unextract";
    (0, import_obsidian3.setIcon)(navActionButton, "x-circle");
    navActionButton.classList.add("is-active");
    navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
      this.extractMode = false;
      this.extractTask = false;
      this.refreshView(false, false, false);
    }));
  }
  navActionButton.addEventListener("contextmenu", (event) => {
    const menu = new import_obsidian3.Menu();
    menu.addItem((item) => item.setTitle("extract tasks").setIcon("check-square").onClick(() => __async(this, null, function* () {
      this.extractMode = true;
      this.extractTask = true;
      this.refreshView(false, false, false);
    })));
    menu.showAtMouseEvent(event);
  });
}
function uiCollapse(parentEl) {
  let navActionButton = parentEl.createDiv("clickable-icon nav-action-button");
  if (this.collapseAll) {
    navActionButton.classList.add("is-active");
  }
  if (!this.collapseAll) {
    navActionButton.ariaLabel = "collapse all";
    (0, import_obsidian3.setIcon)(navActionButton, "chevrons-down-up");
    navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
      this.collapseAll = true;
      this.refreshView(false, false, false);
    }));
  } else {
    navActionButton.ariaLabel = "expand";
    (0, import_obsidian3.setIcon)(navActionButton, "chevrons-down-up");
    navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
      this.collapseAll = false;
      this.refreshView(false, false, false);
    }));
  }
}

// src/getTargetFiles.ts
var import_obsidian4 = __toModule(require("obsidian"));
var import_obsidian_daily_notes_interface2 = __toModule(require_main());
function getTargetFiles(allFiles, granularity) {
  let files = [];
  let checkDate = this.searchRange.latest.clone();
  let checkDateEarliest = this.searchRange.earliest.clone();
  if (this.settings.initialSearchType == "backward") {
    if (checkDate.isSame(window.moment(), "day")) {
      checkDate.add(Math.ceil(this.settings.offset / DAYS_PER_UNIT[granularity]), granularity);
    }
    checkDateEarliest = this.searchRange.latest.clone().subtract(this.settings.duration[granularity] - 1, granularity);
  } else {
    checkDate = this.searchRange.earliest.clone().add(this.settings.duration[granularity] - 1, granularity);
  }
  while (checkDate.isSameOrAfter(checkDateEarliest, granularity)) {
    if (allFiles[(0, import_obsidian_daily_notes_interface2.getDateUID)(checkDate, granularity)]) {
      files.push(allFiles[(0, import_obsidian_daily_notes_interface2.getDateUID)(checkDate, granularity)]);
    }
    checkDate.subtract(1, granularity);
  }
  return files;
}
function getTargetPeriodicNotes(calendarSet, granularity) {
  var _a;
  let files = [];
  let checkDate = this.searchRange.latest.clone();
  let checkDateEarliest = this.searchRange.earliest.clone();
  if (this.settings.initialSearchType == "backward") {
    if (checkDate.isSame(window.moment(), "day")) {
      checkDate.add(Math.ceil(this.settings.offset / DAYS_PER_UNIT[granularity]), granularity);
    }
    checkDateEarliest = this.searchRange.latest.clone().subtract(this.settings.duration[granularity] - 1, granularity);
  } else {
    checkDate = this.searchRange.earliest.clone().add(this.settings.duration[granularity] - 1, granularity);
  }
  if (this.settings.showDebugInfo) {
    console.log("DNO:searching caches of Periodic Notes... calendar set:", calendarSet);
  }
  while (checkDate.isSameOrAfter(checkDateEarliest, granularity)) {
    const caches = this.app.plugins.getPlugin("periodic-notes").cache.getPeriodicNotes(calendarSet.id, granularity, checkDate);
    for (const file of caches) {
      if (this.settings.exactMatchOnly && !((_a = file == null ? void 0 : file.matchData) == null ? void 0 : _a.exact)) {
        continue;
      }
      if (this.settings.markdownOnly && !(file == null ? void 0 : file.filePath.endsWith(".md"))) {
        continue;
      }
      if (!file.filePath.startsWith(calendarSet[granularity].folder.concat("/")) && calendarSet[granularity].folder) {
        continue;
      }
      const fileobj = this.app.vault.getAbstractFileByPath(file.filePath);
      if (fileobj instanceof import_obsidian4.TFile) {
        files.push(fileobj);
      }
    }
    checkDate.subtract(1, granularity);
  }
  return files;
}
function getBacklinkFiles(app2, file) {
  let files = [];
  let backlinks = app2.metadataCache.getBacklinksForFile(file).data;
  for (const key in backlinks) {
    const fileobj = app2.vault.getAbstractFileByPath(key);
    if (fileobj instanceof import_obsidian4.TFile) {
      files.push(fileobj);
    }
  }
  return files;
}
function getBacklinkFilesDataview(app2, file) {
  var _a, _b, _c, _d, _e;
  let files = [];
  if (!app2.plugins.plugins["dataview"]) {
    return getBacklinkFiles(app2, file);
  }
  let backlinks = (_e = (_d = (_c = (_b = (_a = app2.plugins.plugins) == null ? void 0 : _a.dataview) == null ? void 0 : _b.api) == null ? void 0 : _c.pages(`"${file.path}"`)) == null ? void 0 : _d.values[0]) == null ? void 0 : _e.file.inlinks.values;
  if (!backlinks) {
    return getBacklinkFiles(app2, file);
  }
  for (let i = 0; i < backlinks.length; i++) {
    const fileobj = app2.vault.getAbstractFileByPath(backlinks[i].path);
    if (fileobj instanceof import_obsidian4.TFile) {
      files.push(fileobj);
    }
  }
  return files;
}

// src/getOutline.ts
var import_obsidian_daily_notes_interface3 = __toModule(require_main());
function getFileInfo(files) {
  return __async(this, null, function* () {
    let fileInfo = [];
    for (let i = 0; i < files.length; i++) {
      const content = yield this.app.vault.cachedRead(files[i]);
      const lines = content.split("\n");
      const backlinkFiles = this.settings.showBacklinks ? getBacklinkFilesDataview(this.app, files[i]) : void 0;
      let info = {
        date: (0, import_obsidian_daily_notes_interface3.getDateFromFile)(files[i], GRANULARITY_LIST[this.activeGranularity]),
        lines,
        numOfLines: lines.length,
        isFolded: false,
        backlinks: backlinkFiles,
        frontmatterLinks: void 0
      };
      if (this.verPN == 2) {
        info.date = this.app.plugins.getPlugin("periodic-notes").cache.cachedFiles.get(this.calendarSets[this.activeSet].id).get(files[i].path).date;
      }
      fileInfo.push(info);
    }
    return fileInfo;
  });
}
function getOutline(files, info) {
  return __async(this, null, function* () {
    let data = [];
    for (let i = 0; i < files.length; i++) {
      const cache = this.app.metadataCache.getFileCache(files[i]);
      info[i].frontmatterLinks = cache == null ? void 0 : cache.frontmatterLinks;
      data[i] = [];
      if (!cache) {
        continue;
      }
      if (cache.hasOwnProperty("headings")) {
        for (let j = 0; j < cache.headings.length; j++) {
          const element = {
            typeOfElement: "heading",
            position: cache.headings[j].position,
            displayText: cache.headings[j].heading,
            level: cache.headings[j].level
          };
          data[i].push(element);
        }
      }
      if (cache.hasOwnProperty("links")) {
        for (let j = 0; j < cache.links.length; j++) {
          const element = {
            typeOfElement: "link",
            position: cache.links[j].position,
            displayText: cache.links[j].displayText == "" ? cache.links[j].original.substring(1, cache.links[j].original.indexOf("]")) : cache.links[j].displayText,
            link: cache.links[j].link
          };
          data[i].push(element);
        }
      }
      if (cache.hasOwnProperty("listItems")) {
        for (let j = 0; j < cache.listItems.length; j++) {
          let listLevel = 0;
          if (cache.listItems[j].parent > 0) {
            listLevel = 2;
          } else if (j > 0) {
            if (!(Math.abs(cache.listItems[j].parent) == cache.listItems[j].position.start.line) && cache.listItems[j].position.start.line - cache.listItems[j - 1].position.start.line == 1) {
              listLevel = 1;
            }
          }
          const element = {
            typeOfElement: "listItems",
            position: cache.listItems[j].position,
            displayText: this.fileInfo[i].lines[cache.listItems[j].position.start.line].replace(/^(\s|\t)*-\s(\[.\]\s)*/, ""),
            level: listLevel,
            task: cache.listItems[j].task
          };
          data[i].push(element);
        }
      }
      if (cache.hasOwnProperty("tags")) {
        for (let j = 0; j < cache.tags.length; j++) {
          const element = {
            typeOfElement: "tag",
            position: cache.tags[j].position,
            displayText: cache.tags[j].tag.substring(1)
          };
          data[i].push(element);
        }
      }
      data[i].sort((a, b) => {
        return a.position.start.offset - b.position.start.offset;
      });
    }
    return data;
  });
}

// src/constructDOM.ts
var import_obsidian5 = __toModule(require("obsidian"));

// src/util.ts
function cleanFileFlag(file, settings) {
  if (Object.keys(settings.fileFlag[file.path]).length == 0) {
    delete settings.fileFlag[file.path];
  }
}
function checkFlag(file, flag, settings) {
  var _a;
  return (_a = settings.fileFlag[file.path]) == null ? void 0 : _a[flag];
}
function addFlag(file, flag, settings) {
  if (!settings.fileFlag.hasOwnProperty(file.path)) {
    settings.fileFlag[file.path] = {};
  }
  settings.fileFlag[file.path][flag] = true;
}
function removeFlag(file, flag, settings) {
  delete settings.fileFlag[file.path][flag];
  cleanFileFlag(file, settings);
}
function getSubpathPosition(app2, file, subpath) {
  var _a, _b;
  const cache = app2.metadataCache.getFileCache(file);
  if (!cache) {
    return null;
  }
  const checkpath = subpath.replace(/[#^]/g, "");
  if ((_a = cache.headings) == null ? void 0 : _a.length) {
    const index = cache.headings.findIndex((element) => element.heading.replace(/[#^]/g, "") == checkpath);
    if (index >= 0) {
      return cache.headings[index].position;
    }
  }
  if ((_b = cache.sections) == null ? void 0 : _b.length) {
    const index = cache.sections.findIndex((element) => {
      var _a2;
      return ((_a2 = element.id) == null ? void 0 : _a2.replace(/[#^]/g, "")) == checkpath;
    });
    if (index >= 0) {
      return cache.sections[index].position;
    }
  }
  return null;
}

// src/constructDOM.ts
function drawOutline(files, info, data) {
  var _a, _b, _c, _d, _e, _f;
  const containerEl = createDiv("nav-files-container node-insert-event");
  const rootEl = containerEl.createDiv("tree-item nav-folder mod-root");
  const rootChildrenEl = rootEl.createDiv("tree-item-children nav-folder-children");
  if (files.length == 0) {
    rootChildrenEl.createEl("h4", {
      text: "Daily/periodic note loading error(try clicking on the Home icon)"
    });
  }
  let includeMode = this.settings.includeOnly != "none" && (Boolean(this.settings.wordsToInclude.length) || this.settings.includeBeginning);
  let maxLevel = this.settings.headingLevel.indexOf(true);
  for (let i = 0; i < files.length; i++) {
    let latestHeadingLevel = 0;
    const dailyNoteEl = rootChildrenEl.createDiv("tree-item nav-folder");
    const dailyNoteTitleEl = dailyNoteEl.createDiv("tree-item-self is-clickable mod-collapsible nav-folder-title");
    const dailyNoteChildrenEl = dailyNoteEl.createDiv("tree-item-children nav-folder-children");
    const changeColor = this.settings.noteTitleBackgroundColor;
    if (changeColor != "none") {
      const customColor = this.settings.customNoteTitleBackgroundColor;
      const customColorHover = this.settings.customNoteTitleBackgroundColorHover;
      const theme = Boolean(document.getElementsByTagName("body")[0].classList.contains("theme-light")) ? "light" : "dark";
      dailyNoteTitleEl.style.backgroundColor = customColor[changeColor][theme];
      dailyNoteTitleEl.addEventListener("mouseover", function() {
        this.style.backgroundColor = customColorHover[changeColor][theme];
      });
      dailyNoteTitleEl.addEventListener("mouseout", function() {
        this.style.backgroundColor = customColor[changeColor][theme];
      });
    }
    const noteCollapseIcon = dailyNoteTitleEl.createDiv("tree-item-icon collapse-icon nav-folder-collapse-indicator");
    (0, import_obsidian5.setIcon)(noteCollapseIcon, "right-triangle");
    noteCollapseIcon.addEventListener("click", (event) => __async(this, null, function* () {
      event.stopPropagation();
      if (info[i].isFolded) {
        if (!this.collapseAll) {
          if (checkFlag(files[i], "fold", this.settings)) {
            removeFlag(files[i], "fold", this.settings);
            yield this.plugin.saveSettings();
          }
        }
        dailyNoteEl.classList.remove("is-collapsed");
        noteCollapseIcon.classList.remove("is-collapsed");
        info[i].isFolded = false;
        dailyNoteChildrenEl.style.display = "block";
      } else {
        if (!this.collapseAll) {
          addFlag(files[i], "fold", this.settings);
        }
        yield this.plugin.saveSettings();
        dailyNoteEl.classList.add("is-collapsed");
        noteCollapseIcon.classList.add("is-collapsed");
        info[i].isFolded = true;
        dailyNoteChildrenEl.style.display = "none";
      }
    }));
    let name = files[i].basename;
    if (this.settings.attachWeeklyNotesName && GRANULARITY_LIST[this.activeGranularity] == "week") {
      name = name + " (" + this.fileInfo[i].date.clone().startOf("week").format("MM/DD [-] ") + this.fileInfo[i].date.clone().endOf("week").format("MM/DD") + ")";
    }
    dailyNoteTitleEl.createDiv("tree-item-inner nav-folder-title-content").setText(name);
    const infoToDisplay = this.activeGranularity == 0 ? this.settings.displayFileInfoDaily : this.settings.displayFileInfoPeriodic;
    switch (infoToDisplay) {
      case "lines":
        dailyNoteTitleEl.dataset.subinfo = info[i].numOfLines.toString();
        break;
      case "days":
        let basedate = this.settings.initialSearchType == "backward" ? window.moment() : window.moment(this.settings.onset);
        dailyNoteTitleEl.dataset.subinfo = Math.abs(info[i].date.diff(basedate.startOf(GRANULARITY_LIST[this.activeGranularity]), GRANULARITY_LIST[this.activeGranularity])).toString();
        break;
      case "dow":
        dailyNoteTitleEl.dataset.subinfo = info[i].date.format("dddd");
        break;
      case "dowshort":
        dailyNoteTitleEl.dataset.subinfo = info[i].date.format("ddd");
        break;
      case "weeknumber":
        dailyNoteTitleEl.dataset.subinfo = info[i].date.format("[w]ww");
        break;
      case "tag":
        let firsttagIndex = data[i].findIndex((element, index) => data[i][index].typeOfElement == "tag");
        if (firsttagIndex >= 0) {
          dailyNoteTitleEl.dataset.subinfo = data[i][firsttagIndex].displayText;
        }
        break;
      case "none":
        break;
      default:
        break;
    }
    dailyNoteTitleEl.addEventListener("click", (event) => {
      this.app.workspace.getLeaf().openFile(files[i]);
    }, false);
    dailyNoteTitleEl.addEventListener("mouseover", (event) => {
      this.app.workspace.trigger("hover-link", {
        event,
        source: DailyNoteOutlineViewType,
        hoverParent: rootEl,
        targetEl: dailyNoteTitleEl,
        linktext: files[i].path
      });
    });
    dailyNoteTitleEl.addEventListener("contextmenu", (event) => {
      const menu = new import_obsidian5.Menu();
      menu.addItem((item) => item.setTitle("Open in new tab").setIcon("file-plus").onClick(() => {
        event.preventDefault();
        this.app.workspace.getLeaf("tab").openFile(files[i]);
      }));
      menu.addItem((item) => item.setTitle("Open to the right").setIcon("separator-vertical").onClick(() => {
        event.preventDefault();
        this.app.workspace.getLeaf("split").openFile(files[i]);
      }));
      menu.addItem((item) => item.setTitle("Open in new window").setIcon("scan").onClick(() => __async(this, null, function* () {
        yield this.app.workspace.openPopoutLeaf({ size: { width: this.settings.popoutSize.width, height: this.settings.popoutSize.height } }).openFile(files[i]);
        if (this.settings.popoutAlwaysOnTop) {
          setPopoutAlwaysOnTop();
        }
      })));
      menu.showAtMouseEvent(event);
    });
    let isIncluded = this.settings.includeBeginning;
    let includeModeHeadingLevel;
    let isExcluded = false;
    let excludeType;
    let excludeModeHeadingLevel;
    let primeType = this.settings.includeOnly == "none" ? this.settings.primeElement : this.settings.includeOnly;
    let isExtracted = false;
    if (this.settings.showPropertyLinks && info[i].frontmatterLinks) {
      for (let j = 0; j < info[i].frontmatterLinks.length; j++) {
        const linkTarget = this.app.metadataCache.getFirstLinkpathDest((0, import_obsidian5.parseLinktext)(info[i].frontmatterLinks[j].link).path, files[i].path);
        if (!(linkTarget instanceof import_obsidian5.TFile)) {
          continue;
        }
        const linkSubpath = (0, import_obsidian5.parseLinktext)(info[i].frontmatterLinks[j].link).subpath;
        if (this.extractMode == true) {
          if (this.extractTask == true || !info[i].frontmatterLinks[j].displayText.toLowerCase().includes(this.settings.wordsToExtract.toLowerCase())) {
            continue;
          } else {
            isExtracted = true;
          }
        }
        const outlineEl = dailyNoteChildrenEl.createDiv("tree-item nav-file");
        const outlineTitle = outlineEl.createDiv("tree-item-self is-clickable nav-file-title");
        (0, import_obsidian5.setIcon)(outlineTitle, "link");
        outlineTitle.style.paddingLeft = "0.5em";
        outlineTitle.createDiv("tree-item-inner nav-file-title-content").setText(info[i].frontmatterLinks[j].displayText);
        outlineTitle.addEventListener("click", (event) => {
          event.preventDefault();
          this.app.workspace.getLeaf().openFile(files[i]);
        }, false);
        outlineTitle.addEventListener("mouseover", (event) => {
          var _a2;
          if (linkTarget) {
            let posInfo = {};
            if (linkSubpath) {
              const subpathPosition = getSubpathPosition(this.app, linkTarget, linkSubpath);
              if ((_a2 = subpathPosition == null ? void 0 : subpathPosition.start) == null ? void 0 : _a2.line) {
                posInfo = { scroll: subpathPosition.start.line };
              }
            }
            this.app.workspace.trigger("hover-link", {
              event,
              source: DailyNoteOutlineViewType,
              hoverParent: rootEl,
              targetEl: outlineTitle,
              linktext: linkTarget.path,
              state: posInfo
            });
          }
        });
        outlineTitle.addEventListener("contextmenu", (event) => {
          const menu = new import_obsidian5.Menu();
          menu.addItem((item) => item.setTitle("Extract").setIcon("search").onClick(() => __async(this, null, function* () {
            this.plugin.settings.wordsToExtract = info[i].frontmatterLinks[j].displayText;
            yield this.plugin.saveSettings();
            this.extractMode = true;
            this.extractTask = false;
            this.refreshView(false, false);
          })));
          menu.addSeparator();
          menu.addItem((item) => item.setTitle("Open linked file").setIcon("links-going-out").onClick(() => __async(this, null, function* () {
            var _a2;
            yield this.app.workspace.getLeaf().openFile(linkTarget);
            if (linkSubpath) {
              const subpathPosition = getSubpathPosition(this.app, linkTarget, linkSubpath);
              scrollToElement((_a2 = subpathPosition.start) == null ? void 0 : _a2.line, 0, this.app);
            }
          })));
          menu.addSeparator();
          menu.addItem((item) => item.setTitle("Open linked file in new tab").setIcon("file-plus").onClick(() => __async(this, null, function* () {
            var _a2;
            yield this.app.workspace.getLeaf("tab").openFile(linkTarget);
            if (linkSubpath) {
              const subpathPosition = getSubpathPosition(this.app, linkTarget, linkSubpath);
              scrollToElement((_a2 = subpathPosition.start) == null ? void 0 : _a2.line, 0, this.app);
            }
          })));
          menu.addItem((item) => item.setTitle("Open linked file to the right").setIcon("separator-vertical").onClick(() => __async(this, null, function* () {
            var _a2;
            yield this.app.workspace.getLeaf("split").openFile(linkTarget);
            if (linkSubpath) {
              const subpathPosition = getSubpathPosition(this.app, linkTarget, linkSubpath);
              scrollToElement((_a2 = subpathPosition.start) == null ? void 0 : _a2.line, 0, this.app);
            }
          })));
          menu.addItem((item) => item.setTitle("Open linked file in new window").setIcon("scan").onClick(() => __async(this, null, function* () {
            var _a2;
            yield this.app.workspace.openPopoutLeaf({ size: { width: this.settings.popoutSize.width, height: this.settings.popoutSize.height } }).openFile(linkTarget);
            if (linkSubpath) {
              const subpathPosition = getSubpathPosition(this.app, linkTarget, linkSubpath);
              scrollToElement((_a2 = subpathPosition.start) == null ? void 0 : _a2.line, 0, this.app);
            }
            if (this.settings.popoutAlwaysOnTop) {
              setPopoutAlwaysOnTop();
            }
          })));
          menu.addSeparator();
          menu.addItem((item) => item.setTitle("Open in new tab").setIcon("file-plus").onClick(() => __async(this, null, function* () {
            yield this.app.workspace.getLeaf("tab").openFile(files[i]);
          })));
          menu.addItem((item) => item.setTitle("Open to the right").setIcon("separator-vertical").onClick(() => __async(this, null, function* () {
            yield this.app.workspace.getLeaf("split").openFile(files[i]);
          })));
          menu.addItem((item) => item.setTitle("Open in new window").setIcon("scan").onClick(() => __async(this, null, function* () {
            yield this.app.workspace.getLeaf("window").openFile(files[i]);
          })));
          menu.showAtMouseEvent(event);
        });
      }
    }
    if (data[i].length > 0) {
      elementloop:
        for (let j = 0; j < data[i].length; j++) {
          const element = data[i][j].typeOfElement;
          const linkTarget = element !== "link" ? null : this.app.metadataCache.getFirstLinkpathDest((0, import_obsidian5.parseLinktext)((_a = data[i][j]) == null ? void 0 : _a.link).path, files[i].path);
          const linkSubpath = !linkTarget ? void 0 : (0, import_obsidian5.parseLinktext)((_b = data[i][j]) == null ? void 0 : _b.link).subpath;
          if (includeMode && this.settings.includeOnly == element) {
            if (isIncluded == true && element == "heading" && data[i][j].level > includeModeHeadingLevel) {
            } else {
              isIncluded = false;
              for (const value of this.settings.wordsToInclude) {
                if (value && data[i][j].displayText.includes(value)) {
                  isIncluded = true;
                  if (element == "heading") {
                    includeModeHeadingLevel = data[i][j].level;
                  }
                }
              }
            }
          }
          if (!isIncluded) {
            continue;
          }
          if (!isExcluded || isExcluded && (excludeType == element || primeType == element)) {
            if (element == "heading" && data[i][j].level > excludeModeHeadingLevel) {
            } else {
              isExcluded = false;
              for (const value of this.settings.wordsToExclude[element]) {
                if (value && data[i][j].displayText.includes(value)) {
                  isExcluded = true;
                  excludeType = element;
                  if (element == "heading") {
                    excludeModeHeadingLevel = data[i][j].level;
                  }
                }
              }
            }
          }
          if (isExcluded) {
            continue;
          }
          if (this.settings.showElements[element] == false) {
            continue;
          }
          for (const value of this.settings.wordsToIgnore[element]) {
            if (value && data[i][j].displayText.includes(value)) {
              continue elementloop;
            }
          }
          if (this.extractMode == true) {
            if (this.extractTask == false && !data[i][j].displayText.toLowerCase().includes(this.settings.wordsToExtract.toLowerCase())) {
              continue;
            } else if (this.extractTask == true && data[i][j].task === void 0) {
              continue;
            } else {
              isExtracted = true;
            }
          }
          if (element == "heading") {
            latestHeadingLevel = data[i][j].level;
            if (!this.settings.headingLevel[data[i][j].level - 1]) {
              continue;
            }
          }
          if (element == "link") {
          }
          if (element == "tag") {
          }
          if (element == "listItems") {
            if (this.settings.hideCompletedTasks == true && data[i][j].task == "x") {
              continue;
            } else if (this.settings.taskOnly == true && data[i][j].task === void 0) {
              continue;
            } else if (this.settings.allTasks == false || data[i][j].task === void 0) {
              if (data[i][j].level == 2 || data[i][j].level == 1 && this.settings.allRootItems == false) {
                continue;
              }
            }
          }
          const outlineEl = dailyNoteChildrenEl.createDiv("tree-item nav-file");
          const outlineTitle = outlineEl.createDiv("tree-item-self is-clickable nav-file-title");
          switch (this.settings.icon[element]) {
            case "none":
              break;
            case "headingwithnumber":
              (0, import_obsidian5.setIcon)(outlineTitle, `heading-${data[i][j].level}`);
              break;
            case "custom":
              (0, import_obsidian5.setIcon)(outlineTitle, this.settings.customIcon[element]);
              break;
            default:
              (0, import_obsidian5.setIcon)(outlineTitle, this.settings.icon[element]);
              break;
          }
          if (element == "listItems" && data[i][j].task !== void 0) {
            if (data[i][j].task == "x") {
              (0, import_obsidian5.setIcon)(outlineTitle, this.settings.icon.taskDone == "custom" ? this.settings.customIcon.taskDone : this.settings.icon.taskDone);
            } else {
              (0, import_obsidian5.setIcon)(outlineTitle, this.settings.icon.task == "custom" ? this.settings.customIcon.task : this.settings.icon.task);
            }
            const customStatus = Object.keys(this.settings.taskIcon).find((customStatus2) => this.settings.taskIcon[customStatus2].symbol === data[i][j].task);
            if (customStatus) {
              (0, import_obsidian5.setIcon)(outlineTitle, this.settings.taskIcon[customStatus].icon);
            }
          }
          let prefix = this.settings.prefix[element];
          if (element == "heading") {
            switch (this.settings.repeatHeadingPrefix) {
              case "level":
                prefix = prefix.repeat(data[i][j].level);
                break;
              case "levelminus1":
                prefix = prefix.repeat(data[i][j].level - 1);
                break;
            }
          }
          let indent = 0.5;
          if (element == "heading" && this.settings.indent.heading == true) {
            indent = indent + (data[i][j].level - (maxLevel + 1)) * 1.5;
          }
          if (element != "heading" && this.settings.indentFollowHeading) {
            const additionalIndent = (latestHeadingLevel - (maxLevel + 1) + (this.settings.indentFollowHeading == 2 ? 1 : 0)) * 1.5;
            indent = indent + (additionalIndent > 0 ? additionalIndent : 0);
          }
          if (element == "link" && data[i][j].position.start.line == ((_c = data[i][j - 1]) == null ? void 0 : _c.position.start.line)) {
            indent = indent + 1.5;
          }
          outlineTitle.style.paddingLeft = `${indent}em`;
          if (element == "listItems" && data[i][j].task !== void 0) {
            prefix = data[i][j].task == "x" ? this.settings.prefix.taskDone : this.settings.prefix.task;
            if (this.settings.addCheckboxText) {
              prefix = prefix + "[" + data[i][j].task + "] ";
            }
          }
          let dispText = this.stripMarkdownSymbol(data[i][j].displayText);
          outlineTitle.createDiv("tree-item-inner nav-file-title-content").setText(prefix + dispText);
          if (this.settings.inlinePreview) {
            let previewText = "";
            if ((element == "link" || element == "tag") && data[i][j].position.end.col < info[i].lines[data[i][j].position.start.line].length) {
              previewText = info[i].lines[data[i][j].position.start.line].slice(data[i][j].position.end.col);
            } else {
              previewText = data[i][j].position.start.line < info[i].numOfLines - 1 ? info[i].lines[data[i][j].position.start.line + 1] : "";
            }
            outlineTitle.createDiv("nav-file-title-preview").setText(previewText);
          }
          if (this.settings.tooltipPreview) {
            let previewText2 = "";
            let endLine = info[i].numOfLines - 1;
            let k = j + 1;
            endpreviewloop:
              while (k < data[i].length) {
                if (this.settings.showElements[data[i][k].typeOfElement]) {
                  if (data[i][k].typeOfElement == "listItems" && (data[i][k].level >= 2 || this.settings.allRootItems == false && data[i][k].level == 1 && (this.settings.allTasks == false || data[i][k].task === void 0) || this.settings.taskOnly && data[i][k].task === void 0 || this.settings.hideCompletedTasks && data[i][k].task == "x")) {
                    k++;
                    continue;
                  } else if (data[i][k].typeOfElement == "heading" && this.settings.headingLevel[data[i][k].level - 1] == false) {
                    k++;
                    continue;
                  } else {
                    for (const value of this.settings.wordsToIgnore[data[i][k].typeOfElement]) {
                      if (value && data[i][k].displayText.includes(value)) {
                        k++;
                        continue endpreviewloop;
                      }
                    }
                    endLine = data[i][k].position.start.line - 1;
                    break;
                  }
                }
                k++;
              }
            for (let l = data[i][j].position.start.line; l <= endLine; l++) {
              previewText2 = previewText2 + info[i].lines[l] + "\n";
            }
            previewText2 = previewText2.replace(/\n$|\n(?=\n)/g, "");
            (0, import_obsidian5.setTooltip)(outlineTitle, previewText2, { classes: ["DNO-preview"] });
            outlineTitle.dataset.tooltipPosition = this.settings.tooltipPreviewDirection;
            outlineTitle.setAttribute("data-tooltip-delay", "10");
          }
          outlineTitle.addEventListener("click", (event) => __async(this, null, function* () {
            yield this.app.workspace.getLeaf().openFile(files[i]);
            scrollToElement(data[i][j].position.start.line, data[i][j].position.start.col, this.app);
          }), false);
          outlineTitle.addEventListener("mouseover", (event) => {
            this.app.workspace.trigger("hover-link", {
              event,
              source: DailyNoteOutlineViewType,
              hoverParent: rootEl,
              targetEl: outlineTitle,
              linktext: files[i].path,
              state: { scroll: data[i][j].position.start.line }
            });
          });
          outlineTitle.addEventListener("contextmenu", (event) => {
            const menu = new import_obsidian5.Menu();
            menu.addItem((item) => item.setTitle("Extract").setIcon("search").onClick(() => __async(this, null, function* () {
              this.plugin.settings.wordsToExtract = data[i][j].displayText;
              yield this.plugin.saveSettings();
              this.extractMode = true;
              this.extractTask = false;
              this.refreshView(false, false, false);
            })));
            menu.addSeparator();
            if (element == "link") {
              menu.addItem((item) => item.setTitle("Open linked file").setIcon("links-going-out").onClick(() => __async(this, null, function* () {
                var _a2;
                yield this.app.workspace.getLeaf().openFile(linkTarget);
                if (linkSubpath) {
                  const subpathPosition = getSubpathPosition(this.app, linkTarget, linkSubpath);
                  scrollToElement((_a2 = subpathPosition.start) == null ? void 0 : _a2.line, 0, this.app);
                }
              })));
              menu.addSeparator();
              menu.addItem((item) => item.setTitle("Open linked file in new tab").setIcon("file-plus").onClick(() => __async(this, null, function* () {
                var _a2;
                yield this.app.workspace.getLeaf("tab").openFile(linkTarget);
                if (linkSubpath) {
                  const subpathPosition = getSubpathPosition(this.app, linkTarget, linkSubpath);
                  scrollToElement((_a2 = subpathPosition.start) == null ? void 0 : _a2.line, 0, this.app);
                }
              })));
              menu.addItem((item) => item.setTitle("Open linked file to the right").setIcon("separator-vertical").onClick(() => __async(this, null, function* () {
                var _a2;
                if (linkTarget != this.activeFile) {
                  this.holdUpdateOnce = true;
                }
                yield this.app.workspace.getLeaf("split").openFile(linkTarget);
                if (linkSubpath) {
                  const subpathPosition = getSubpathPosition(this.app, linkTarget, linkSubpath);
                  scrollToElement((_a2 = subpathPosition.start) == null ? void 0 : _a2.line, 0, this.app);
                }
              })));
              menu.addItem((item) => item.setTitle("Open linked file in new window").setIcon("scan").onClick(() => __async(this, null, function* () {
                var _a2;
                if (linkTarget != this.activeFile) {
                  this.holdUpdateOnce = true;
                }
                yield this.app.workspace.openPopoutLeaf({ size: { width: this.settings.popoutSize.width, height: this.settings.popoutSize.height } }).openFile(linkTarget);
                if (linkSubpath) {
                  const subpathPosition = getSubpathPosition(this.app, linkTarget, linkSubpath);
                  scrollToElement((_a2 = subpathPosition.start) == null ? void 0 : _a2.line, 0, this.app);
                }
                if (this.settings.popoutAlwaysOnTop) {
                  setPopoutAlwaysOnTop();
                }
              })));
              menu.addSeparator();
            }
            menu.addItem((item) => item.setTitle("Open in new tab").setIcon("file-plus").onClick(() => __async(this, null, function* () {
              yield this.app.workspace.getLeaf("tab").openFile(files[i]);
              this.scrollToElement(data[i][j].position.start.line, data[i][j].position.start.col);
            })));
            menu.addItem((item) => item.setTitle("Open to the right").setIcon("separator-vertical").onClick(() => __async(this, null, function* () {
              yield this.app.workspace.getLeaf("split").openFile(files[i]);
              this.scrollToElement(data[i][j].position.start.line, data[i][j].position.start.col);
            })));
            menu.addItem((item) => item.setTitle("Open in new window").setIcon("scan").onClick(() => __async(this, null, function* () {
              yield this.app.workspace.getLeaf("window").openFile(files[i]);
              this.scrollToElement(data[i][j].position.start.line, data[i][j].position.start.col);
            })));
            menu.showAtMouseEvent(event);
          });
        }
    } else {
      if (this.extractMode == false) {
        for (let j = 0; j < info[i].lines.length; j++) {
          if (info[i].lines[j] == "") {
            continue;
          } else {
            const outlineEl = dailyNoteChildrenEl.createDiv("tree-item nav-file");
            const outlineTitle = outlineEl.createDiv("tree-item-self is-clickable nav-file-title");
            outlineTitle.createDiv("tree-item-inner nav-file-title-content").setText(info[i].lines[j]);
            outlineTitle.addEventListener("click", (event) => __async(this, null, function* () {
              event.preventDefault();
              yield this.app.workspace.getLeaf().openFile(files[i]);
            }), false);
            break;
          }
        }
      }
    }
    if (!this.settings.getBacklinks || !this.settings.showBacklinks) {
      continue;
    }
    for (let j = 0; j < ((_d = info[i].backlinks) == null ? void 0 : _d.length); j++) {
      if (this.extractMode == true) {
        if (this.extractTask == true || !info[i].backlinks[j].basename.toLowerCase().includes(this.settings.wordsToExtract.toLowerCase())) {
          continue;
        } else {
          isExtracted = true;
        }
      }
      const outlineEl = dailyNoteChildrenEl.createDiv("tree-item nav-file");
      const outlineTitle = outlineEl.createDiv("tree-item-self is-clickable nav-file-title");
      (0, import_obsidian5.setIcon)(outlineTitle, "links-coming-in");
      outlineTitle.style.paddingLeft = "0.5em";
      outlineTitle.createDiv("tree-item-inner nav-file-title-content").setText(info[i].backlinks[j].basename);
      outlineTitle.addEventListener("click", (event) => __async(this, null, function* () {
        yield this.app.workspace.getLeaf().openFile(info[i].backlinks[j]);
        const view = this.app.workspace.getActiveViewOfType(import_obsidian5.MarkdownView);
      }), false);
      outlineTitle.addEventListener("mouseover", (event) => {
        this.app.workspace.trigger("hover-link", {
          event,
          source: DailyNoteOutlineViewType,
          hoverParent: rootEl,
          targetEl: outlineTitle,
          linktext: info[i].backlinks[j].path
        });
      });
      outlineTitle.addEventListener("contextmenu", (event) => {
        const menu = new import_obsidian5.Menu();
        menu.addItem((item) => item.setTitle("Open backlink file in new tab").setIcon("file-plus").onClick(() => __async(this, null, function* () {
          yield this.app.workspace.getLeaf("tab").openFile(info[i].backlinks[j]);
        })));
        menu.addItem((item) => item.setTitle("Open linked file to the right").setIcon("separator-vertical").onClick(() => __async(this, null, function* () {
          yield this.app.workspace.getLeaf("split").openFile(info[i].backlinks[j]);
        })));
        menu.addItem((item) => item.setTitle("Open linked file in new window").setIcon("scan").onClick(() => __async(this, null, function* () {
          yield this.app.workspace.openPopoutLeaf({ size: { width: this.settings.popoutSize.width, height: this.settings.popoutSize.height } }).openFile(info[i].backlinks[j]);
          if (this.settings.popoutAlwaysOnTop) {
            setPopoutAlwaysOnTop();
          }
        })));
        menu.showAtMouseEvent(event);
      });
    }
    if (this.collapseAll || ((_f = (_e = this.settings.fileFlag) == null ? void 0 : _e[files[i].path]) == null ? void 0 : _f.fold)) {
      dailyNoteEl.classList.add("is-collpased");
      noteCollapseIcon.classList.add("is-collapsed");
      info[i].isFolded = true;
      dailyNoteChildrenEl.style.display = "none";
    } else {
      info[i].isFolded = false;
    }
    if (this.extractMode == true && isExtracted == false) {
      dailyNoteEl.remove();
    }
  }
  this.contentEl.appendChild(containerEl);
}
function scrollToElement(line, col, app2) {
  const view = app2.workspace.getActiveViewOfType(import_obsidian5.MarkdownView);
  if (view) {
    view.editor.focus();
    view.editor.setCursor(line, col);
    view.editor.scrollIntoView({
      from: {
        line,
        ch: 0
      },
      to: {
        line,
        ch: 0
      }
    }, true);
  }
}
function setPopoutAlwaysOnTop() {
  const { remote } = require("electron");
  const activeWindow = remote.BrowserWindow.getFocusedWindow();
  activeWindow.setAlwaysOnTop(true);
}

// src/view.ts
var DailyNoteOutlineViewType = "daily-note-outline";
var DailyNoteOutlineView = class extends import_obsidian7.ItemView {
  constructor(leaf, plugin, settings) {
    super(leaf);
    this.searchRange = {
      latest: window.moment(),
      earliest: window.moment()
    };
    this.extractMode = false;
    this.extractTask = false;
    this.collapseAll = false;
    this.activeSet = 0;
    this.activeGranularity = 0;
    this.plugin = plugin;
    this.settings = settings;
  }
  getViewType() {
    return DailyNoteOutlineViewType;
  }
  getDisplayText() {
    return "Daily Note Outline";
  }
  getIcon() {
    return "calendar-clock";
  }
  onOpen() {
    return __async(this, null, function* () {
      this.initView();
      const debouncerRequestRefresh = (0, import_obsidian6.debounce)(this.autoRefresh, 2e3, true);
      this.flagRedraw = false;
      this.flagRegetAll = false;
      this.registerEvent(this.app.metadataCache.on("changed", (file) => {
        var _a;
        if ((_a = this.targetFiles) == null ? void 0 : _a.includes(file)) {
          this.flagRedraw = true;
          debouncerRequestRefresh.call(this);
        }
      }));
      this.registerEvent(this.app.vault.on("create", (file) => {
        this.flagRegetAll = true;
        debouncerRequestRefresh.call(this);
      }));
      this.registerEvent(this.app.vault.on("delete", (file) => {
        this.flagRegetAll = true;
        debouncerRequestRefresh.call(this);
      }));
    });
  }
  onClose() {
    return __async(this, null, function* () {
    });
  }
  setState(state, result) {
    var __superGet = (key) => super[key];
    return __async(this, null, function* () {
      if (state.activeSet) {
        this.activeSet = state.activeSet;
      }
      if (state.activeGranularity) {
        this.activeGranularity = state.activeGranularity;
      }
      return __superGet("setState").call(this, state, result);
    });
  }
  getState() {
    return {
      activeSet: this.activeSet,
      activeGranularity: this.activeGranularity
    };
  }
  initView() {
    return __async(this, null, function* () {
      yield this.bootDelay();
      this.collapseAll = this.settings.collapseAllAtStartup;
      this.verPN = yield this.checkPeriodicNotes();
      this.resetSearchRange();
      this.refreshView(true, true, true);
    });
  }
  bootDelay() {
    return __async(this, null, function* () {
      return new Promise((resolve) => {
        setTimeout(resolve, 300);
      });
    });
  }
  autoRefresh() {
    return __async(this, null, function* () {
      if (!(this.flagRedraw || this.flagRegetAll)) {
        return;
      }
      this.refreshView(this.flagRegetAll, this.flagRegetAll, true);
      this.flagRegetAll = false;
      this.flagRedraw = false;
    });
  }
  refreshView(flagRegetAll, flagGetTarget, flagGetOutline) {
    return __async(this, null, function* () {
      var _a;
      const startTime = performance.now();
      if (this.settings.showDebugInfo) {
        console.log("DNO:start refreshing view. CalendarSets:", this.calendarSets);
      }
      this.verPN = yield this.checkPeriodicNotes();
      if (this.verPN != 2) {
        if (flagRegetAll) {
          this.allDailyNotes = this.getAllNotes();
        }
        if (flagGetTarget) {
          this.targetFiles = getTargetFiles.call(this, this.allDailyNotes, GRANULARITY_LIST[this.activeGranularity]);
        }
        if (flagGetOutline) {
          this.fileInfo = yield getFileInfo.call(this, this.targetFiles);
          this.outlineData = yield getOutline.call(this, this.targetFiles, this.fileInfo);
        }
        drawUI.call(this);
        drawOutline.call(this, this.targetFiles, this.fileInfo, this.outlineData);
      } else {
        if (!this.calendarSets[this.activeSet]) {
          this.activeSet = 0;
        }
        if (!((_a = this.calendarSets[this.activeSet][GRANULARITY_LIST[this.activeGranularity]]) == null ? void 0 : _a.enabled)) {
          if (this.settings.showDebugInfo) {
            console.log("DNO: Calender set is not enabled. this.activeGranularity is set to 0. Calendarsets, this.activeSet, this.activeGranularity:", this.calendarSets, this.activeSet, this.activeGranularity);
          }
          this.activeGranularity = 0;
        }
        if (flagGetTarget) {
          this.targetFiles = getTargetPeriodicNotes.call(this, this.calendarSets[this.activeSet], GRANULARITY_LIST[this.activeGranularity]);
        }
        if (flagGetOutline) {
          this.fileInfo = yield getFileInfo.call(this, this.targetFiles);
          this.outlineData = yield getOutline.call(this, this.targetFiles, this.fileInfo);
        }
        drawUI.call(this);
        drawOutline.call(this, this.targetFiles, this.fileInfo, this.outlineData);
      }
      const endTime = performance.now();
      if (this.settings.showDebugInfo) {
        console.log("DNO: time required to refresh view: ", endTime - startTime);
      }
    });
  }
  stripMarkdownSymbol(text) {
    return text.replace(/(\[\[)|(\]\])/g, "");
  }
  resetSearchRange() {
    if (this.settings.initialSearchType == "forward") {
      const onsetDate = window.moment(this.settings.onset, "YYYY-MM-DD");
      if (onsetDate.isValid()) {
        this.searchRange.earliest = onsetDate;
        this.searchRange.latest = onsetDate.clone().add(this.settings.duration.day - 1, "days");
      } else {
        new import_obsidian6.Notice("onset date is invalid");
        this.searchRange.latest = window.moment().startOf("day");
        this.searchRange.earliest = window.moment().startOf("day").subtract(this.settings.duration.day - 1, "days");
      }
    }
    if (this.settings.initialSearchType == "backward") {
      this.searchRange.latest = window.moment().startOf("day");
      this.searchRange.earliest = window.moment().startOf("day").subtract(this.settings.duration.day - 1, "days");
    }
  }
  checkPeriodicNotes() {
    return __async(this, null, function* () {
      var _a, _b, _c, _d, _e, _f;
      if (this.settings.showDebugInfo) {
        console.log("DNO:checking the version of Periodic Notes plugin");
      }
      if (app.plugins.plugins["periodic-notes"]) {
        if (Number(app.plugins.plugins["periodic-notes"].manifest.version.split(".")[0]) >= 1) {
          this.calendarSets = (_a = this.app.plugins.getPlugin("periodic-notes")) == null ? void 0 : _a.calendarSetManager.getCalendarSets();
          if (this.settings.showDebugInfo) {
            console.log("return of this.app.PN.calendarSetManager.getCalendarSets(): ", (_b = this.app.plugins.getPlugin("periodic-notes")) == null ? void 0 : _b.calendarSetManager.getCalendarSets());
            console.log("return of window.app.PN.calendarSetManager.getCalendarSets(): ", (_c = window.app.plugins.getPlugin("periodic-notes")) == null ? void 0 : _c.calendarSetManager.getCalendarSets());
          }
          if (!this.calendarSets.length) {
            new import_obsidian6.Notice("failed to import calendar sets to Daily Note Outline");
          }
          const initialGranularity = this.activeGranularity;
          while (!((_d = this.calendarSets[this.activeSet][GRANULARITY_LIST[this.activeGranularity]]) == null ? void 0 : _d.enabled)) {
            this.activeGranularity = (this.activeGranularity + 1) % GRANULARITY_LIST.length;
            if (this.activeGranularity == initialGranularity) {
              break;
            }
          }
          this.app.workspace.requestSaveLayout();
          if (this.settings.showDebugInfo) {
            console.log("obtained verPN: ", this.verPN, " calendarSets: ", this.calendarSets);
          }
          return 2;
        } else {
          this.settings.calendarSetsEnabled = false;
          this.activeSet = 0;
          yield this.plugin.saveSettings();
          const initialGranularity = this.activeGranularity;
          while (!((_f = (_e = this.app.plugins.getPlugin("periodic-notes").settings) == null ? void 0 : _e[GRANULARITY_TO_PERIODICITY[GRANULARITY_LIST[this.activeGranularity]]]) == null ? void 0 : _f.enabled)) {
            this.activeGranularity = (this.activeGranularity + 1) % GRANULARITY_LIST.length;
            if (this.activeGranularity == initialGranularity) {
              break;
            }
          }
          this.app.workspace.requestSaveLayout();
          return 1;
        }
      } else {
        this.settings.periodicNotesEnabled = false;
        this.settings.calendarSetsEnabled = false;
        this.activeGranularity = 0;
        this.activeSet = 0;
        yield this.plugin.saveSettings();
        return 0;
      }
    });
  }
  getAllNotes() {
    switch (this.activeGranularity) {
      case 0:
        return (0, import_obsidian_daily_notes_interface4.getAllDailyNotes)();
      case 1:
        return (0, import_obsidian_daily_notes_interface4.getAllWeeklyNotes)();
      case 2:
        return (0, import_obsidian_daily_notes_interface4.getAllMonthlyNotes)();
      case 3:
        return (0, import_obsidian_daily_notes_interface4.getAllQuarterlyNotes)();
      case 4:
        return (0, import_obsidian_daily_notes_interface4.getAllYearlyNotes)();
    }
  }
};

// src/setting.ts
var import_obsidian8 = __toModule(require("obsidian"));
var DailyNoteOutlineSettingTab = class extends import_obsidian8.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    var _a, _b;
    let { containerEl } = this;
    containerEl.empty();
    if (!((_a = app.internalPlugins.plugins["daily-notes"]) == null ? void 0 : _a.enabled) && !app.plugins.plugins["periodic-notes"]) {
      this.containerEl.createDiv("settings-banner", (banner) => {
        banner.createEl("h3", {
          text: "Neither Daily Note plugin nor Periodic Notes community plugin is enabled"
        });
      });
    }
    this.containerEl.createEl("h4", {
      text: "Basics",
      cls: "setting-category"
    });
    new import_obsidian8.Setting(containerEl).setName("Initial search type").setDesc("search backward from today / forward from a specific date").addDropdown((dropdown) => {
      dropdown.addOption("backward", "backward").addOption("forward", "forward").setValue(this.plugin.settings.initialSearchType).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.initialSearchType = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.resetSearchRange();
        this.plugin.view.refreshView(false, true, true);
      }));
    });
    new import_obsidian8.Setting(containerEl).setName("Search duration").setDesc("number of days to search per page (default = 28)").addText((text) => {
      text.inputEl.setAttr("type", "number");
      text.setPlaceholder(String(DEFAULT_SETTINGS.duration.day)).setValue(String(this.plugin.settings.duration.day));
      text.inputEl.onblur = (e) => __async(this, null, function* () {
        let parsed = parseInt(e.target.value, 10);
        if (parsed <= 0 || parsed >= 366) {
          parsed = DEFAULT_SETTINGS.duration.day;
        }
        this.plugin.settings.duration.day = parsed;
        yield this.plugin.saveSettings();
        this.plugin.view.resetSearchRange();
        this.plugin.view.refreshView(false, true, true);
      });
    });
    new import_obsidian8.Setting(containerEl).setName("Include future daily notes").setClass("setting-indent").setDesc("in backward search, include n days of future daily notes (default = 5)").addText((text) => {
      text.inputEl.setAttr("type", "number");
      text.setPlaceholder(String(DEFAULT_SETTINGS.offset)).setValue(String(this.plugin.settings.offset));
      text.inputEl.onblur = (e) => __async(this, null, function* () {
        let inputedValue = Number(e.target.value);
        if (inputedValue < 0) {
          inputedValue = 0;
        } else if (inputedValue >= 366) {
          inputedValue = 366;
        }
        this.plugin.settings.offset = inputedValue;
        yield this.plugin.saveSettings();
        this.plugin.view.resetSearchRange();
        this.plugin.view.refreshView(false, true, true);
      });
    });
    new import_obsidian8.Setting(containerEl).setName("Onset date").setClass("setting-indent").setDesc("onset date in forward search (YYYY-MM-DD)").addText((text) => {
      text.setPlaceholder(DEFAULT_SETTINGS.onset).setValue(this.plugin.settings.onset).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.onset = value;
        yield this.plugin.saveSettings();
        this.plugin.view.resetSearchRange();
        this.plugin.view.refreshView(false, true, true);
      }));
    });
    new import_obsidian8.Setting(containerEl).setName("Show headings").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showElements.heading).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.showElements.heading = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    new import_obsidian8.Setting(containerEl).setName("Show links").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showElements.link).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.showElements.link = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    new import_obsidian8.Setting(containerEl).setName("Show tags").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showElements.tag).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.showElements.tag = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    new import_obsidian8.Setting(containerEl).setName("Show list items & tasks").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showElements.listItems).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.showElements.listItems = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    if (this.plugin.settings.showElements.listItems) {
      new import_obsidian8.Setting(containerEl).setName("Show all root list items").setDesc("if disabled, only top item of the list is displayed").setClass("setting-indent").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.allRootItems).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.allRootItems = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      new import_obsidian8.Setting(containerEl).setName("Show all tasks").setDesc("show all task items regardless of their level").setClass("setting-indent").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.allTasks).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.allTasks = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      new import_obsidian8.Setting(containerEl).setName("Task only").setDesc("if enabled, normal list items are hidden").setClass("setting-indent").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.taskOnly).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.taskOnly = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      new import_obsidian8.Setting(containerEl).setName("Hide completed tasks").setClass("setting-indent").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.hideCompletedTasks).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.hideCompletedTasks = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
    }
    new import_obsidian8.Setting(containerEl).setName("Show links in properties").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showPropertyLinks).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.showPropertyLinks = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, true, true);
      }));
    });
    new import_obsidian8.Setting(containerEl).setName("Show backlink files").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showBacklinks).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.showBacklinks = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, true, true);
      }));
    });
    new import_obsidian8.Setting(containerEl).setName("Collapse all at startup").setDesc("enable collapse all function at startup").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.collapseAllAtStartup).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.collapseAllAtStartup = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, false);
      }));
    });
    new import_obsidian8.Setting(containerEl).setName("Display file information for daily notes").setDesc("choose type of file information to display with the file name for daily notes").addDropdown((dropdown) => {
      dropdown.addOption("none", "none").addOption("lines", "lines of the note").addOption("days", "days from base date").addOption("dow", "day of the week").addOption("dowshort", "day of the week(short)").addOption("weeknumber", "week number").addOption("tag", "first tag").setValue(this.plugin.settings.displayFileInfoDaily).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.displayFileInfoDaily = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    if (this.plugin.settings.periodicNotesEnabled) {
      new import_obsidian8.Setting(containerEl).setName("Display file information for periodic notes").setDesc("choose type of file information to display for periodic notes other than daily notes").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("lines", "lines of the note").addOption("days", "distance from base date").addOption("tag", "first tag").setValue(this.plugin.settings.displayFileInfoPeriodic).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.displayFileInfoPeriodic = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
    }
    new import_obsidian8.Setting(containerEl).setName("Position of the plugin view").setDesc("Specify default position where this plugin's view appears").addDropdown((dropdown) => {
      dropdown.addOption("right", "right side pane").addOption("left", "left side pane").addOption("tab", "new tab in main pane").addOption("split", "splitted pane").addOption("popout", "popout window").setValue(this.plugin.settings.viewPosition).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.viewPosition = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    this.containerEl.createEl("h4", {
      text: "Periodic Notes",
      cls: "setting-category"
    });
    if (!app.plugins.plugins["periodic-notes"]) {
      this.containerEl.createEl("p", {
        text: "Periodic Notes community plugin is not enabled",
        cls: "setting-item-description"
      });
    } else {
      const verCheck = Number((_b = app.plugins.plugins["periodic-notes"]) == null ? void 0 : _b.manifest.version.split(".")[0]);
      if (verCheck >= 1) {
        new import_obsidian8.Setting(containerEl).setName("calendar sets").setDesc("enable calendar sets feature. You have to activate and configure the beta version of the Periodic Notes Plugin first.").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.calendarSetsEnabled).onChange((value) => __async(this, null, function* () {
            this.plugin.settings.calendarSetsEnabled = value;
            this.display();
            yield this.plugin.saveSettings();
            this.plugin.view.resetSearchRange();
            this.plugin.view.refreshView(true, true, true);
          }));
        });
      }
      new import_obsidian8.Setting(containerEl).setName("periodic notes").setDesc("enable weekly/monthly/quarterly/yearly notes. You have to activate and configure the Periodic Notes Plugin first.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.periodicNotesEnabled).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.periodicNotesEnabled = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.resetSearchRange();
          this.plugin.view.refreshView(true, true, true);
        }));
      });
      if (this.plugin.settings.periodicNotesEnabled) {
        this.containerEl.createEl("p", {
          text: "Search duration for periodic notes",
          cls: "setting-category"
        });
        new import_obsidian8.Setting(containerEl).setName("weekly notes").setClass("setting-indent").setDesc("number of weeks to search per page (default = 12)").addText((text) => {
          text.inputEl.setAttr("type", "number");
          text.setPlaceholder(String(DEFAULT_SETTINGS.duration.week)).setValue(String(this.plugin.settings.duration.week));
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            let parsed = parseInt(e.target.value, 10);
            if (parsed <= 0 || parsed >= 366) {
              parsed = DEFAULT_SETTINGS.duration.week;
            }
            this.plugin.settings.duration.week = parsed;
            yield this.plugin.saveSettings();
            this.plugin.view.resetSearchRange();
            this.plugin.view.refreshView(false, true, true);
          });
        });
        new import_obsidian8.Setting(containerEl).setName("monthly notes").setClass("setting-indent").setDesc("number of months to search per page (default = 12)").addText((text) => {
          text.inputEl.setAttr("type", "number");
          text.setPlaceholder(String(DEFAULT_SETTINGS.duration.month)).setValue(String(this.plugin.settings.duration.month));
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            let parsed = parseInt(e.target.value, 10);
            if (parsed <= 0 || parsed >= 366) {
              parsed = DEFAULT_SETTINGS.duration.month;
            }
            this.plugin.settings.duration.month = parsed;
            yield this.plugin.saveSettings();
            this.plugin.view.resetSearchRange();
            this.plugin.view.refreshView(false, true, true);
          });
        });
        new import_obsidian8.Setting(containerEl).setName("quarterly notes").setClass("setting-indent").setDesc("number of quarters to search per page (default = 8)").addText((text) => {
          text.inputEl.setAttr("type", "number");
          text.setPlaceholder(String(DEFAULT_SETTINGS.duration.quarter)).setValue(String(this.plugin.settings.duration.quarter));
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            let parsed = parseInt(e.target.value, 10);
            if (parsed <= 0 || parsed >= 366) {
              parsed = DEFAULT_SETTINGS.duration.quarter;
            }
            this.plugin.settings.duration.quarter = parsed;
            yield this.plugin.saveSettings();
            this.plugin.view.resetSearchRange();
            this.plugin.view.refreshView(false, true, true);
          });
        });
        new import_obsidian8.Setting(containerEl).setName("yearly notes").setClass("setting-indent").setDesc("number of years to search per page (default = 12)").addText((text) => {
          text.inputEl.setAttr("type", "number");
          text.setPlaceholder(String(DEFAULT_SETTINGS.duration.year)).setValue(String(this.plugin.settings.duration.year));
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            let parsed = parseInt(e.target.value, 10);
            if (parsed <= 0 || parsed >= 366) {
              parsed = DEFAULT_SETTINGS.duration.year;
            }
            this.plugin.settings.duration.year = parsed;
            yield this.plugin.saveSettings();
            this.plugin.view.resetSearchRange();
            this.plugin.view.refreshView(false, true, true);
          });
        });
      }
      new import_obsidian8.Setting(containerEl).setName("attach date range to weekly notes").setDesc("display date range next to weekly notes' name").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.attachWeeklyNotesName).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.attachWeeklyNotesName = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
    }
    this.containerEl.createEl("h4", {
      text: "Headings",
      cls: "setting-category"
    });
    if (this.plugin.settings.showElements.heading) {
      this.containerEl.createEl("p", {
        text: "Heading level to display",
        cls: "setting-item-description"
      });
      this.plugin.settings.headingLevel.forEach((value, index, arry) => {
        new import_obsidian8.Setting(containerEl).setName(`Level${index + 1}`).setClass("setting-indent").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.headingLevel[index]).onChange((value2) => __async(this, null, function* () {
            this.plugin.settings.headingLevel[index] = value2;
            this.display();
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          }));
        });
      });
    } else {
      this.containerEl.createEl("p", {
        text: "To display this section, activate 'Show headings' in Basics section.",
        cls: "setting-item-description"
      });
    }
    this.containerEl.createEl("h4", {
      text: "Preview"
    });
    new import_obsidian8.Setting(containerEl).setName("Inline preview").setDesc("Show a few subsequent words next to the outline element name").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.inlinePreview).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.inlinePreview = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    new import_obsidian8.Setting(containerEl).setName("Tooltip preview").setDesc("Show subsequent sentences as a tooltip when hover").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.tooltipPreview).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.tooltipPreview = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    if (this.plugin.settings.tooltipPreview) {
      new import_obsidian8.Setting(containerEl).setName("Tooltip preview direction").setClass("setting-indent").setDesc("specify the direction to display tooltip preview").addDropdown((dropdown) => {
        dropdown.addOption("left", "left").addOption("right", "right").addOption("bottom", "bottom").addOption("top", "top").setValue(this.plugin.settings.tooltipPreviewDirection).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.tooltipPreviewDirection = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
    }
    this.containerEl.createEl("h4", {
      text: "Popout window",
      cls: "setting-category"
    });
    this.containerEl.createEl("p", {
      text: "Popout window size",
      cls: "setting-category"
    });
    new import_obsidian8.Setting(containerEl).setName("Width").setDesc("default & min = 600").addText((text) => {
      text.inputEl.setAttr("type", "number");
      text.setPlaceholder(String(DEFAULT_SETTINGS.popoutSize.width)).setValue(String(this.plugin.settings.popoutSize.width));
      text.inputEl.onblur = (e) => __async(this, null, function* () {
        let parsed = parseInt(e.target.value, 10);
        if (parsed <= 600) {
          parsed = DEFAULT_SETTINGS.popoutSize.width;
        }
        this.plugin.settings.popoutSize.width = parsed;
        yield this.plugin.saveSettings();
      });
    });
    new import_obsidian8.Setting(containerEl).setName("Height").setDesc("default = 800 min = 600").addText((text) => {
      text.inputEl.setAttr("type", "number");
      text.setPlaceholder(String(DEFAULT_SETTINGS.popoutSize.height)).setValue(String(this.plugin.settings.popoutSize.height));
      text.inputEl.onblur = (e) => __async(this, null, function* () {
        let parsed = parseInt(e.target.value, 10);
        if (parsed <= 600) {
          parsed = DEFAULT_SETTINGS.popoutSize.height;
        }
        this.plugin.settings.popoutSize.height = parsed;
        yield this.plugin.saveSettings();
      });
    });
    new import_obsidian8.Setting(containerEl).setName("Set popout window always on top").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.popoutAlwaysOnTop).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.popoutAlwaysOnTop = value;
        this.display();
        yield this.plugin.saveSettings();
      }));
    });
    this.containerEl.createEl("h4", {
      text: "Simple filter",
      cls: "setting-category"
    });
    if (this.plugin.settings.showElements.heading) {
      new import_obsidian8.Setting(containerEl).setName("Headings to ignore").setDesc("Headings which include listed words will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToIgnore.heading.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToIgnore.heading = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.link) {
      new import_obsidian8.Setting(containerEl).setName("Links to ignore").setDesc("Links which include listed words will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToIgnore.link.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToIgnore.link = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.tag) {
      new import_obsidian8.Setting(containerEl).setName("Tags to ignore").setDesc("tags which include listed words will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToIgnore.tag.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToIgnore.tag = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.listItems) {
      new import_obsidian8.Setting(containerEl).setName("List items to ignore").setDesc("List items which include listed words will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToIgnore.listItems.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToIgnore.listItems = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    this.containerEl.createEl("h4", {
      text: "Include",
      cls: "setting-category"
    });
    this.containerEl.createEl("p", {
      text: "If you specify one outline element type and words to include, only elements which belong to the included elements are displayed.",
      cls: "setting-item-description"
    });
    this.containerEl.createEl("p", {
      text: "**NOTE**: If Include filter is set incorrectly, a number of outlines may not be displayed. In such a case, try setting 'Element type for include' to 'no Include filter'.",
      cls: "setting-item-description"
    });
    new import_obsidian8.Setting(containerEl).setName("Element type for include").addDropdown((dropdown) => {
      dropdown.addOption("none", "no Include filter").addOption("heading", "heading").addOption("link", "link").addOption("tag", "tag").addOption("listItems", "listItems").setValue(this.plugin.settings.includeOnly).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.includeOnly = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    if (this.plugin.settings.includeOnly != "none") {
      new import_obsidian8.Setting(containerEl).setName("Words to include").setClass("setting-indent").setDesc("Only elements specified in 'Element type for include' which include listed words will be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToInclude.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToInclude = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      new import_obsidian8.Setting(containerEl).setName("Include the beginning part").setClass("setting-indent").setDesc("Specify whether to include the beginning parts of each daily note with no element to include ").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.includeBeginning).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.includeBeginning = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
    }
    this.containerEl.createEl("h4", {
      text: "Exclude",
      cls: "setting-category"
    });
    this.containerEl.createEl("p", {
      text: "Specified outline elements and elements belonging to that element will not be displayed.",
      cls: "setting-item-description"
    });
    new import_obsidian8.Setting(containerEl).setName("Exclusion ends at").setDesc("Excluding elements specified below ends at the selected type of elements. If you specified 'Element type for include' above, this value is ignored and excludeing elements ends at that type of elements.").addDropdown((dropdown) => {
      dropdown.addOption("none", "none").addOption("heading", "heading").addOption("link", "link").addOption("tag", "tag").addOption("listItems", "listItems").setValue(this.plugin.settings.primeElement).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.primeElement = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    if (this.plugin.settings.showElements.heading) {
      new import_obsidian8.Setting(containerEl).setName("Headings to exclude").setDesc("Headings which include listed words and elements which belong to them will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToExclude.heading.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToExclude.heading = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.link) {
      new import_obsidian8.Setting(containerEl).setName("Links to exclude").setDesc("Links which include listed words and elements which belong to them will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToExclude.link.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToExclude.link = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.tag) {
      new import_obsidian8.Setting(containerEl).setName("Tags to exclude").setDesc("tags which include listed words and elements which belong to them will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToExclude.tag.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToExclude.tag = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.listItems) {
      new import_obsidian8.Setting(containerEl).setName("List items to exclude").setDesc("List items which include listed words and elements which belong to them will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToExclude.listItems.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToExclude.listItems = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    this.containerEl.createEl("h4", {
      text: "Appearance",
      cls: "setting-category"
    });
    new import_obsidian8.Setting(containerEl).setName("Indent other than headings").setDesc("Whether other elements should be indented to preceding headings").addDropdown((dropdown) => {
      dropdown.addOption("0", "none").addOption("1", "follow preceding heading").addOption("2", "preceding heading + 1").setValue(String(this.plugin.settings.indentFollowHeading)).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.indentFollowHeading = Number(value);
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    new import_obsidian8.Setting(containerEl).setName("Note title background color").setDesc("No change: use the current CSS theme setting values. Accent: highlight file names. Custom: Specify any color code. Please update the view when you toggled Obsidian's base theme(light/dark). (default = no change)").addDropdown((dropdown) => {
      dropdown.addOption("none", "no change").addOption("accent", "accent").addOption("custom", "custom").setValue(this.plugin.settings.noteTitleBackgroundColor).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.noteTitleBackgroundColor = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    if (this.plugin.settings.noteTitleBackgroundColor == "custom") {
      new import_obsidian8.Setting(containerEl).setName("Custom note title background color (light)").setClass("setting-indent").setDesc("Specify background color (ex. #FFFFFF or rgb(255,255,255))").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setValue(this.plugin.settings.customNoteTitleBackgroundColor.custom.light);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.customNoteTitleBackgroundColor.custom.light = inputedValue;
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      new import_obsidian8.Setting(containerEl).setName("Custom note title background color (light, on hover)").setClass("setting-indent").setDesc("Specify background color on hover (ex. #FFFFFF or rgb(255,255,255))").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setValue(this.plugin.settings.customNoteTitleBackgroundColorHover.custom.light);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.customNoteTitleBackgroundColorHover.custom.light = inputedValue;
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      new import_obsidian8.Setting(containerEl).setName("Custom note title background color (dark)").setClass("setting-indent").setDesc("Specify background color (ex. #FFFFFF or rgb(255,255,255))").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setValue(this.plugin.settings.customNoteTitleBackgroundColor.custom.dark);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.customNoteTitleBackgroundColor.custom.dark = inputedValue;
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      new import_obsidian8.Setting(containerEl).setName("Custom note title background color (dark, on hover)").setClass("setting-indent").setDesc("Specify background color on hover (ex. #FFFFFF or rgb(255,255,255))").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setValue(this.plugin.settings.customNoteTitleBackgroundColorHover.custom.dark);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.customNoteTitleBackgroundColorHover.custom.dark = inputedValue;
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.heading) {
      this.containerEl.createEl("p", {
        text: "Headings",
        cls: "setting-category"
      });
      new import_obsidian8.Setting(containerEl).setName("Icon").setClass("setting-indent").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("hash", "hash").addOption("chevron-right", "chevron-right").addOption("custom", "custom").setValue(this.plugin.settings.icon.heading).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.icon.heading = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      if (this.plugin.settings.icon.heading == "custom") {
        new import_obsidian8.Setting(containerEl).setName("Custom icon").setClass("setting-indent-2").setDesc("enter Lucide Icon name").addText((text) => {
          text.inputEl.setAttr("type", "string");
          text.setPlaceholder(DEFAULT_SETTINGS.customIcon.heading).setValue(this.plugin.settings.customIcon.heading);
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            const inputedValue = e.target.value;
            this.plugin.settings.customIcon.heading = inputedValue;
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          });
        });
      }
      new import_obsidian8.Setting(containerEl).setName("Prefix").setClass("setting-indent").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setPlaceholder(DEFAULT_SETTINGS.prefix.heading).setValue(this.plugin.settings.prefix.heading);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.prefix.heading = inputedValue;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      if (this.plugin.settings.prefix.heading != "") {
        new import_obsidian8.Setting(containerEl).setName("Repeat heading prefix").setClass("setting-indent-2").addDropdown((dropdown) => {
          dropdown.addOption("none", "none").addOption("level", "as many times as its level").addOption("levelminus1", "level - 1").setValue(this.plugin.settings.repeatHeadingPrefix).onChange((value) => __async(this, null, function* () {
            this.plugin.settings.repeatHeadingPrefix = value;
            this.display();
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          }));
        });
      }
      new import_obsidian8.Setting(containerEl).setName("Add indent").setClass("setting-indent").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.indent.heading).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.indent.heading = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
    }
    if (this.plugin.settings.showElements.link) {
      this.containerEl.createEl("p", {
        text: "Links",
        cls: "setting-category"
      });
      new import_obsidian8.Setting(containerEl).setName("Icon").setClass("setting-indent").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("link", "link").addOption("link-2", "link-2").addOption("custom", "custom").setValue(this.plugin.settings.icon.link).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.icon.link = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      if (this.plugin.settings.icon.link == "custom") {
        new import_obsidian8.Setting(containerEl).setName("Custom icon").setClass("setting-indent-2").setDesc("enter Lucide Icon name").addText((text) => {
          text.inputEl.setAttr("type", "string");
          text.setPlaceholder(DEFAULT_SETTINGS.customIcon.link).setValue(this.plugin.settings.customIcon.link);
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            const inputedValue = e.target.value;
            this.plugin.settings.customIcon.link = inputedValue;
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          });
        });
      }
      new import_obsidian8.Setting(containerEl).setName("Prefix").setClass("setting-indent").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setPlaceholder(DEFAULT_SETTINGS.prefix.link).setValue(this.plugin.settings.prefix.link);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.prefix.link = inputedValue;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.tag) {
      this.containerEl.createEl("p", {
        text: "Tags",
        cls: "setting-category"
      });
      new import_obsidian8.Setting(containerEl).setName("Icon").setClass("setting-indent").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("tag", "tag").addOption("hash", "hash").addOption("custom", "custom").setValue(this.plugin.settings.icon.tag).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.icon.tag = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      if (this.plugin.settings.icon.tag == "custom") {
        new import_obsidian8.Setting(containerEl).setName("Custom icon").setClass("setting-indent-2").setDesc("enter Lucide Icon name").addText((text) => {
          text.inputEl.setAttr("type", "string");
          text.setPlaceholder(DEFAULT_SETTINGS.customIcon.tag).setValue(this.plugin.settings.customIcon.tag);
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            const inputedValue = e.target.value;
            this.plugin.settings.customIcon.tag = inputedValue;
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          });
        });
      }
      new import_obsidian8.Setting(containerEl).setName("Prefix").setClass("setting-indent").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setPlaceholder(DEFAULT_SETTINGS.prefix.tag).setValue(this.plugin.settings.prefix.tag);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.prefix.tag = inputedValue;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.link) {
      this.containerEl.createEl("p", {
        text: "List items",
        cls: "setting-category"
      });
      new import_obsidian8.Setting(containerEl).setName("Icon").setClass("setting-indent").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("list", "list").addOption("chevron-right", "chevron-right").addOption("minus", "minus").addOption("circle-dot", "circle-dot").addOption("asterisk", "asterisk").addOption("custom", "custom").setValue(this.plugin.settings.icon.listItems).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.icon.listItems = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      if (this.plugin.settings.icon.listItems == "custom") {
        new import_obsidian8.Setting(containerEl).setName("Custom icon").setClass("setting-indent-2").setDesc("enter Lucide Icon name").addText((text) => {
          text.inputEl.setAttr("type", "string");
          text.setPlaceholder(DEFAULT_SETTINGS.customIcon.listItems).setValue(this.plugin.settings.customIcon.listItems);
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            const inputedValue = e.target.value;
            this.plugin.settings.customIcon.listItems = inputedValue;
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          });
        });
      }
      new import_obsidian8.Setting(containerEl).setName("Prefix").setClass("setting-indent").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setPlaceholder(DEFAULT_SETTINGS.prefix.listItems).setValue(this.plugin.settings.prefix.listItems);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.prefix.listItems = inputedValue;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      this.containerEl.createEl("p", {
        text: "Tasks",
        cls: "setting-category"
      });
      new import_obsidian8.Setting(containerEl).setName("Icon").setClass("setting-indent").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("square", "square").addOption("circle", "circle").addOption("list-checks", "list-checks").addOption("custom", "custom").setValue(this.plugin.settings.icon.task).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.icon.task = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      if (this.plugin.settings.icon.task == "custom") {
        new import_obsidian8.Setting(containerEl).setName("Custom icon").setClass("setting-indent-2").setDesc("enter Lucide Icon name").addText((text) => {
          text.inputEl.setAttr("type", "string");
          text.setPlaceholder(DEFAULT_SETTINGS.customIcon.task).setValue(this.plugin.settings.customIcon.task);
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            const inputedValue = e.target.value;
            this.plugin.settings.customIcon.task = inputedValue;
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          });
        });
      }
      new import_obsidian8.Setting(containerEl).setName("Prefix").setClass("setting-indent").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setPlaceholder(DEFAULT_SETTINGS.prefix.task).setValue(this.plugin.settings.prefix.task);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.prefix.task = inputedValue;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      new import_obsidian8.Setting(containerEl).setName("Add checkbox text to prefix").setDesc("add [ ] or [x]").setClass("setting-indent").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.addCheckboxText).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.addCheckboxText = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      this.containerEl.createEl("p", {
        text: "Completed tasks",
        cls: "setting-category"
      });
      new import_obsidian8.Setting(containerEl).setName("Icon").setClass("setting-indent").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("check-square", "check-square").addOption("check-circle", "check-circle").addOption("check", "check").addOption("custom", "custom").setValue(this.plugin.settings.icon.taskDone).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.icon.taskDone = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      if (this.plugin.settings.icon.taskDone == "custom") {
        new import_obsidian8.Setting(containerEl).setName("Custom icon").setClass("setting-indent-2").setDesc("enter Lucide Icon name").addText((text) => {
          text.inputEl.setAttr("type", "string");
          text.setPlaceholder(DEFAULT_SETTINGS.customIcon.taskDone).setValue(this.plugin.settings.customIcon.taskDone);
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            const inputedValue = e.target.value;
            this.plugin.settings.customIcon.taskDone = inputedValue;
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          });
        });
      }
      new import_obsidian8.Setting(containerEl).setName("Prefix").setClass("setting-indent").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setPlaceholder(DEFAULT_SETTINGS.prefix.taskDone).setValue(this.plugin.settings.prefix.taskDone);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.prefix.taskDone = inputedValue;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    this.containerEl.createEl("h4", {
      text: "Others",
      cls: "setting-category"
    });
    new import_obsidian8.Setting(containerEl).setName("Show only .md files").setDesc("Turn on if non-md files are displayed in the view").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.markdownOnly).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.markdownOnly = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    new import_obsidian8.Setting(containerEl).setName("Show only exactly matched files").setDesc("Turn on if you do not want to see files that do not exactly match the format").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.exactMatchOnly).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.exactMatchOnly = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    this.containerEl.createEl("h4", {
      text: "Debug",
      cls: "setting-category"
    });
    new import_obsidian8.Setting(containerEl).setName("show debug information").setDesc("display debug information in the console").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showDebugInfo).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.showDebugInfo = value;
        this.display();
        yield this.plugin.saveSettings();
      }));
    });
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  initialSearchType: "backward",
  offset: 7,
  onset: "2020-03-30",
  duration: {
    day: 28,
    week: 12,
    month: 12,
    quarter: 8,
    year: 3
  },
  showElements: {
    heading: true,
    link: true,
    tag: true,
    listItems: true
  },
  headingLevel: [true, true, true, false, false, false],
  allRootItems: false,
  allTasks: true,
  taskOnly: false,
  hideCompletedTasks: false,
  displayFileInfo: "lines",
  displayFileInfoDaily: "lines",
  displayFileInfoPeriodic: "lines",
  viewPosition: "right",
  markdownOnly: true,
  exactMatchOnly: false,
  wordsToIgnore: {
    heading: [],
    link: [],
    tag: [],
    listItems: []
  },
  inlinePreview: true,
  tooltipPreview: true,
  tooltipPreviewDirection: "left",
  includeOnly: "none",
  wordsToInclude: [],
  includeBeginning: true,
  primeElement: "none",
  wordsToExclude: {
    heading: [],
    link: [],
    tag: [],
    listItems: []
  },
  wordsToExtract: "",
  icon: {
    heading: "none",
    link: "link",
    tag: "tag",
    listItems: "list",
    note: "file",
    task: "square",
    taskDone: "check-square"
  },
  customIcon: {
    heading: "hash",
    link: "link",
    tag: "tag",
    listItems: "list",
    note: "file",
    task: "square",
    taskDone: "check-square"
  },
  indent: {
    heading: true,
    link: true,
    listItems: true
  },
  indentFollowHeading: 0,
  prefix: {
    heading: "",
    link: "",
    tag: "",
    listItems: "",
    task: "",
    taskDone: ""
  },
  repeatHeadingPrefix: "none",
  addCheckboxText: false,
  periodicNotesEnabled: true,
  calendarSetsEnabled: true,
  attachWeeklyNotesName: true,
  showDebugInfo: false,
  noteTitleBackgroundColor: "none",
  customNoteTitleBackgroundColor: {
    accent: {
      light: "#E3E3E3",
      dark: "#363636"
    },
    custom: {
      light: "#BEBEBE",
      dark: "#4E4E4E"
    }
  },
  customNoteTitleBackgroundColorHover: {
    accent: {
      light: "#D3D3D3",
      dark: "#464646"
    },
    custom: {
      light: "#AEAEAE",
      dark: "#5E5E5E"
    }
  },
  fileFlag: {},
  taskIcon: {
    incomplete: { symbol: "/", icon: "columns" },
    canceled: { symbol: "-", icon: "minus-square" },
    fowarded: { symbol: ">", icon: "send" },
    scheduling: { symbol: "<", icon: "calendar" },
    question: { symbol: "?", icon: "help-circle" },
    important: { symbol: "!", icon: "alert-triangle" },
    star: { symbol: "*", icon: "star" },
    quote: { symbol: '"', icon: "quote" },
    location: { symbol: "l", icon: "map-pin" },
    bookmark: { symbol: "b", icon: "bookmark" },
    information: { symbol: "i", icon: "info" },
    savings: { symbol: "S", icon: "dollar-sign" },
    idea: { symbol: "I", icon: "siren" },
    pros: { symbol: "p", icon: "thumbs-up" },
    cons: { symbol: "c", icon: "thumbs-down" },
    fire: { symbol: "f", icon: "flame" },
    key: { symbol: "k", icon: "key" },
    win: { symbol: "w", icon: "cake" },
    up: { symbol: "u", icon: "trending-up" },
    down: { symbol: "d", icon: "trending-down" }
  },
  collapseAllAtStartup: false,
  showBacklinks: false,
  showPropertyLinks: true,
  popoutSize: {
    width: 600,
    height: 800
  },
  popoutAlwaysOnTop: false
};
var DAYS_PER_UNIT = {
  day: 1,
  week: 7,
  month: 30,
  quarter: 90,
  year: 365
};
var GRANULARITY_LIST = ["day", "week", "month", "quarter", "year"];
var GRANULARITY_TO_PERIODICITY = {
  day: "daily",
  week: "weekly",
  month: "monthly",
  quarter: "quarterly",
  year: "yearly"
};
var FILEINFO_TO_DISPLAY = {
  none: "none",
  lines: "num of lines",
  days: "distance",
  tag: "first tag"
};
var FILEINFO_TO_DISPLAY_DAY = {
  none: "none",
  lines: "num of lines",
  days: "distance",
  tag: "first tag",
  dow: "day of week",
  dowshort: "day of week(short)",
  weeknumber: "week number"
};
var DailyNoteOutlinePlugin3 = class extends import_obsidian9.Plugin {
  constructor() {
    super(...arguments);
    this.checkView = (activateView) => __async(this, null, function* () {
      let [leaf] = this.app.workspace.getLeavesOfType(DailyNoteOutlineViewType);
      if (!leaf) {
        switch (this.settings.viewPosition) {
          case "right":
            leaf = this.app.workspace.getRightLeaf(false);
            break;
          case "left":
            leaf = this.app.workspace.getLeftLeaf(false);
            break;
          case "tab":
            leaf = this.app.workspace.getLeaf("tab");
            break;
          case "split":
            leaf = this.app.workspace.getLeaf("split");
            break;
          case "popout":
            leaf = this.app.workspace.getLeaf("window");
            break;
        }
        yield leaf.setViewState({ type: DailyNoteOutlineViewType });
      }
      if (activateView) {
        this.app.workspace.revealLeaf(leaf);
      }
    });
  }
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      this.registerView(DailyNoteOutlineViewType, (leaf) => this.view = new DailyNoteOutlineView(leaf, this, this.settings));
      this.addCommand({
        id: "daily-note-outline-open",
        name: "Open Outline",
        callback: () => __async(this, null, function* () {
          this.checkView(true);
        })
      });
      this.app.workspace.onLayoutReady(() => __async(this, null, function* () {
        this.checkView(false);
      }));
      this.addSettingTab(new DailyNoteOutlineSettingTab(this.app, this));
    });
  }
  onunload() {
    this.app.workspace.detachLeavesOfType(DailyNoteOutlineViewType);
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
      if (typeof this.settings.duration === "number") {
        this.settings.duration = DEFAULT_SETTINGS.duration;
      }
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL29ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZmFjZS9kaXN0L21haW4uanMiLCAic3JjL21haW4udHMiLCAic3JjL3ZpZXcudHMiLCAic3JjL2RyYXdVSS50cyIsICJzcmMvY3JlYXRlQW5kT3BlbkRhaWx5Tm90ZS50cyIsICJzcmMvbW9kYWxFeHRyYWN0LnRzIiwgInNyYy9jcmVhdGVBbmRPcGVuUGVyaW9kaWNOb3RlLnRzIiwgInNyYy9nZXRUYXJnZXRGaWxlcy50cyIsICJzcmMvZ2V0T3V0bGluZS50cyIsICJzcmMvY29uc3RydWN0RE9NLnRzIiwgInNyYy91dGlsLnRzIiwgInNyYy9zZXR0aW5nLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbnZhciBvYnNpZGlhbiA9IHJlcXVpcmUoJ29ic2lkaWFuJyk7XG5cbmNvbnN0IERFRkFVTFRfREFJTFlfTk9URV9GT1JNQVQgPSBcIllZWVktTU0tRERcIjtcbmNvbnN0IERFRkFVTFRfV0VFS0xZX05PVEVfRk9STUFUID0gXCJnZ2dnLVtXXXd3XCI7XG5jb25zdCBERUZBVUxUX01PTlRITFlfTk9URV9GT1JNQVQgPSBcIllZWVktTU1cIjtcbmNvbnN0IERFRkFVTFRfUVVBUlRFUkxZX05PVEVfRk9STUFUID0gXCJZWVlZLVtRXVFcIjtcbmNvbnN0IERFRkFVTFRfWUVBUkxZX05PVEVfRk9STUFUID0gXCJZWVlZXCI7XG5cbmZ1bmN0aW9uIHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhwZXJpb2RpY2l0eSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGVyaW9kaWNOb3RlcyA9IHdpbmRvdy5hcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKTtcbiAgICByZXR1cm4gcGVyaW9kaWNOb3RlcyAmJiBwZXJpb2RpY05vdGVzLnNldHRpbmdzPy5bcGVyaW9kaWNpdHldPy5lbmFibGVkO1xufVxuLyoqXG4gKiBSZWFkIHRoZSB1c2VyIHNldHRpbmdzIGZvciB0aGUgYGRhaWx5LW5vdGVzYCBwbHVnaW5cbiAqIHRvIGtlZXAgYmVoYXZpb3Igb2YgY3JlYXRpbmcgYSBuZXcgbm90ZSBpbi1zeW5jLlxuICovXG5mdW5jdGlvbiBnZXREYWlseU5vdGVTZXR0aW5ncygpIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCB7IGludGVybmFsUGx1Z2lucywgcGx1Z2lucyB9ID0gd2luZG93LmFwcDtcbiAgICAgICAgaWYgKHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhcImRhaWx5XCIpKSB7XG4gICAgICAgICAgICBjb25zdCB7IGZvcm1hdCwgZm9sZGVyLCB0ZW1wbGF0ZSB9ID0gcGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKT8uc2V0dGluZ3M/LmRhaWx5IHx8IHt9O1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IGZvcm1hdCB8fCBERUZBVUxUX0RBSUxZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgICAgIGZvbGRlcjogZm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGZvbGRlciwgZm9ybWF0LCB0ZW1wbGF0ZSB9ID0gaW50ZXJuYWxQbHVnaW5zLmdldFBsdWdpbkJ5SWQoXCJkYWlseS1ub3Rlc1wiKT8uaW5zdGFuY2U/Lm9wdGlvbnMgfHwge307XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmb3JtYXQ6IGZvcm1hdCB8fCBERUZBVUxUX0RBSUxZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgZm9sZGVyOiBmb2xkZXI/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXBsYXRlPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmluZm8oXCJObyBjdXN0b20gZGFpbHkgbm90ZSBzZXR0aW5ncyBmb3VuZCFcIiwgZXJyKTtcbiAgICB9XG59XG4vKipcbiAqIFJlYWQgdGhlIHVzZXIgc2V0dGluZ3MgZm9yIHRoZSBgd2Vla2x5LW5vdGVzYCBwbHVnaW5cbiAqIHRvIGtlZXAgYmVoYXZpb3Igb2YgY3JlYXRpbmcgYSBuZXcgbm90ZSBpbi1zeW5jLlxuICovXG5mdW5jdGlvbiBnZXRXZWVrbHlOb3RlU2V0dGluZ3MoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgcGx1Z2luTWFuYWdlciA9IHdpbmRvdy5hcHAucGx1Z2lucztcbiAgICAgICAgY29uc3QgY2FsZW5kYXJTZXR0aW5ncyA9IHBsdWdpbk1hbmFnZXIuZ2V0UGx1Z2luKFwiY2FsZW5kYXJcIik/Lm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHBlcmlvZGljTm90ZXNTZXR0aW5ncyA9IHBsdWdpbk1hbmFnZXIuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik/LnNldHRpbmdzPy53ZWVrbHk7XG4gICAgICAgIGlmIChzaG91bGRVc2VQZXJpb2RpY05vdGVzU2V0dGluZ3MoXCJ3ZWVrbHlcIikpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiBwZXJpb2RpY05vdGVzU2V0dGluZ3MuZm9ybWF0IHx8IERFRkFVTFRfV0VFS0xZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgICAgIGZvbGRlcjogcGVyaW9kaWNOb3Rlc1NldHRpbmdzLmZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IHBlcmlvZGljTm90ZXNTZXR0aW5ncy50ZW1wbGF0ZT8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gY2FsZW5kYXJTZXR0aW5ncyB8fCB7fTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZvcm1hdDogc2V0dGluZ3Mud2Vla2x5Tm90ZUZvcm1hdCB8fCBERUZBVUxUX1dFRUtMWV9OT1RFX0ZPUk1BVCxcbiAgICAgICAgICAgIGZvbGRlcjogc2V0dGluZ3Mud2Vla2x5Tm90ZUZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogc2V0dGluZ3Mud2Vla2x5Tm90ZVRlbXBsYXRlPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmluZm8oXCJObyBjdXN0b20gd2Vla2x5IG5vdGUgc2V0dGluZ3MgZm91bmQhXCIsIGVycik7XG4gICAgfVxufVxuLyoqXG4gKiBSZWFkIHRoZSB1c2VyIHNldHRpbmdzIGZvciB0aGUgYHBlcmlvZGljLW5vdGVzYCBwbHVnaW5cbiAqIHRvIGtlZXAgYmVoYXZpb3Igb2YgY3JlYXRpbmcgYSBuZXcgbm90ZSBpbi1zeW5jLlxuICovXG5mdW5jdGlvbiBnZXRNb250aGx5Tm90ZVNldHRpbmdzKCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGx1Z2luTWFuYWdlciA9IHdpbmRvdy5hcHAucGx1Z2lucztcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IChzaG91bGRVc2VQZXJpb2RpY05vdGVzU2V0dGluZ3MoXCJtb250aGx5XCIpICYmXG4gICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpPy5zZXR0aW5ncz8ubW9udGhseSkgfHxcbiAgICAgICAgICAgIHt9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZm9ybWF0OiBzZXR0aW5ncy5mb3JtYXQgfHwgREVGQVVMVF9NT05USExZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgZm9sZGVyOiBzZXR0aW5ncy5mb2xkZXI/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHNldHRpbmdzLnRlbXBsYXRlPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmluZm8oXCJObyBjdXN0b20gbW9udGhseSBub3RlIHNldHRpbmdzIGZvdW5kIVwiLCBlcnIpO1xuICAgIH1cbn1cbi8qKlxuICogUmVhZCB0aGUgdXNlciBzZXR0aW5ncyBmb3IgdGhlIGBwZXJpb2RpYy1ub3Rlc2AgcGx1Z2luXG4gKiB0byBrZWVwIGJlaGF2aW9yIG9mIGNyZWF0aW5nIGEgbmV3IG5vdGUgaW4tc3luYy5cbiAqL1xuZnVuY3Rpb24gZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzKCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGx1Z2luTWFuYWdlciA9IHdpbmRvdy5hcHAucGx1Z2lucztcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IChzaG91bGRVc2VQZXJpb2RpY05vdGVzU2V0dGluZ3MoXCJxdWFydGVybHlcIikgJiZcbiAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik/LnNldHRpbmdzPy5xdWFydGVybHkpIHx8XG4gICAgICAgICAgICB7fTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZvcm1hdDogc2V0dGluZ3MuZm9ybWF0IHx8IERFRkFVTFRfUVVBUlRFUkxZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgZm9sZGVyOiBzZXR0aW5ncy5mb2xkZXI/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHNldHRpbmdzLnRlbXBsYXRlPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmluZm8oXCJObyBjdXN0b20gcXVhcnRlcmx5IG5vdGUgc2V0dGluZ3MgZm91bmQhXCIsIGVycik7XG4gICAgfVxufVxuLyoqXG4gKiBSZWFkIHRoZSB1c2VyIHNldHRpbmdzIGZvciB0aGUgYHBlcmlvZGljLW5vdGVzYCBwbHVnaW5cbiAqIHRvIGtlZXAgYmVoYXZpb3Igb2YgY3JlYXRpbmcgYSBuZXcgbm90ZSBpbi1zeW5jLlxuICovXG5mdW5jdGlvbiBnZXRZZWFybHlOb3RlU2V0dGluZ3MoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwbHVnaW5NYW5hZ2VyID0gd2luZG93LmFwcC5wbHVnaW5zO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gKHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhcInllYXJseVwiKSAmJlxuICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKT8uc2V0dGluZ3M/LnllYXJseSkgfHxcbiAgICAgICAgICAgIHt9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZm9ybWF0OiBzZXR0aW5ncy5mb3JtYXQgfHwgREVGQVVMVF9ZRUFSTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICBmb2xkZXI6IHNldHRpbmdzLmZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogc2V0dGluZ3MudGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSB5ZWFybHkgbm90ZSBzZXR0aW5ncyBmb3VuZCFcIiwgZXJyKTtcbiAgICB9XG59XG5cbi8vIENyZWRpdDogQGNyZWF0aW9uaXgvcGF0aC5qc1xuZnVuY3Rpb24gam9pbiguLi5wYXJ0U2VnbWVudHMpIHtcbiAgICAvLyBTcGxpdCB0aGUgaW5wdXRzIGludG8gYSBsaXN0IG9mIHBhdGggY29tbWFuZHMuXG4gICAgbGV0IHBhcnRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSBwYXJ0U2VnbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHBhcnRzID0gcGFydHMuY29uY2F0KHBhcnRTZWdtZW50c1tpXS5zcGxpdChcIi9cIikpO1xuICAgIH1cbiAgICAvLyBJbnRlcnByZXQgdGhlIHBhdGggY29tbWFuZHMgdG8gZ2V0IHRoZSBuZXcgcmVzb2x2ZWQgcGF0aC5cbiAgICBjb25zdCBuZXdQYXJ0cyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwLCBsID0gcGFydHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHBhcnQgPSBwYXJ0c1tpXTtcbiAgICAgICAgLy8gUmVtb3ZlIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoZXNcbiAgICAgICAgLy8gQWxzbyByZW1vdmUgXCIuXCIgc2VnbWVudHNcbiAgICAgICAgaWYgKCFwYXJ0IHx8IHBhcnQgPT09IFwiLlwiKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIC8vIFB1c2ggbmV3IHBhdGggc2VnbWVudHMuXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIG5ld1BhcnRzLnB1c2gocGFydCk7XG4gICAgfVxuICAgIC8vIFByZXNlcnZlIHRoZSBpbml0aWFsIHNsYXNoIGlmIHRoZXJlIHdhcyBvbmUuXG4gICAgaWYgKHBhcnRzWzBdID09PSBcIlwiKVxuICAgICAgICBuZXdQYXJ0cy51bnNoaWZ0KFwiXCIpO1xuICAgIC8vIFR1cm4gYmFjayBpbnRvIGEgc2luZ2xlIHN0cmluZyBwYXRoLlxuICAgIHJldHVybiBuZXdQYXJ0cy5qb2luKFwiL1wiKTtcbn1cbmZ1bmN0aW9uIGJhc2VuYW1lKGZ1bGxQYXRoKSB7XG4gICAgbGV0IGJhc2UgPSBmdWxsUGF0aC5zdWJzdHJpbmcoZnVsbFBhdGgubGFzdEluZGV4T2YoXCIvXCIpICsgMSk7XG4gICAgaWYgKGJhc2UubGFzdEluZGV4T2YoXCIuXCIpICE9IC0xKVxuICAgICAgICBiYXNlID0gYmFzZS5zdWJzdHJpbmcoMCwgYmFzZS5sYXN0SW5kZXhPZihcIi5cIikpO1xuICAgIHJldHVybiBiYXNlO1xufVxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlRm9sZGVyRXhpc3RzKHBhdGgpIHtcbiAgICBjb25zdCBkaXJzID0gcGF0aC5yZXBsYWNlKC9cXFxcL2csIFwiL1wiKS5zcGxpdChcIi9cIik7XG4gICAgZGlycy5wb3AoKTsgLy8gcmVtb3ZlIGJhc2VuYW1lXG4gICAgaWYgKGRpcnMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGRpciA9IGpvaW4oLi4uZGlycyk7XG4gICAgICAgIGlmICghd2luZG93LmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZGlyKSkge1xuICAgICAgICAgICAgYXdhaXQgd2luZG93LmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZGlyKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIGdldE5vdGVQYXRoKGRpcmVjdG9yeSwgZmlsZW5hbWUpIHtcbiAgICBpZiAoIWZpbGVuYW1lLmVuZHNXaXRoKFwiLm1kXCIpKSB7XG4gICAgICAgIGZpbGVuYW1lICs9IFwiLm1kXCI7XG4gICAgfVxuICAgIGNvbnN0IHBhdGggPSBvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGpvaW4oZGlyZWN0b3J5LCBmaWxlbmFtZSkpO1xuICAgIGF3YWl0IGVuc3VyZUZvbGRlckV4aXN0cyhwYXRoKTtcbiAgICByZXR1cm4gcGF0aDtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdldFRlbXBsYXRlSW5mbyh0ZW1wbGF0ZSkge1xuICAgIGNvbnN0IHsgbWV0YWRhdGFDYWNoZSwgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgdGVtcGxhdGVQYXRoID0gb2JzaWRpYW4ubm9ybWFsaXplUGF0aCh0ZW1wbGF0ZSk7XG4gICAgaWYgKHRlbXBsYXRlUGF0aCA9PT0gXCIvXCIpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXCJcIiwgbnVsbF0pO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZUZpbGUgPSBtZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHRlbXBsYXRlUGF0aCwgXCJcIik7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRzID0gYXdhaXQgdmF1bHQuY2FjaGVkUmVhZCh0ZW1wbGF0ZUZpbGUpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCBJRm9sZEluZm8gPSB3aW5kb3cuYXBwLmZvbGRNYW5hZ2VyLmxvYWQodGVtcGxhdGVGaWxlKTtcbiAgICAgICAgcmV0dXJuIFtjb250ZW50cywgSUZvbGRJbmZvXTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcmVhZCB0aGUgZGFpbHkgbm90ZSB0ZW1wbGF0ZSAnJHt0ZW1wbGF0ZVBhdGh9J2AsIGVycik7XG4gICAgICAgIG5ldyBvYnNpZGlhbi5Ob3RpY2UoXCJGYWlsZWQgdG8gcmVhZCB0aGUgZGFpbHkgbm90ZSB0ZW1wbGF0ZVwiKTtcbiAgICAgICAgcmV0dXJuIFtcIlwiLCBudWxsXTtcbiAgICB9XG59XG5cbi8qKlxuICogZGF0ZVVJRCBpcyBhIHdheSBvZiB3ZWVrbHkgaWRlbnRpZnlpbmcgZGFpbHkvd2Vla2x5L21vbnRobHkgbm90ZXMuXG4gKiBUaGV5IGFyZSBwcmVmaXhlZCB3aXRoIHRoZSBncmFudWxhcml0eSB0byBhdm9pZCBhbWJpZ3VpdHkuXG4gKi9cbmZ1bmN0aW9uIGdldERhdGVVSUQoZGF0ZSwgZ3JhbnVsYXJpdHkgPSBcImRheVwiKSB7XG4gICAgY29uc3QgdHMgPSBkYXRlLmNsb25lKCkuc3RhcnRPZihncmFudWxhcml0eSkuZm9ybWF0KCk7XG4gICAgcmV0dXJuIGAke2dyYW51bGFyaXR5fS0ke3RzfWA7XG59XG5mdW5jdGlvbiByZW1vdmVFc2NhcGVkQ2hhcmFjdGVycyhmb3JtYXQpIHtcbiAgICByZXR1cm4gZm9ybWF0LnJlcGxhY2UoL1xcW1teXFxdXSpcXF0vZywgXCJcIik7IC8vIHJlbW92ZSBldmVyeXRoaW5nIHdpdGhpbiBicmFja2V0c1xufVxuLyoqXG4gKiBYWFg6IFdoZW4gcGFyc2luZyBkYXRlcyB0aGF0IGNvbnRhaW4gYm90aCB3ZWVrIG51bWJlcnMgYW5kIG1vbnRocyxcbiAqIE1vbWVudCBjaG9zZXMgdG8gaWdub3JlIHRoZSB3ZWVrIG51bWJlcnMuIEZvciB0aGUgd2VlayBkYXRlVUlELCB3ZVxuICogd2FudCB0aGUgb3Bwb3NpdGUgYmVoYXZpb3IuIFN0cmlwIHRoZSBNTU0gZnJvbSB0aGUgZm9ybWF0IHRvIHBhdGNoLlxuICovXG5mdW5jdGlvbiBpc0Zvcm1hdEFtYmlndW91cyhmb3JtYXQsIGdyYW51bGFyaXR5KSB7XG4gICAgaWYgKGdyYW51bGFyaXR5ID09PSBcIndlZWtcIikge1xuICAgICAgICBjb25zdCBjbGVhbkZvcm1hdCA9IHJlbW92ZUVzY2FwZWRDaGFyYWN0ZXJzKGZvcm1hdCk7XG4gICAgICAgIHJldHVybiAoL3d7MSwyfS9pLnRlc3QoY2xlYW5Gb3JtYXQpICYmXG4gICAgICAgICAgICAoL017MSw0fS8udGVzdChjbGVhbkZvcm1hdCkgfHwgL0R7MSw0fS8udGVzdChjbGVhbkZvcm1hdCkpKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gZ2V0RGF0ZUZyb21GaWxlKGZpbGUsIGdyYW51bGFyaXR5KSB7XG4gICAgcmV0dXJuIGdldERhdGVGcm9tRmlsZW5hbWUoZmlsZS5iYXNlbmFtZSwgZ3JhbnVsYXJpdHkpO1xufVxuZnVuY3Rpb24gZ2V0RGF0ZUZyb21QYXRoKHBhdGgsIGdyYW51bGFyaXR5KSB7XG4gICAgcmV0dXJuIGdldERhdGVGcm9tRmlsZW5hbWUoYmFzZW5hbWUocGF0aCksIGdyYW51bGFyaXR5KTtcbn1cbmZ1bmN0aW9uIGdldERhdGVGcm9tRmlsZW5hbWUoZmlsZW5hbWUsIGdyYW51bGFyaXR5KSB7XG4gICAgY29uc3QgZ2V0U2V0dGluZ3MgPSB7XG4gICAgICAgIGRheTogZ2V0RGFpbHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIHdlZWs6IGdldFdlZWtseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgbW9udGg6IGdldE1vbnRobHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIHF1YXJ0ZXI6IGdldFF1YXJ0ZXJseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgeWVhcjogZ2V0WWVhcmx5Tm90ZVNldHRpbmdzLFxuICAgIH07XG4gICAgY29uc3QgZm9ybWF0ID0gZ2V0U2V0dGluZ3NbZ3JhbnVsYXJpdHldKCkuZm9ybWF0LnNwbGl0KFwiL1wiKS5wb3AoKTtcbiAgICBjb25zdCBub3RlRGF0ZSA9IHdpbmRvdy5tb21lbnQoZmlsZW5hbWUsIGZvcm1hdCwgdHJ1ZSk7XG4gICAgaWYgKCFub3RlRGF0ZS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmIChpc0Zvcm1hdEFtYmlndW91cyhmb3JtYXQsIGdyYW51bGFyaXR5KSkge1xuICAgICAgICBpZiAoZ3JhbnVsYXJpdHkgPT09IFwid2Vla1wiKSB7XG4gICAgICAgICAgICBjb25zdCBjbGVhbkZvcm1hdCA9IHJlbW92ZUVzY2FwZWRDaGFyYWN0ZXJzKGZvcm1hdCk7XG4gICAgICAgICAgICBpZiAoL3d7MSwyfS9pLnRlc3QoY2xlYW5Gb3JtYXQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5tb21lbnQoZmlsZW5hbWUsIFxuICAgICAgICAgICAgICAgIC8vIElmIGZvcm1hdCBjb250YWlucyB3ZWVrLCByZW1vdmUgZGF5ICYgbW9udGggZm9ybWF0dGluZ1xuICAgICAgICAgICAgICAgIGZvcm1hdC5yZXBsYWNlKC9NezEsNH0vZywgXCJcIikucmVwbGFjZSgvRHsxLDR9L2csIFwiXCIpLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vdGVEYXRlO1xufVxuXG5jbGFzcyBEYWlseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIG1pbWljcyB0aGUgYmVoYXZpb3Igb2YgdGhlIGRhaWx5LW5vdGVzIHBsdWdpblxuICogc28gaXQgd2lsbCByZXBsYWNlIHt7ZGF0ZX19LCB7e3RpdGxlfX0sIGFuZCB7e3RpbWV9fSB3aXRoIHRoZVxuICogZm9ybWF0dGVkIHRpbWVzdGFtcC5cbiAqXG4gKiBOb3RlOiBpdCBoYXMgYW4gYWRkZWQgYm9udXMgdGhhdCBpdCdzIG5vdCAndG9kYXknIHNwZWNpZmljLlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVEYWlseU5vdGUoZGF0ZSkge1xuICAgIGNvbnN0IGFwcCA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gYXBwO1xuICAgIGNvbnN0IG1vbWVudCA9IHdpbmRvdy5tb21lbnQ7XG4gICAgY29uc3QgeyB0ZW1wbGF0ZSwgZm9ybWF0LCBmb2xkZXIgfSA9IGdldERhaWx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgW3RlbXBsYXRlQ29udGVudHMsIElGb2xkSW5mb10gPSBhd2FpdCBnZXRUZW1wbGF0ZUluZm8odGVtcGxhdGUpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gZGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IGF3YWl0IGdldE5vdGVQYXRoKGZvbGRlciwgZmlsZW5hbWUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRGaWxlID0gYXdhaXQgdmF1bHQuY3JlYXRlKG5vcm1hbGl6ZWRQYXRoLCB0ZW1wbGF0ZUNvbnRlbnRzXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqZGF0ZVxccyp9fS9naSwgZmlsZW5hbWUpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGltZVxccyp9fS9naSwgbW9tZW50KCkuZm9ybWF0KFwiSEg6bW1cIikpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGl0bGVcXHMqfX0vZ2ksIGZpbGVuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKihkYXRlfHRpbWUpXFxzKigoWystXVxcZCspKFt5cW13ZGhzXSkpP1xccyooOi4rPyk/fX0vZ2ksIChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG1vbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBkYXRlLmNsb25lKCkuc2V0KHtcbiAgICAgICAgICAgICAgICBob3VyOiBub3cuZ2V0KFwiaG91clwiKSxcbiAgICAgICAgICAgICAgICBtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXG4gICAgICAgICAgICAgICAgc2Vjb25kOiBub3cuZ2V0KFwic2Vjb25kXCIpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY2FsYykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlLmFkZChwYXJzZUludCh0aW1lRGVsdGEsIDEwKSwgdW5pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9tZW50Rm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChtb21lbnRGb3JtYXQuc3Vic3RyaW5nKDEpLnRyaW0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqeWVzdGVyZGF5XFxzKn19L2dpLCBkYXRlLmNsb25lKCkuc3VidHJhY3QoMSwgXCJkYXlcIikuZm9ybWF0KGZvcm1hdCkpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdG9tb3Jyb3dcXHMqfX0vZ2ksIGRhdGUuY2xvbmUoKS5hZGQoMSwgXCJkXCIpLmZvcm1hdChmb3JtYXQpKSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGFwcC5mb2xkTWFuYWdlci5zYXZlKGNyZWF0ZWRGaWxlLCBJRm9sZEluZm8pO1xuICAgICAgICByZXR1cm4gY3JlYXRlZEZpbGU7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBmaWxlOiAnJHtub3JtYWxpemVkUGF0aH0nYCwgZXJyKTtcbiAgICAgICAgbmV3IG9ic2lkaWFuLk5vdGljZShcIlVuYWJsZSB0byBjcmVhdGUgbmV3IGZpbGUuXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldERhaWx5Tm90ZShkYXRlLCBkYWlseU5vdGVzKSB7XG4gICAgcmV0dXJuIGRhaWx5Tm90ZXNbZ2V0RGF0ZVVJRChkYXRlLCBcImRheVwiKV0gPz8gbnVsbDtcbn1cbmZ1bmN0aW9uIGdldEFsbERhaWx5Tm90ZXMoKSB7XG4gICAgLyoqXG4gICAgICogRmluZCBhbGwgZGFpbHkgbm90ZXMgaW4gdGhlIGRhaWx5IG5vdGUgZm9sZGVyXG4gICAgICovXG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IGZvbGRlciB9ID0gZ2V0RGFpbHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBkYWlseU5vdGVzRm9sZGVyID0gdmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG9ic2lkaWFuLm5vcm1hbGl6ZVBhdGgoZm9sZGVyKSk7XG4gICAgaWYgKCFkYWlseU5vdGVzRm9sZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBEYWlseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yKFwiRmFpbGVkIHRvIGZpbmQgZGFpbHkgbm90ZXMgZm9sZGVyXCIpO1xuICAgIH1cbiAgICBjb25zdCBkYWlseU5vdGVzID0ge307XG4gICAgb2JzaWRpYW4uVmF1bHQucmVjdXJzZUNoaWxkcmVuKGRhaWx5Tm90ZXNGb2xkZXIsIChub3RlKSA9PiB7XG4gICAgICAgIGlmIChub3RlIGluc3RhbmNlb2Ygb2JzaWRpYW4uVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBnZXREYXRlRnJvbUZpbGUobm90ZSwgXCJkYXlcIik7XG4gICAgICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHJpbmcgPSBnZXREYXRlVUlEKGRhdGUsIFwiZGF5XCIpO1xuICAgICAgICAgICAgICAgIGRhaWx5Tm90ZXNbZGF0ZVN0cmluZ10gPSBub3RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGRhaWx5Tm90ZXM7XG59XG5cbmNsYXNzIFdlZWtseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuZnVuY3Rpb24gZ2V0RGF5c09mV2VlaygpIHtcbiAgICBjb25zdCB7IG1vbWVudCB9ID0gd2luZG93O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgbGV0IHdlZWtTdGFydCA9IG1vbWVudC5sb2NhbGVEYXRhKCkuX3dlZWsuZG93O1xuICAgIGNvbnN0IGRheXNPZldlZWsgPSBbXG4gICAgICAgIFwic3VuZGF5XCIsXG4gICAgICAgIFwibW9uZGF5XCIsXG4gICAgICAgIFwidHVlc2RheVwiLFxuICAgICAgICBcIndlZG5lc2RheVwiLFxuICAgICAgICBcInRodXJzZGF5XCIsXG4gICAgICAgIFwiZnJpZGF5XCIsXG4gICAgICAgIFwic2F0dXJkYXlcIixcbiAgICBdO1xuICAgIHdoaWxlICh3ZWVrU3RhcnQpIHtcbiAgICAgICAgZGF5c09mV2Vlay5wdXNoKGRheXNPZldlZWsuc2hpZnQoKSk7XG4gICAgICAgIHdlZWtTdGFydC0tO1xuICAgIH1cbiAgICByZXR1cm4gZGF5c09mV2Vlaztcbn1cbmZ1bmN0aW9uIGdldERheU9mV2Vla051bWVyaWNhbFZhbHVlKGRheU9mV2Vla05hbWUpIHtcbiAgICByZXR1cm4gZ2V0RGF5c09mV2VlaygpLmluZGV4T2YoZGF5T2ZXZWVrTmFtZS50b0xvd2VyQ2FzZSgpKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVdlZWtseU5vdGUoZGF0ZSkge1xuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyB0ZW1wbGF0ZSwgZm9ybWF0LCBmb2xkZXIgfSA9IGdldFdlZWtseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IFt0ZW1wbGF0ZUNvbnRlbnRzLCBJRm9sZEluZm9dID0gYXdhaXQgZ2V0VGVtcGxhdGVJbmZvKHRlbXBsYXRlKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGRhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgY29uc3Qgbm9ybWFsaXplZFBhdGggPSBhd2FpdCBnZXROb3RlUGF0aChmb2xkZXIsIGZpbGVuYW1lKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjcmVhdGVkRmlsZSA9IGF3YWl0IHZhdWx0LmNyZWF0ZShub3JtYWxpemVkUGF0aCwgdGVtcGxhdGVDb250ZW50c1xuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKihkYXRlfHRpbWUpXFxzKigoWystXVxcZCspKFt5cW13ZGhzXSkpP1xccyooOi4rPyk/fX0vZ2ksIChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IHdpbmRvdy5tb21lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gZGF0ZS5jbG9uZSgpLnNldCh7XG4gICAgICAgICAgICAgICAgaG91cjogbm93LmdldChcImhvdXJcIiksXG4gICAgICAgICAgICAgICAgbWludXRlOiBub3cuZ2V0KFwibWludXRlXCIpLFxuICAgICAgICAgICAgICAgIHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNhbGMpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RGF0ZS5hZGQocGFyc2VJbnQodGltZURlbHRhLCAxMCksIHVuaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vbWVudEZvcm1hdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpdGxlXFxzKn19L2dpLCBmaWxlbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aW1lXFxzKn19L2dpLCB3aW5kb3cubW9tZW50KCkuZm9ybWF0KFwiSEg6bW1cIikpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKHN1bmRheXxtb25kYXl8dHVlc2RheXx3ZWRuZXNkYXl8dGh1cnNkYXl8ZnJpZGF5fHNhdHVyZGF5KVxccyo6KC4qPyl9fS9naSwgKF8sIGRheU9mV2VlaywgbW9tZW50Rm9ybWF0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXkgPSBnZXREYXlPZldlZWtOdW1lcmljYWxWYWx1ZShkYXlPZldlZWspO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGUud2Vla2RheShkYXkpLmZvcm1hdChtb21lbnRGb3JtYXQudHJpbSgpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB3aW5kb3cuYXBwLmZvbGRNYW5hZ2VyLnNhdmUoY3JlYXRlZEZpbGUsIElGb2xkSW5mbyk7XG4gICAgICAgIHJldHVybiBjcmVhdGVkRmlsZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGZpbGU6ICcke25vcm1hbGl6ZWRQYXRofSdgLCBlcnIpO1xuICAgICAgICBuZXcgb2JzaWRpYW4uTm90aWNlKFwiVW5hYmxlIHRvIGNyZWF0ZSBuZXcgZmlsZS5cIik7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0V2Vla2x5Tm90ZShkYXRlLCB3ZWVrbHlOb3Rlcykge1xuICAgIHJldHVybiB3ZWVrbHlOb3Rlc1tnZXREYXRlVUlEKGRhdGUsIFwid2Vla1wiKV0gPz8gbnVsbDtcbn1cbmZ1bmN0aW9uIGdldEFsbFdlZWtseU5vdGVzKCkge1xuICAgIGNvbnN0IHdlZWtseU5vdGVzID0ge307XG4gICAgaWYgKCFhcHBIYXNXZWVrbHlOb3Rlc1BsdWdpbkxvYWRlZCgpKSB7XG4gICAgICAgIHJldHVybiB3ZWVrbHlOb3RlcztcbiAgICB9XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IGZvbGRlciB9ID0gZ2V0V2Vla2x5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3Qgd2Vla2x5Tm90ZXNGb2xkZXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2JzaWRpYW4ubm9ybWFsaXplUGF0aChmb2xkZXIpKTtcbiAgICBpZiAoIXdlZWtseU5vdGVzRm9sZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBXZWVrbHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvcihcIkZhaWxlZCB0byBmaW5kIHdlZWtseSBub3RlcyBmb2xkZXJcIik7XG4gICAgfVxuICAgIG9ic2lkaWFuLlZhdWx0LnJlY3Vyc2VDaGlsZHJlbih3ZWVrbHlOb3Rlc0ZvbGRlciwgKG5vdGUpID0+IHtcbiAgICAgICAgaWYgKG5vdGUgaW5zdGFuY2VvZiBvYnNpZGlhbi5URmlsZSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldERhdGVGcm9tRmlsZShub3RlLCBcIndlZWtcIik7XG4gICAgICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHJpbmcgPSBnZXREYXRlVUlEKGRhdGUsIFwid2Vla1wiKTtcbiAgICAgICAgICAgICAgICB3ZWVrbHlOb3Rlc1tkYXRlU3RyaW5nXSA9IG5vdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gd2Vla2x5Tm90ZXM7XG59XG5cbmNsYXNzIE1vbnRobHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvciBleHRlbmRzIEVycm9yIHtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBtaW1pY3MgdGhlIGJlaGF2aW9yIG9mIHRoZSBkYWlseS1ub3RlcyBwbHVnaW5cbiAqIHNvIGl0IHdpbGwgcmVwbGFjZSB7e2RhdGV9fSwge3t0aXRsZX19LCBhbmQge3t0aW1lfX0gd2l0aCB0aGVcbiAqIGZvcm1hdHRlZCB0aW1lc3RhbXAuXG4gKlxuICogTm90ZTogaXQgaGFzIGFuIGFkZGVkIGJvbnVzIHRoYXQgaXQncyBub3QgJ3RvZGF5JyBzcGVjaWZpYy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlTW9udGhseU5vdGUoZGF0ZSkge1xuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyB0ZW1wbGF0ZSwgZm9ybWF0LCBmb2xkZXIgfSA9IGdldE1vbnRobHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBbdGVtcGxhdGVDb250ZW50cywgSUZvbGRJbmZvXSA9IGF3YWl0IGdldFRlbXBsYXRlSW5mbyh0ZW1wbGF0ZSk7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBkYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gYXdhaXQgZ2V0Tm90ZVBhdGgoZm9sZGVyLCBmaWxlbmFtZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3JlYXRlZEZpbGUgPSBhd2FpdCB2YXVsdC5jcmVhdGUobm9ybWFsaXplZFBhdGgsIHRlbXBsYXRlQ29udGVudHNcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyooZGF0ZXx0aW1lKVxccyooKFsrLV1cXGQrKShbeXFtd2Roc10pKT9cXHMqKDouKz8pP319L2dpLCAoXywgX3RpbWVPckRhdGUsIGNhbGMsIHRpbWVEZWx0YSwgdW5pdCwgbW9tZW50Rm9ybWF0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSB3aW5kb3cubW9tZW50KCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGRhdGUuY2xvbmUoKS5zZXQoe1xuICAgICAgICAgICAgICAgIGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxuICAgICAgICAgICAgICAgIG1pbnV0ZTogbm93LmdldChcIm1pbnV0ZVwiKSxcbiAgICAgICAgICAgICAgICBzZWNvbmQ6IG5vdy5nZXQoXCJzZWNvbmRcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjYWxjKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudERhdGUuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb21lbnRGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KG1vbWVudEZvcm1hdC5zdWJzdHJpbmcoMSkudHJpbSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccypkYXRlXFxzKn19L2dpLCBmaWxlbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aW1lXFxzKn19L2dpLCB3aW5kb3cubW9tZW50KCkuZm9ybWF0KFwiSEg6bW1cIikpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGl0bGVcXHMqfX0vZ2ksIGZpbGVuYW1lKSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHdpbmRvdy5hcHAuZm9sZE1hbmFnZXIuc2F2ZShjcmVhdGVkRmlsZSwgSUZvbGRJbmZvKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRGaWxlO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgZmlsZTogJyR7bm9ybWFsaXplZFBhdGh9J2AsIGVycik7XG4gICAgICAgIG5ldyBvYnNpZGlhbi5Ob3RpY2UoXCJVbmFibGUgdG8gY3JlYXRlIG5ldyBmaWxlLlwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRNb250aGx5Tm90ZShkYXRlLCBtb250aGx5Tm90ZXMpIHtcbiAgICByZXR1cm4gbW9udGhseU5vdGVzW2dldERhdGVVSUQoZGF0ZSwgXCJtb250aFwiKV0gPz8gbnVsbDtcbn1cbmZ1bmN0aW9uIGdldEFsbE1vbnRobHlOb3RlcygpIHtcbiAgICBjb25zdCBtb250aGx5Tm90ZXMgPSB7fTtcbiAgICBpZiAoIWFwcEhhc01vbnRobHlOb3Rlc1BsdWdpbkxvYWRlZCgpKSB7XG4gICAgICAgIHJldHVybiBtb250aGx5Tm90ZXM7XG4gICAgfVxuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyBmb2xkZXIgfSA9IGdldE1vbnRobHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBtb250aGx5Tm90ZXNGb2xkZXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2JzaWRpYW4ubm9ybWFsaXplUGF0aChmb2xkZXIpKTtcbiAgICBpZiAoIW1vbnRobHlOb3Rlc0ZvbGRlcikge1xuICAgICAgICB0aHJvdyBuZXcgTW9udGhseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yKFwiRmFpbGVkIHRvIGZpbmQgbW9udGhseSBub3RlcyBmb2xkZXJcIik7XG4gICAgfVxuICAgIG9ic2lkaWFuLlZhdWx0LnJlY3Vyc2VDaGlsZHJlbihtb250aGx5Tm90ZXNGb2xkZXIsIChub3RlKSA9PiB7XG4gICAgICAgIGlmIChub3RlIGluc3RhbmNlb2Ygb2JzaWRpYW4uVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBnZXREYXRlRnJvbUZpbGUobm90ZSwgXCJtb250aFwiKTtcbiAgICAgICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGdldERhdGVVSUQoZGF0ZSwgXCJtb250aFwiKTtcbiAgICAgICAgICAgICAgICBtb250aGx5Tm90ZXNbZGF0ZVN0cmluZ10gPSBub3RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG1vbnRobHlOb3Rlcztcbn1cblxuY2xhc3MgUXVhcnRlcmx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gbWltaWNzIHRoZSBiZWhhdmlvciBvZiB0aGUgZGFpbHktbm90ZXMgcGx1Z2luXG4gKiBzbyBpdCB3aWxsIHJlcGxhY2Uge3tkYXRlfX0sIHt7dGl0bGV9fSwgYW5kIHt7dGltZX19IHdpdGggdGhlXG4gKiBmb3JtYXR0ZWQgdGltZXN0YW1wLlxuICpcbiAqIE5vdGU6IGl0IGhhcyBhbiBhZGRlZCBib251cyB0aGF0IGl0J3Mgbm90ICd0b2RheScgc3BlY2lmaWMuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVF1YXJ0ZXJseU5vdGUoZGF0ZSkge1xuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyB0ZW1wbGF0ZSwgZm9ybWF0LCBmb2xkZXIgfSA9IGdldFF1YXJ0ZXJseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IFt0ZW1wbGF0ZUNvbnRlbnRzLCBJRm9sZEluZm9dID0gYXdhaXQgZ2V0VGVtcGxhdGVJbmZvKHRlbXBsYXRlKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGRhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgY29uc3Qgbm9ybWFsaXplZFBhdGggPSBhd2FpdCBnZXROb3RlUGF0aChmb2xkZXIsIGZpbGVuYW1lKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjcmVhdGVkRmlsZSA9IGF3YWl0IHZhdWx0LmNyZWF0ZShub3JtYWxpemVkUGF0aCwgdGVtcGxhdGVDb250ZW50c1xuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKihkYXRlfHRpbWUpXFxzKigoWystXVxcZCspKFt5cW13ZGhzXSkpP1xccyooOi4rPyk/fX0vZ2ksIChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IHdpbmRvdy5tb21lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gZGF0ZS5jbG9uZSgpLnNldCh7XG4gICAgICAgICAgICAgICAgaG91cjogbm93LmdldChcImhvdXJcIiksXG4gICAgICAgICAgICAgICAgbWludXRlOiBub3cuZ2V0KFwibWludXRlXCIpLFxuICAgICAgICAgICAgICAgIHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNhbGMpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RGF0ZS5hZGQocGFyc2VJbnQodGltZURlbHRhLCAxMCksIHVuaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vbWVudEZvcm1hdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKmRhdGVcXHMqfX0vZ2ksIGZpbGVuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpbWVcXHMqfX0vZ2ksIHdpbmRvdy5tb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aXRsZVxccyp9fS9naSwgZmlsZW5hbWUpKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgd2luZG93LmFwcC5mb2xkTWFuYWdlci5zYXZlKGNyZWF0ZWRGaWxlLCBJRm9sZEluZm8pO1xuICAgICAgICByZXR1cm4gY3JlYXRlZEZpbGU7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBmaWxlOiAnJHtub3JtYWxpemVkUGF0aH0nYCwgZXJyKTtcbiAgICAgICAgbmV3IG9ic2lkaWFuLk5vdGljZShcIlVuYWJsZSB0byBjcmVhdGUgbmV3IGZpbGUuXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldFF1YXJ0ZXJseU5vdGUoZGF0ZSwgcXVhcnRlcmx5KSB7XG4gICAgcmV0dXJuIHF1YXJ0ZXJseVtnZXREYXRlVUlEKGRhdGUsIFwicXVhcnRlclwiKV0gPz8gbnVsbDtcbn1cbmZ1bmN0aW9uIGdldEFsbFF1YXJ0ZXJseU5vdGVzKCkge1xuICAgIGNvbnN0IHF1YXJ0ZXJseSA9IHt9O1xuICAgIGlmICghYXBwSGFzUXVhcnRlcmx5Tm90ZXNQbHVnaW5Mb2FkZWQoKSkge1xuICAgICAgICByZXR1cm4gcXVhcnRlcmx5O1xuICAgIH1cbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgZm9sZGVyIH0gPSBnZXRRdWFydGVybHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBxdWFydGVybHlGb2xkZXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2JzaWRpYW4ubm9ybWFsaXplUGF0aChmb2xkZXIpKTtcbiAgICBpZiAoIXF1YXJ0ZXJseUZvbGRlcikge1xuICAgICAgICB0aHJvdyBuZXcgUXVhcnRlcmx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IoXCJGYWlsZWQgdG8gZmluZCBxdWFydGVybHkgbm90ZXMgZm9sZGVyXCIpO1xuICAgIH1cbiAgICBvYnNpZGlhbi5WYXVsdC5yZWN1cnNlQ2hpbGRyZW4ocXVhcnRlcmx5Rm9sZGVyLCAobm90ZSkgPT4ge1xuICAgICAgICBpZiAobm90ZSBpbnN0YW5jZW9mIG9ic2lkaWFuLlRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gZ2V0RGF0ZUZyb21GaWxlKG5vdGUsIFwicXVhcnRlclwiKTtcbiAgICAgICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGdldERhdGVVSUQoZGF0ZSwgXCJxdWFydGVyXCIpO1xuICAgICAgICAgICAgICAgIHF1YXJ0ZXJseVtkYXRlU3RyaW5nXSA9IG5vdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcXVhcnRlcmx5O1xufVxuXG5jbGFzcyBZZWFybHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvciBleHRlbmRzIEVycm9yIHtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBtaW1pY3MgdGhlIGJlaGF2aW9yIG9mIHRoZSBkYWlseS1ub3RlcyBwbHVnaW5cbiAqIHNvIGl0IHdpbGwgcmVwbGFjZSB7e2RhdGV9fSwge3t0aXRsZX19LCBhbmQge3t0aW1lfX0gd2l0aCB0aGVcbiAqIGZvcm1hdHRlZCB0aW1lc3RhbXAuXG4gKlxuICogTm90ZTogaXQgaGFzIGFuIGFkZGVkIGJvbnVzIHRoYXQgaXQncyBub3QgJ3RvZGF5JyBzcGVjaWZpYy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlWWVhcmx5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0WWVhcmx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgW3RlbXBsYXRlQ29udGVudHMsIElGb2xkSW5mb10gPSBhd2FpdCBnZXRUZW1wbGF0ZUluZm8odGVtcGxhdGUpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gZGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IGF3YWl0IGdldE5vdGVQYXRoKGZvbGRlciwgZmlsZW5hbWUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRGaWxlID0gYXdhaXQgdmF1bHQuY3JlYXRlKG5vcm1hbGl6ZWRQYXRoLCB0ZW1wbGF0ZUNvbnRlbnRzXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSwgKF8sIF90aW1lT3JEYXRlLCBjYWxjLCB0aW1lRGVsdGEsIHVuaXQsIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gd2luZG93Lm1vbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBkYXRlLmNsb25lKCkuc2V0KHtcbiAgICAgICAgICAgICAgICBob3VyOiBub3cuZ2V0KFwiaG91clwiKSxcbiAgICAgICAgICAgICAgICBtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXG4gICAgICAgICAgICAgICAgc2Vjb25kOiBub3cuZ2V0KFwic2Vjb25kXCIpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY2FsYykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlLmFkZChwYXJzZUludCh0aW1lRGVsdGEsIDEwKSwgdW5pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9tZW50Rm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChtb21lbnRGb3JtYXQuc3Vic3RyaW5nKDEpLnRyaW0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqZGF0ZVxccyp9fS9naSwgZmlsZW5hbWUpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGltZVxccyp9fS9naSwgd2luZG93Lm1vbWVudCgpLmZvcm1hdChcIkhIOm1tXCIpKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpdGxlXFxzKn19L2dpLCBmaWxlbmFtZSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB3aW5kb3cuYXBwLmZvbGRNYW5hZ2VyLnNhdmUoY3JlYXRlZEZpbGUsIElGb2xkSW5mbyk7XG4gICAgICAgIHJldHVybiBjcmVhdGVkRmlsZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGZpbGU6ICcke25vcm1hbGl6ZWRQYXRofSdgLCBlcnIpO1xuICAgICAgICBuZXcgb2JzaWRpYW4uTm90aWNlKFwiVW5hYmxlIHRvIGNyZWF0ZSBuZXcgZmlsZS5cIik7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0WWVhcmx5Tm90ZShkYXRlLCB5ZWFybHlOb3Rlcykge1xuICAgIHJldHVybiB5ZWFybHlOb3Rlc1tnZXREYXRlVUlEKGRhdGUsIFwieWVhclwiKV0gPz8gbnVsbDtcbn1cbmZ1bmN0aW9uIGdldEFsbFllYXJseU5vdGVzKCkge1xuICAgIGNvbnN0IHllYXJseU5vdGVzID0ge307XG4gICAgaWYgKCFhcHBIYXNZZWFybHlOb3Rlc1BsdWdpbkxvYWRlZCgpKSB7XG4gICAgICAgIHJldHVybiB5ZWFybHlOb3RlcztcbiAgICB9XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IGZvbGRlciB9ID0gZ2V0WWVhcmx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgeWVhcmx5Tm90ZXNGb2xkZXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2JzaWRpYW4ubm9ybWFsaXplUGF0aChmb2xkZXIpKTtcbiAgICBpZiAoIXllYXJseU5vdGVzRm9sZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBZZWFybHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvcihcIkZhaWxlZCB0byBmaW5kIHllYXJseSBub3RlcyBmb2xkZXJcIik7XG4gICAgfVxuICAgIG9ic2lkaWFuLlZhdWx0LnJlY3Vyc2VDaGlsZHJlbih5ZWFybHlOb3Rlc0ZvbGRlciwgKG5vdGUpID0+IHtcbiAgICAgICAgaWYgKG5vdGUgaW5zdGFuY2VvZiBvYnNpZGlhbi5URmlsZSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldERhdGVGcm9tRmlsZShub3RlLCBcInllYXJcIik7XG4gICAgICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHJpbmcgPSBnZXREYXRlVUlEKGRhdGUsIFwieWVhclwiKTtcbiAgICAgICAgICAgICAgICB5ZWFybHlOb3Rlc1tkYXRlU3RyaW5nXSA9IG5vdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4geWVhcmx5Tm90ZXM7XG59XG5cbmZ1bmN0aW9uIGFwcEhhc0RhaWx5Tm90ZXNQbHVnaW5Mb2FkZWQoKSB7XG4gICAgY29uc3QgeyBhcHAgfSA9IHdpbmRvdztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IGRhaWx5Tm90ZXNQbHVnaW4gPSBhcHAuaW50ZXJuYWxQbHVnaW5zLnBsdWdpbnNbXCJkYWlseS1ub3Rlc1wiXTtcbiAgICBpZiAoZGFpbHlOb3Rlc1BsdWdpbiAmJiBkYWlseU5vdGVzUGx1Z2luLmVuYWJsZWQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGVyaW9kaWNOb3RlcyA9IGFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpO1xuICAgIHJldHVybiBwZXJpb2RpY05vdGVzICYmIHBlcmlvZGljTm90ZXMuc2V0dGluZ3M/LmRhaWx5Py5lbmFibGVkO1xufVxuLyoqXG4gKiBYWFg6IFwiV2Vla2x5IE5vdGVzXCIgbGl2ZSBpbiBlaXRoZXIgdGhlIENhbGVuZGFyIHBsdWdpbiBvciB0aGUgcGVyaW9kaWMtbm90ZXMgcGx1Z2luLlxuICogQ2hlY2sgYm90aCB1bnRpbCB0aGUgd2Vla2x5IG5vdGVzIGZlYXR1cmUgaXMgcmVtb3ZlZCBmcm9tIHRoZSBDYWxlbmRhciBwbHVnaW4uXG4gKi9cbmZ1bmN0aW9uIGFwcEhhc1dlZWtseU5vdGVzUGx1Z2luTG9hZGVkKCkge1xuICAgIGNvbnN0IHsgYXBwIH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBpZiAoYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwiY2FsZW5kYXJcIikpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGVyaW9kaWNOb3RlcyA9IGFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpO1xuICAgIHJldHVybiBwZXJpb2RpY05vdGVzICYmIHBlcmlvZGljTm90ZXMuc2V0dGluZ3M/LndlZWtseT8uZW5hYmxlZDtcbn1cbmZ1bmN0aW9uIGFwcEhhc01vbnRobHlOb3Rlc1BsdWdpbkxvYWRlZCgpIHtcbiAgICBjb25zdCB7IGFwcCB9ID0gd2luZG93O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGVyaW9kaWNOb3RlcyA9IGFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpO1xuICAgIHJldHVybiBwZXJpb2RpY05vdGVzICYmIHBlcmlvZGljTm90ZXMuc2V0dGluZ3M/Lm1vbnRobHk/LmVuYWJsZWQ7XG59XG5mdW5jdGlvbiBhcHBIYXNRdWFydGVybHlOb3Rlc1BsdWdpbkxvYWRlZCgpIHtcbiAgICBjb25zdCB7IGFwcCB9ID0gd2luZG93O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGVyaW9kaWNOb3RlcyA9IGFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpO1xuICAgIHJldHVybiBwZXJpb2RpY05vdGVzICYmIHBlcmlvZGljTm90ZXMuc2V0dGluZ3M/LnF1YXJ0ZXJseT8uZW5hYmxlZDtcbn1cbmZ1bmN0aW9uIGFwcEhhc1llYXJseU5vdGVzUGx1Z2luTG9hZGVkKCkge1xuICAgIGNvbnN0IHsgYXBwIH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8ueWVhcmx5Py5lbmFibGVkO1xufVxuZnVuY3Rpb24gZ2V0UGVyaW9kaWNOb3RlU2V0dGluZ3MoZ3JhbnVsYXJpdHkpIHtcbiAgICBjb25zdCBnZXRTZXR0aW5ncyA9IHtcbiAgICAgICAgZGF5OiBnZXREYWlseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgd2VlazogZ2V0V2Vla2x5Tm90ZVNldHRpbmdzLFxuICAgICAgICBtb250aDogZ2V0TW9udGhseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgcXVhcnRlcjogZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzLFxuICAgICAgICB5ZWFyOiBnZXRZZWFybHlOb3RlU2V0dGluZ3MsXG4gICAgfVtncmFudWxhcml0eV07XG4gICAgcmV0dXJuIGdldFNldHRpbmdzKCk7XG59XG5mdW5jdGlvbiBjcmVhdGVQZXJpb2RpY05vdGUoZ3JhbnVsYXJpdHksIGRhdGUpIHtcbiAgICBjb25zdCBjcmVhdGVGbiA9IHtcbiAgICAgICAgZGF5OiBjcmVhdGVEYWlseU5vdGUsXG4gICAgICAgIG1vbnRoOiBjcmVhdGVNb250aGx5Tm90ZSxcbiAgICAgICAgd2VlazogY3JlYXRlV2Vla2x5Tm90ZSxcbiAgICB9O1xuICAgIHJldHVybiBjcmVhdGVGbltncmFudWxhcml0eV0oZGF0ZSk7XG59XG5cbmV4cG9ydHMuREVGQVVMVF9EQUlMWV9OT1RFX0ZPUk1BVCA9IERFRkFVTFRfREFJTFlfTk9URV9GT1JNQVQ7XG5leHBvcnRzLkRFRkFVTFRfTU9OVEhMWV9OT1RFX0ZPUk1BVCA9IERFRkFVTFRfTU9OVEhMWV9OT1RFX0ZPUk1BVDtcbmV4cG9ydHMuREVGQVVMVF9RVUFSVEVSTFlfTk9URV9GT1JNQVQgPSBERUZBVUxUX1FVQVJURVJMWV9OT1RFX0ZPUk1BVDtcbmV4cG9ydHMuREVGQVVMVF9XRUVLTFlfTk9URV9GT1JNQVQgPSBERUZBVUxUX1dFRUtMWV9OT1RFX0ZPUk1BVDtcbmV4cG9ydHMuREVGQVVMVF9ZRUFSTFlfTk9URV9GT1JNQVQgPSBERUZBVUxUX1lFQVJMWV9OT1RFX0ZPUk1BVDtcbmV4cG9ydHMuYXBwSGFzRGFpbHlOb3Rlc1BsdWdpbkxvYWRlZCA9IGFwcEhhc0RhaWx5Tm90ZXNQbHVnaW5Mb2FkZWQ7XG5leHBvcnRzLmFwcEhhc01vbnRobHlOb3Rlc1BsdWdpbkxvYWRlZCA9IGFwcEhhc01vbnRobHlOb3Rlc1BsdWdpbkxvYWRlZDtcbmV4cG9ydHMuYXBwSGFzUXVhcnRlcmx5Tm90ZXNQbHVnaW5Mb2FkZWQgPSBhcHBIYXNRdWFydGVybHlOb3Rlc1BsdWdpbkxvYWRlZDtcbmV4cG9ydHMuYXBwSGFzV2Vla2x5Tm90ZXNQbHVnaW5Mb2FkZWQgPSBhcHBIYXNXZWVrbHlOb3Rlc1BsdWdpbkxvYWRlZDtcbmV4cG9ydHMuYXBwSGFzWWVhcmx5Tm90ZXNQbHVnaW5Mb2FkZWQgPSBhcHBIYXNZZWFybHlOb3Rlc1BsdWdpbkxvYWRlZDtcbmV4cG9ydHMuY3JlYXRlRGFpbHlOb3RlID0gY3JlYXRlRGFpbHlOb3RlO1xuZXhwb3J0cy5jcmVhdGVNb250aGx5Tm90ZSA9IGNyZWF0ZU1vbnRobHlOb3RlO1xuZXhwb3J0cy5jcmVhdGVQZXJpb2RpY05vdGUgPSBjcmVhdGVQZXJpb2RpY05vdGU7XG5leHBvcnRzLmNyZWF0ZVF1YXJ0ZXJseU5vdGUgPSBjcmVhdGVRdWFydGVybHlOb3RlO1xuZXhwb3J0cy5jcmVhdGVXZWVrbHlOb3RlID0gY3JlYXRlV2Vla2x5Tm90ZTtcbmV4cG9ydHMuY3JlYXRlWWVhcmx5Tm90ZSA9IGNyZWF0ZVllYXJseU5vdGU7XG5leHBvcnRzLmdldEFsbERhaWx5Tm90ZXMgPSBnZXRBbGxEYWlseU5vdGVzO1xuZXhwb3J0cy5nZXRBbGxNb250aGx5Tm90ZXMgPSBnZXRBbGxNb250aGx5Tm90ZXM7XG5leHBvcnRzLmdldEFsbFF1YXJ0ZXJseU5vdGVzID0gZ2V0QWxsUXVhcnRlcmx5Tm90ZXM7XG5leHBvcnRzLmdldEFsbFdlZWtseU5vdGVzID0gZ2V0QWxsV2Vla2x5Tm90ZXM7XG5leHBvcnRzLmdldEFsbFllYXJseU5vdGVzID0gZ2V0QWxsWWVhcmx5Tm90ZXM7XG5leHBvcnRzLmdldERhaWx5Tm90ZSA9IGdldERhaWx5Tm90ZTtcbmV4cG9ydHMuZ2V0RGFpbHlOb3RlU2V0dGluZ3MgPSBnZXREYWlseU5vdGVTZXR0aW5ncztcbmV4cG9ydHMuZ2V0RGF0ZUZyb21GaWxlID0gZ2V0RGF0ZUZyb21GaWxlO1xuZXhwb3J0cy5nZXREYXRlRnJvbVBhdGggPSBnZXREYXRlRnJvbVBhdGg7XG5leHBvcnRzLmdldERhdGVVSUQgPSBnZXREYXRlVUlEO1xuZXhwb3J0cy5nZXRNb250aGx5Tm90ZSA9IGdldE1vbnRobHlOb3RlO1xuZXhwb3J0cy5nZXRNb250aGx5Tm90ZVNldHRpbmdzID0gZ2V0TW9udGhseU5vdGVTZXR0aW5ncztcbmV4cG9ydHMuZ2V0UGVyaW9kaWNOb3RlU2V0dGluZ3MgPSBnZXRQZXJpb2RpY05vdGVTZXR0aW5ncztcbmV4cG9ydHMuZ2V0UXVhcnRlcmx5Tm90ZSA9IGdldFF1YXJ0ZXJseU5vdGU7XG5leHBvcnRzLmdldFF1YXJ0ZXJseU5vdGVTZXR0aW5ncyA9IGdldFF1YXJ0ZXJseU5vdGVTZXR0aW5ncztcbmV4cG9ydHMuZ2V0VGVtcGxhdGVJbmZvID0gZ2V0VGVtcGxhdGVJbmZvO1xuZXhwb3J0cy5nZXRXZWVrbHlOb3RlID0gZ2V0V2Vla2x5Tm90ZTtcbmV4cG9ydHMuZ2V0V2Vla2x5Tm90ZVNldHRpbmdzID0gZ2V0V2Vla2x5Tm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXRZZWFybHlOb3RlID0gZ2V0WWVhcmx5Tm90ZTtcbmV4cG9ydHMuZ2V0WWVhcmx5Tm90ZVNldHRpbmdzID0gZ2V0WWVhcmx5Tm90ZVNldHRpbmdzO1xuIiwgImltcG9ydCB7IFBsdWdpbiwgUG9zLCBURmlsZSwgV29ya3NwYWNlTGVhZiB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8vIERhaWx5IE5vdGUgSW50ZXJmYWNlXHJcbmltcG9ydCB7IGdldEFsbERhaWx5Tm90ZXMsIGdldERhaWx5Tm90ZSwgZ2V0RGF0ZUZyb21GaWxlLCBJR3JhbnVsYXJpdHkgfSBmcm9tIFwib2JzaWRpYW4tZGFpbHktbm90ZXMtaW50ZXJmYWNlXCI7XHJcbi8vIG1vbWVudC5qc1xyXG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcclxuXHJcbmltcG9ydCB7IERhaWx5Tm90ZU91dGxpbmVWaWV3LCBEYWlseU5vdGVPdXRsaW5lVmlld1R5cGUgfSBmcm9tICdzcmMvdmlldydcclxuaW1wb3J0IHsgRGFpbHlOb3RlT3V0bGluZVNldHRpbmdUYWIgfSBmcm9tICdzcmMvc2V0dGluZydcclxuXHJcblxyXG5cclxuLy8gXHU4QTJEXHU1QjlBXHU5ODA1XHU3NkVFIFxyXG5leHBvcnQgaW50ZXJmYWNlIERhaWx5Tm90ZU91dGxpbmVTZXR0aW5ncyB7XHJcblx0aW5pdGlhbFNlYXJjaFR5cGU6IHN0cmluZzsgLy9mb3J3YXJkIG9yIGJhY2t3YXJkIFx1NzI3OVx1NUI5QVx1NjVFNVx1MzA0Qlx1MzA4OVx1NTI0RFx1NjVCOVx1NjNBMlx1N0QyMm9yXHU1RjUzXHU2NUU1XHUzMDRCXHUzMDg5XHU1RjhDXHU2NUI5XHU2M0EyXHU3RDIyXHJcblx0b2Zmc2V0OiBudW1iZXI7XHRcdC8vIFx1NjcyQVx1Njc2NVx1MzA2RVx1NjVFNVx1NEVEOFx1MzA4Mlx1NTQyQlx1MzA4MFx1NTgzNFx1NTQwOFx1NEY1NVx1NjVFNVx1NTIwNlx1NTQyQlx1MzA4MVx1MzA4Qlx1MzA0QiBudW1iZXIgb2YgZnV0dXJlIGRheXMgdG8gc2hvdyBcclxuXHRvbnNldDogc3RyaW5nO1x0XHQvLyBcdTcyNzlcdTVCOUFcdTY1RTVcdTMwNEJcdTMwODlmb3J3YXJkXHUzMDZCXHU2M0EyXHU3RDIyXHUzMDU5XHUzMDhCXHU1ODM0XHU1NDA4XHUzMDZFXHU4RDc3XHU3MEI5XHU2NUU1IG9uc2V0IGRhdGVcclxuXHRkdXJhdGlvbjp7XHJcblx0XHRkYXk6bnVtYmVyO1xyXG5cdFx0d2VlazpudW1iZXI7XHJcblx0XHRtb250aDpudW1iZXI7XHJcblx0XHRxdWFydGVyOm51bWJlcjtcclxuXHRcdHllYXI6bnVtYmVyO1xyXG5cdH0gLy8gXHU2M0EyXHU3RDIyXHU2NUU1XHU2NTcwIG51bWJlciBvZiBkYXlzIHRvIHNlYXJjaCBwZXIgcGFnZVxyXG5cdHNob3dFbGVtZW50czp7XHJcblx0XHRoZWFkaW5nOiBib29sZWFuO1xyXG5cdFx0bGluazogYm9vbGVhbjtcclxuXHRcdHRhZzogYm9vbGVhbjtcclxuXHRcdGxpc3RJdGVtczogYm9vbGVhblxyXG5cdH07XHJcblx0aGVhZGluZ0xldmVsOiBib29sZWFuW107XHJcblx0YWxsUm9vdEl0ZW1zOiBib29sZWFuO1xyXG5cdGFsbFRhc2tzOiBib29sZWFuO1xyXG5cdHRhc2tPbmx5OiBib29sZWFuO1xyXG5cdGhpZGVDb21wbGV0ZWRUYXNrczogYm9vbGVhbjtcclxuXHRkaXNwbGF5RmlsZUluZm86IHN0cmluZzsgLy8gbm9uZSB8fCBsaW5lcyB8fCBkYXlzICAgbGVnYWN5XHJcblx0ZGlzcGxheUZpbGVJbmZvRGFpbHk6IHN0cmluZzsgLy8gbm9uZSxsaW5lcyxkYXlzLGRvdyhkYXkgb2YgdGhlIHdlZWspLGRvd3Nob3J0LHdlZWtudW1iZXIsdGFnXHJcblx0ZGlzcGxheUZpbGVJbmZvUGVyaW9kaWM6IHN0cmluZzsgLy8gbm9uZSxsaW5lcyxkYXlzLHRhZ1xyXG5cclxuXHR2aWV3UG9zaXRpb246IHN0cmluZztcdC8vcmlnaHQgfHwgbGVmdCB8fCB0YWIgfHwgc3BsaXQgfHwgcG9wb3V0IFxyXG5cclxuXHRtYXJrZG93bk9ubHk6IGJvb2xlYW47XHJcblx0ZXhhY3RNYXRjaE9ubHk6IGJvb2xlYW47XHJcblxyXG5cdHdvcmRzVG9JZ25vcmU6e1x0Ly9maWx0ZXJcclxuXHRcdGhlYWRpbmc6IHN0cmluZ1tdO1xyXG5cdFx0bGluazogc3RyaW5nW107XHJcblx0XHR0YWc6IHN0cmluZ1tdO1xyXG5cdFx0bGlzdEl0ZW1zOiBzdHJpbmdbXVxyXG5cdH07XHJcblxyXG5cdGlubGluZVByZXZpZXc6IGJvb2xlYW47XHJcblx0dG9vbHRpcFByZXZpZXc6IGJvb2xlYW47XHJcblx0dG9vbHRpcFByZXZpZXdEaXJlY3Rpb246IHN0cmluZzsgLy8gbGVmdCB8fCByaWdodFxyXG5cclxuXHJcblx0aW5jbHVkZU9ubHk6IHN0cmluZztcdC8vIG5vbmUgfHwgaGVhZGluZywgbGluaywgdGFnLCBsaXN0SXRlbXNcclxuXHR3b3Jkc1RvSW5jbHVkZTogc3RyaW5nW107XHJcblx0aW5jbHVkZUJlZ2lubmluZzogYm9vbGVhbjtcclxuXHJcblx0cHJpbWVFbGVtZW50OiBzdHJpbmc7IC8vIG5vbmUgfHwgaGVhZGluZywgbGluaywgdGFnLCBsaXN0SXRlbXNcclxuXHR3b3Jkc1RvRXhjbHVkZTp7XHJcblx0XHRoZWFkaW5nOiBzdHJpbmdbXTtcclxuXHRcdGxpbms6IHN0cmluZ1tdO1xyXG5cdFx0dGFnOiBzdHJpbmdbXTtcclxuXHRcdGxpc3RJdGVtczogc3RyaW5nW11cclxuXHR9O1xyXG5cdHdvcmRzVG9FeHRyYWN0OiBzdHJpbmc7XHJcblxyXG5cdGljb246e1x0Ly9pY29uIGZvciBlYWNoIHR5cGUgb2YgZWxlbWVudFxyXG5cdFx0aGVhZGluZzogc3RyaW5nO1xyXG5cdFx0bGluazogc3RyaW5nO1xyXG5cdFx0dGFnOiBzdHJpbmc7XHJcblx0XHRsaXN0SXRlbXM6IHN0cmluZztcclxuXHRcdG5vdGU6IHN0cmluZztcclxuXHRcdHRhc2s6IHN0cmluZztcclxuXHRcdHRhc2tEb25lOiBzdHJpbmc7XHJcblx0fTtcclxuXHJcblx0Y3VzdG9tSWNvbjp7XHJcblx0XHRoZWFkaW5nOiBzdHJpbmc7XHJcblx0XHRsaW5rOiBzdHJpbmc7XHJcblx0XHR0YWc6IHN0cmluZztcclxuXHRcdGxpc3RJdGVtczogc3RyaW5nO1xyXG5cdFx0bm90ZTogc3RyaW5nO1xyXG5cdFx0dGFzazogc3RyaW5nO1xyXG5cdFx0dGFza0RvbmU6IHN0cmluZztcclxuXHR9O1xyXG5cclxuXHRpbmRlbnQ6e1xyXG5cdFx0aGVhZGluZzogYm9vbGVhbjtcclxuXHRcdGxpbms6IGJvb2xlYW47XHJcblx0XHRsaXN0SXRlbXM6IGJvb2xlYW47XHJcblx0fTtcclxuXHRpbmRlbnRGb2xsb3dIZWFkaW5nOiBudW1iZXI7IC8vIDAgZG9uJ3QgZm9sbG93IDE6c2FtZSBsZXZlbCAyOiBsZXZlbCsxXHJcblxyXG5cdHByZWZpeDp7XHJcblx0XHRoZWFkaW5nOiBzdHJpbmc7XHJcblx0XHRsaW5rOiBzdHJpbmc7XHJcblx0XHR0YWc6IHN0cmluZztcclxuXHRcdGxpc3RJdGVtczogc3RyaW5nO1xyXG5cdFx0dGFzazogc3RyaW5nO1xyXG5cdFx0dGFza0RvbmU6IHN0cmluZztcclxuXHR9O1xyXG5cdHJlcGVhdEhlYWRpbmdQcmVmaXg6IHN0cmluZzsgLy8gbm9uZSwgbGV2ZWwsIGxldmVsLTFcclxuXHRhZGRDaGVja2JveFRleHQ6IGJvb2xlYW47XHJcblxyXG5cdHBlcmlvZGljTm90ZXNFbmFibGVkOiBib29sZWFuO1xyXG5cdGNhbGVuZGFyU2V0c0VuYWJsZWQ6IGJvb2xlYW47XHJcblx0YXR0YWNoV2Vla2x5Tm90ZXNOYW1lOiBib29sZWFuO1xyXG5cclxuXHRzaG93RGVidWdJbmZvOiBib29sZWFuO1xyXG5cclxuXHRub3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3I6IHN0cmluZzsgLy8gbm9uZSwgYWNjZW50LCBjdXN0b21cclxuXHRjdXN0b21Ob3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3I6IHtcclxuXHRcdGFjY2VudDoge1xyXG5cdFx0XHRsaWdodDogc3RyaW5nO1xyXG5cdFx0XHRkYXJrOiBzdHJpbmc7XHJcblx0XHR9O1xyXG5cdFx0Y3VzdG9tOiB7XHJcblx0XHRcdGxpZ2h0OiBzdHJpbmc7XHJcblx0XHRcdGRhcms6IHN0cmluZztcclxuXHRcdH07XHJcblx0fTtcclxuXHRjdXN0b21Ob3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3JIb3Zlcjoge1xyXG5cdFx0YWNjZW50OiB7XHJcblx0XHRcdGxpZ2h0OiBzdHJpbmc7XHJcblx0XHRcdGRhcms6IHN0cmluZztcclxuXHRcdH07XHJcblx0XHRjdXN0b206IHtcclxuXHRcdFx0bGlnaHQ6IHN0cmluZztcclxuXHRcdFx0ZGFyazogc3RyaW5nO1xyXG5cdFx0fTtcclxuXHR9O1xyXG5cclxuXHQvLyBcdTU0MDRcdTMwQzdcdTMwQTRcdTMwRUFcdTMwRkNcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwNkVcdTYwQzVcdTU4MzFcclxuXHRmaWxlRmxhZzoge1xyXG5cdFx0W3BhdGg6IHN0cmluZ106IHtcclxuXHRcdFx0J2ZvbGQnPzogYm9vbGVhbjtcclxuXHRcdH07XHJcblx0fTtcclxuXHJcblx0Ly8gdGFza1x1MzA2RWN1c3RvbSBzdGF0dXNcclxuXHR0YXNrSWNvbjoge1xyXG5cdFx0W3N0YXR1czogc3RyaW5nXToge1xyXG5cdFx0XHRzeW1ib2w6IHN0cmluZztcclxuXHRcdFx0aWNvbjogc3RyaW5nO1xyXG5cdFx0fTtcclxuXHR9O1xyXG5cclxuXHRjb2xsYXBzZUFsbEF0U3RhcnR1cDogYm9vbGVhbjtcclxuXHJcblx0Ly8gZ2V0QmFja2xpbmtzOiBib29sZWFuO1xyXG5cdHNob3dCYWNrbGlua3M6IGJvb2xlYW47XHJcblxyXG5cdHNob3dQcm9wZXJ0eUxpbmtzOiBib29sZWFuO1xyXG5cclxuXHRwb3BvdXRTaXplOiB7XHJcblx0XHR3aWR0aDogbnVtYmVyO1xyXG5cdFx0aGVpZ2h0OiBudW1iZXI7XHJcblx0fVxyXG5cdHBvcG91dEFsd2F5c09uVG9wOiBib29sZWFuO1xyXG5cclxufVxyXG5cclxuLy8gXHU4QTJEXHU1QjlBXHU5ODA1XHU3NkVFXHUzMEM3XHUzMEQ1XHUzMEE5XHUzMEVCXHUzMEM4XHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBEYWlseU5vdGVPdXRsaW5lU2V0dGluZ3MgPSB7XHJcblx0aW5pdGlhbFNlYXJjaFR5cGU6ICdiYWNrd2FyZCcsXHJcblx0b2Zmc2V0OiA3LFxyXG5cdG9uc2V0OiAnMjAyMC0wMy0zMCcsXHJcblx0ZHVyYXRpb246IHtcclxuXHRcdGRheToyOCxcclxuXHRcdHdlZWs6MTIsXHJcblx0XHRtb250aDoxMixcclxuXHRcdHF1YXJ0ZXI6OCxcclxuXHRcdHllYXI6M1xyXG5cdH0sXHJcblx0c2hvd0VsZW1lbnRzOiB7XHJcblx0XHRoZWFkaW5nOiB0cnVlLFxyXG5cdFx0bGluazogdHJ1ZSxcclxuXHRcdHRhZzogdHJ1ZSxcclxuXHRcdGxpc3RJdGVtczogdHJ1ZVxyXG5cdH0sXHJcblx0XHJcblx0aGVhZGluZ0xldmVsOiBbdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIGZhbHNlLCBmYWxzZV0sXHJcblx0YWxsUm9vdEl0ZW1zOiBmYWxzZSxcclxuXHRhbGxUYXNrczogdHJ1ZSxcclxuXHR0YXNrT25seTogZmFsc2UsXHJcblx0aGlkZUNvbXBsZXRlZFRhc2tzOiBmYWxzZSxcclxuXHRkaXNwbGF5RmlsZUluZm86ICdsaW5lcycsXHJcblx0ZGlzcGxheUZpbGVJbmZvRGFpbHk6ICdsaW5lcycsIC8vIG5vbmUsbGluZXMsZGF5cyxkb3coZGF5IG9mIHRoZSB3ZWVrKSxkb3dzaG9ydCx3ZWVrbnVtYmVyLHRhZ1xyXG5cdGRpc3BsYXlGaWxlSW5mb1BlcmlvZGljOiAnbGluZXMnLCAvLyBub25lLGxpbmVzLGRheXMsdGFnXHJcblx0dmlld1Bvc2l0aW9uOiAncmlnaHQnLFxyXG5cclxuXHRtYXJrZG93bk9ubHk6IHRydWUsXHJcblx0ZXhhY3RNYXRjaE9ubHk6IGZhbHNlLFxyXG5cclxuXHR3b3Jkc1RvSWdub3JlOntcclxuXHRcdGhlYWRpbmc6IFtdLFxyXG5cdFx0bGluazogW10sXHJcblx0XHR0YWc6IFtdLFxyXG5cdFx0bGlzdEl0ZW1zOiBbXVxyXG5cdH0sXHJcblxyXG5cdGlubGluZVByZXZpZXc6IHRydWUsXHJcblx0dG9vbHRpcFByZXZpZXc6IHRydWUsXHJcblx0dG9vbHRpcFByZXZpZXdEaXJlY3Rpb246ICdsZWZ0JyxcclxuXHJcblx0XHJcblx0aW5jbHVkZU9ubHk6ICdub25lJyxcclxuXHR3b3Jkc1RvSW5jbHVkZTogW10sXHJcblx0aW5jbHVkZUJlZ2lubmluZzogdHJ1ZSxcclxuXHJcblx0cHJpbWVFbGVtZW50OiAnbm9uZScsXHJcblx0d29yZHNUb0V4Y2x1ZGU6e1xyXG5cdFx0aGVhZGluZzogW10sXHJcblx0XHRsaW5rOiBbXSxcclxuXHRcdHRhZzogW10sXHJcblx0XHRsaXN0SXRlbXM6IFtdXHJcblx0fSxcclxuXHR3b3Jkc1RvRXh0cmFjdDogJycsXHJcblxyXG5cdGljb246e1x0XHJcblx0XHRoZWFkaW5nOiAnbm9uZScsXHJcblx0XHRsaW5rOiAnbGluaycsXHJcblx0XHR0YWc6ICd0YWcnLFxyXG5cdFx0bGlzdEl0ZW1zOiAnbGlzdCcsXHJcblx0XHRub3RlOiAnZmlsZScsXHJcblx0XHR0YXNrOiAnc3F1YXJlJyxcclxuXHRcdHRhc2tEb25lOiAnY2hlY2stc3F1YXJlJ1xyXG5cdH0sXHJcblx0Y3VzdG9tSWNvbjp7XHJcblx0XHRoZWFkaW5nOiAnaGFzaCcsXHJcblx0XHRsaW5rOiAnbGluaycsXHJcblx0XHR0YWc6ICd0YWcnLFxyXG5cdFx0bGlzdEl0ZW1zOiAnbGlzdCcsXHJcblx0XHRub3RlOidmaWxlJyxcclxuXHRcdHRhc2s6J3NxdWFyZScsXHJcblx0XHR0YXNrRG9uZTonY2hlY2stc3F1YXJlJ1xyXG5cdH0sXHJcblxyXG5cdGluZGVudDp7XHJcblx0XHRoZWFkaW5nOiB0cnVlLFxyXG5cdFx0bGluazogdHJ1ZSxcclxuXHRcdGxpc3RJdGVtczogdHJ1ZSxcclxuXHR9LFxyXG5cdGluZGVudEZvbGxvd0hlYWRpbmc6IDAsXHJcblx0cHJlZml4OntcclxuXHRcdGhlYWRpbmc6ICcnLFxyXG5cdFx0bGluazogJycsXHJcblx0XHR0YWc6ICcnLFxyXG5cdFx0bGlzdEl0ZW1zOiAnJyxcclxuXHRcdHRhc2s6ICcnLFxyXG5cdFx0dGFza0RvbmU6ICcnXHJcblx0fSxcclxuXHRyZXBlYXRIZWFkaW5nUHJlZml4Oidub25lJyxcclxuXHRhZGRDaGVja2JveFRleHQ6IGZhbHNlLFxyXG5cclxuXHQvLyBkYWlseU5vdGVDb3JlOiB0cnVlLFxyXG5cdHBlcmlvZGljTm90ZXNFbmFibGVkOiB0cnVlLFxyXG5cdGNhbGVuZGFyU2V0c0VuYWJsZWQ6IHRydWUsXHJcblx0YXR0YWNoV2Vla2x5Tm90ZXNOYW1lOiB0cnVlLFxyXG5cclxuXHRzaG93RGVidWdJbmZvOiBmYWxzZSxcclxuXHJcblx0bm90ZVRpdGxlQmFja2dyb3VuZENvbG9yOiAnbm9uZScsIC8vIG5vbmUsIGFjY2VudCwgY3VzdG9tXHJcblx0Y3VzdG9tTm90ZVRpdGxlQmFja2dyb3VuZENvbG9yOiB7XHJcblx0XHRhY2NlbnQ6IHtcclxuXHRcdFx0bGlnaHQ6ICcjRTNFM0UzJyxcclxuXHRcdFx0ZGFyazogJyMzNjM2MzYnLFxyXG5cdFx0fSxcclxuXHRcdGN1c3RvbToge1xyXG5cdFx0XHRsaWdodDogJyNCRUJFQkUnLFxyXG5cdFx0XHRkYXJrOiAnIzRFNEU0RScsXHJcblx0XHR9LFxyXG5cdH0sXHJcblx0Y3VzdG9tTm90ZVRpdGxlQmFja2dyb3VuZENvbG9ySG92ZXI6IHtcclxuXHRcdGFjY2VudDoge1xyXG5cdFx0XHRsaWdodDogJyNEM0QzRDMnLFxyXG5cdFx0XHRkYXJrOiAnIzQ2NDY0NicsXHJcblx0XHR9LFxyXG5cdFx0Y3VzdG9tOiB7XHJcblx0XHRcdGxpZ2h0OiAnI0FFQUVBRScsXHJcblx0XHRcdGRhcms6ICcjNUU1RTVFJyxcclxuXHRcdH0sXHJcblx0fSxcclxuXHRcclxuXHRmaWxlRmxhZzoge30sXHJcblxyXG5cdC8vIHRhc2tcdTMwNkVjdXN0b20gc3RhdHVzXHJcblx0dGFza0ljb246IHtcclxuXHRcdC8vIHRvZG86IHtzeW1ib2w6JyAnLCBpY29uOidzcXVhcmUnfSxcclxuXHRcdGluY29tcGxldGU6IHtzeW1ib2w6Jy8nLCBpY29uOidjb2x1bW5zJ30sXHJcblx0XHQvLyBkb25lOiB7c3ltYm9sOid4JywgaWNvbjonY2hlY2stc3F1YXJlJ30sXHJcblx0XHRjYW5jZWxlZDoge3N5bWJvbDonLScsIGljb246J21pbnVzLXNxdWFyZSd9LFxyXG5cdFx0Zm93YXJkZWQ6IHtzeW1ib2w6Jz4nLCBpY29uOidzZW5kJ30sXHJcblx0XHRzY2hlZHVsaW5nOiB7c3ltYm9sOic8JywgaWNvbjonY2FsZW5kYXInfSxcclxuXHRcdHF1ZXN0aW9uOiB7c3ltYm9sOic/JywgaWNvbjonaGVscC1jaXJjbGUnfSxcclxuXHRcdGltcG9ydGFudDoge3N5bWJvbDonIScsIGljb246J2FsZXJ0LXRyaWFuZ2xlJ30sXHJcblx0XHRzdGFyOiB7c3ltYm9sOicqJywgaWNvbjonc3Rhcid9LFxyXG5cdFx0cXVvdGU6IHtzeW1ib2w6J1wiJywgaWNvbjoncXVvdGUnfSxcclxuXHRcdGxvY2F0aW9uOiB7c3ltYm9sOidsJywgaWNvbjonbWFwLXBpbid9LFxyXG5cdFx0Ym9va21hcms6IHtzeW1ib2w6J2InLCBpY29uOidib29rbWFyayd9LFxyXG5cdFx0aW5mb3JtYXRpb246IHtzeW1ib2w6J2knLCBpY29uOidpbmZvJ30sXHJcblx0XHRzYXZpbmdzOiB7c3ltYm9sOidTJywgaWNvbjonZG9sbGFyLXNpZ24nfSxcclxuXHRcdGlkZWE6IHtzeW1ib2w6J0knLCBpY29uOidzaXJlbid9LFxyXG5cdFx0cHJvczoge3N5bWJvbDoncCcsIGljb246J3RodW1icy11cCd9LFxyXG5cdFx0Y29uczoge3N5bWJvbDonYycsIGljb246J3RodW1icy1kb3duJ30sXHJcblx0XHRmaXJlOiB7c3ltYm9sOidmJywgaWNvbjonZmxhbWUnfSxcclxuXHRcdGtleToge3N5bWJvbDonaycsIGljb246J2tleSd9LFxyXG5cdFx0d2luOiB7c3ltYm9sOid3JywgaWNvbjonY2FrZSd9LFxyXG5cdFx0dXA6IHtzeW1ib2w6J3UnLCBpY29uOid0cmVuZGluZy11cCd9LFxyXG5cdFx0ZG93bjoge3N5bWJvbDonZCcsIGljb246J3RyZW5kaW5nLWRvd24nfSxcclxuXHR9LFxyXG5cclxuXHRjb2xsYXBzZUFsbEF0U3RhcnR1cDogZmFsc2UsXHJcblxyXG5cdC8vIGdldEJhY2tsaW5rczogdHJ1ZSxcclxuXHRzaG93QmFja2xpbmtzOiBmYWxzZSxcclxuXHJcblx0c2hvd1Byb3BlcnR5TGlua3M6IHRydWUsXHJcblxyXG5cdHBvcG91dFNpemU6IHtcclxuXHRcdHdpZHRoOiA2MDAsXHJcblx0XHRoZWlnaHQ6IDgwMFxyXG5cdH0sXHJcblx0cG9wb3V0QWx3YXlzT25Ub3A6IGZhbHNlLFxyXG59XHJcblxyXG4vLyBleHBvcnQgaW50ZXJmYWNlIEZpbGVTdGF0dXMge1xyXG4vLyBcdGlzRm9sZGVkOiBib29sZWFuO1xyXG4vLyB9XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVJbmZvIHtcclxuXHQvLyBmaWxlOlRGaWxlO1xyXG5cdGRhdGU6IG1vbWVudDtcclxuXHQvL2NvbnRlbnQ6IHN0cmluZztcclxuXHRsaW5lczogc3RyaW5nW107XHJcblx0bnVtT2ZMaW5lczogbnVtYmVyO1xyXG5cdGlzRm9sZGVkOiBib29sZWFuO1xyXG5cdGJhY2tsaW5rcz86IFRGaWxlW107XHJcblx0ZnJvbnRtYXR0ZXJMaW5rcz86IHtcclxuXHRcdGRpc3BsYXlUZXh0Pzogc3RyaW5nO1xyXG5cdFx0a2V5OiBzdHJpbmc7XHJcblx0XHRsaW5rOiBzdHJpbmc7XHJcblx0XHRvcmlnaW5hbDogc3RyaW5nO1xyXG5cdH1bXTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBEYXRlSW5mbyB7XHJcblx0ZGF0ZTogbW9tZW50O1xyXG5cdGRhaWx5Tm90ZTogYm9vbGVhbjtcclxuXHR1bnJlc29sdmVkTGlua3M6IFRGaWxlW107XHJcblx0Ly8gY3JlYXRlZEZpbGVzOiBURmlsZVtdO1xyXG5cdC8vIG1vZGlmaWVkRmlsZXM6IFRGaWxlW107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgT3V0bGluZURhdGEge1x0XHJcblxyXG5cdHR5cGVPZkVsZW1lbnQ6J2hlYWRpbmcnfCdsaW5rJ3wndGFnJ3wnbGlzdEl0ZW1zJztcclxuXHRwb3NpdGlvbjpQb3M7XHJcblx0bGluaz86c3RyaW5nO1xyXG5cdGRpc3BsYXlUZXh0Pzogc3RyaW5nO1xyXG5cdC8vIGxldmVsIFx1RkYxQWxpc3RJdGVtc1x1MzA2Qlx1MzA2NFx1MzA0NFx1MzA2Nlx1MzA2RjBcdUZGMUFcdTMwQzhcdTMwQzNcdTMwRDdcdTMwMDExXHVGRjFBXHUzMEVCXHUzMEZDXHUzMEM4XHUzMDAxMlx1RkYxQVx1MzA1RFx1MzA4Q1x1NEVFNVx1NEUwQlxyXG5cdGxldmVsPzpudW1iZXI7XHJcblx0dGFzaz86IHN0cmluZ3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBEQVlTX1BFUl9VTklUID17XHJcblx0ZGF5OiAxLFxyXG5cdHdlZWs6IDcsXHJcblx0bW9udGg6IDMwLFxyXG5cdHF1YXJ0ZXI6IDkwLFxyXG5cdHllYXI6MzY1XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBHUkFOVUxBUklUWV9MSVNUOiBJR3JhbnVsYXJpdHlbXSA9IFsnZGF5Jywnd2VlaycsJ21vbnRoJywncXVhcnRlcicsJ3llYXInXVxyXG5cclxuZXhwb3J0IGNvbnN0IEdSQU5VTEFSSVRZX1RPX1BFUklPRElDSVRZID0ge1xyXG5cdGRheTogJ2RhaWx5JyxcclxuXHR3ZWVrOiAnd2Vla2x5JyxcclxuXHRtb250aDogJ21vbnRobHknLFxyXG5cdHF1YXJ0ZXI6ICdxdWFydGVybHknLFxyXG5cdHllYXI6ICd5ZWFybHknXHJcbn0gXHJcblxyXG5leHBvcnQgY29uc3QgRklMRUlORk9fVE9fRElTUExBWSA9IHtcclxuXHRub25lOiAnbm9uZScsXHJcblx0bGluZXM6ICdudW0gb2YgbGluZXMnLFxyXG5cdGRheXM6ICdkaXN0YW5jZScsXHJcblx0dGFnOiAnZmlyc3QgdGFnJ1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgRklMRUlORk9fVE9fRElTUExBWV9EQVkgPSB7XHJcblx0bm9uZTogJ25vbmUnLFxyXG5cdGxpbmVzOiAnbnVtIG9mIGxpbmVzJyxcclxuXHRkYXlzOiAnZGlzdGFuY2UnLFxyXG5cdHRhZzogJ2ZpcnN0IHRhZycsXHJcblx0ZG93OiAnZGF5IG9mIHdlZWsnLFxyXG5cdGRvd3Nob3J0OiAnZGF5IG9mIHdlZWsoc2hvcnQpJyxcclxuXHR3ZWVrbnVtYmVyOiAnd2VlayBudW1iZXInXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERhaWx5Tm90ZU91dGxpbmVQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cclxuXHRzZXR0aW5nczogRGFpbHlOb3RlT3V0bGluZVNldHRpbmdzO1xyXG5cdHZpZXc6IERhaWx5Tm90ZU91dGxpbmVWaWV3O1xyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcblx0XHRcclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblx0XHQvL3JlZ2lzdGVyIGN1c3RvbWUgdmlldyBhY2NvcmRpbmcgdG8gRGV2bG9wZXIgRG9jc1xyXG5cdFx0dGhpcy5yZWdpc3RlclZpZXcoXHJcblx0XHRcdERhaWx5Tm90ZU91dGxpbmVWaWV3VHlwZSxcclxuXHRcdFx0KGxlYWYpID0+ICh0aGlzLnZpZXcgPSBuZXcgRGFpbHlOb3RlT3V0bGluZVZpZXcobGVhZiwgdGhpcywgdGhpcy5zZXR0aW5ncykpXHJcblx0XHQpO1xyXG5cclxuXHRcdC8vXHUzMEIzXHUzMERFXHUzMEYzXHUzMEM5XHU4RkZEXHU1MkEwXHJcblx0XHQvLyBPcGVuIE91dGxpbmU6IFx1MzBBMlx1MzBBNlx1MzBDOFx1MzBFOVx1MzBBNFx1MzBGM1x1ODg2OFx1NzkzQVx1NzUyOFx1MzA2RVx1MzBBQlx1MzBCOVx1MzBCRlx1MzBFMFx1MzBEM1x1MzBFNVx1MzBGQ1x1MzA5Mlx1OTU4Qlx1MzA0RlxyXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICdkYWlseS1ub3RlLW91dGxpbmUtb3BlbicsXHJcblx0XHRcdG5hbWU6ICdPcGVuIE91dGxpbmUnLFxyXG5cclxuXHRcdFx0Y2FsbGJhY2s6IGFzeW5jICgpPT4ge1xyXG5cdFx0XHRcdHRoaXMuY2hlY2tWaWV3KHRydWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblxyXG5cdFx0XHJcblx0XHQvLyAvLyBnZXQgVG9kYXkncyBOb3RlOiBEYWlseU5vdGVJbnRlcmZhY2VcdTMwNkV0ZXN0XHUzMDZFXHUzMDVGXHUzMDgxXHUzMDZFXHU5NThCXHU3NjdBXHU3NTI4XHUzMEIzXHUzMERFXHUzMEYzXHUzMEM5XHUzMDAyXHJcblx0XHQvLyAvLyBcdTUxNjhEYWlseU5vdGVcdTMwOTJcdTUzRDZcdTVGOTdcdTMwNTdcdTMwNUZcdTMwNkVcdTMwNjFcdTMwMDFcdTY3MkNcdTY1RTVcdTUyMDZcdTMwOTJcdTUzRDZcdTVGOTdcdTMwNTdcdTMwNjZcdTMwMDFjb25zb2xlXHUzMDZCXHU4ODY4XHU3OTNBXHUzMDU5XHUzMDhCXHUzMDAyXHJcblx0XHRcclxuXHRcdC8vIHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHQvLyBcdGlkOiAnZGFpbHktbm90ZS1vdXRsaW5lLWdldFRvZGF5c05vdGUnLFxyXG5cdFx0Ly8gXHRuYW1lOiBcIkdldCBUb2RheSdzIE5vdGVcIixcclxuXHRcdC8vIFx0Y2FsbGJhY2s6IGFzeW5jICgpPT57XHJcblx0XHQvLyBcdFx0Ly8gXHU1MTY4XHUzMDY2XHUzMDZFXHUzMEM3XHUzMEE0XHUzMEVBXHUzMEZDXHUzMENFXHUzMEZDXHUzMEM4XHUzMDkyXHU1M0Q2XHU1Rjk3XHJcblx0XHQvLyBcdFx0Y29uc3QgYWxsRGFpbHlOb3RlcyA9IGdldEFsbERhaWx5Tm90ZXMoKTtcclxuXHRcdC8vIFx0XHRjb25zb2xlLmxvZyhhbGxEYWlseU5vdGVzKTtcclxuXHRcdC8vIFx0XHRjb25zb2xlLmxvZyh0eXBlb2YgYWxsRGFpbHlOb3Rlcyk7XHJcblx0XHQvLyBcdFx0Y29uc29sZS5sb2coJ21vbWVudFx1MzA1RFx1MzA2RVx1MzA3RVx1MzA3RScsbW9tZW50KCkpO1xyXG5cdFx0Ly8gXHRcdGNvbnNvbGUubG9nKGBEYWlseU5vdGVJbnRlcmZhY2VcdTMwNkVcdTMwQURcdTMwRkNcdTMwNkVcdTVGNjJcdTVGMEZcdTMwNkJcdTMwMDJkYXktJHt3aW5kb3cubW9tZW50KCkuc3RhcnRPZignZGF5JykuZm9ybWF0KCl9YCk7XHJcblxyXG5cdFx0Ly8gXHRcdC8vXHU2NzJDXHU2NUU1XHUzMDZFXHUzMEM3XHUzMEE0XHUzMEVBXHUzMEZDXHUzMENFXHUzMEZDXHUzMEM4XHUzMDkyXHU1M0Q2XHU1Rjk3XHJcblx0XHQvLyBcdFx0Y29uc3QgdG9kYXlzTm90ZSA9IGdldERhaWx5Tm90ZShtb21lbnQoKSwgYWxsRGFpbHlOb3Rlcyk7XHJcblx0XHQvLyBcdFx0aWYgKHRvZGF5c05vdGUpe1xyXG5cdFx0Ly8gXHRcdFx0Y29uc29sZS5sb2codG9kYXlzTm90ZSlcclxuXHRcdC8vIFx0XHRcdC8vIFx1NjVFNVx1NEVEOFx1MzA2RVx1NTNENlx1NUY5N1xyXG5cdFx0Ly8gXHRcdFx0Y29uc3Qgbm90ZURhdGUgPSBnZXREYXRlRnJvbUZpbGUodG9kYXlzTm90ZSxcImRheVwiKTtcclxuXHRcdC8vIFx0XHRcdGNvbnNvbGUubG9nKGBcdTY1RTVcdTRFRDhcdTMwNkYgJHtub3RlRGF0ZX1cdTMwNjdcdTMwNTlgKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0Ly8gXHRcdFx0Y29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSh0b2RheXNOb3RlKTtcclxuXHRcdC8vIFx0XHRcdGNvbnNvbGUubG9nKCdjYWNoZTonLCBjYWNoZSk7XHJcblxyXG5cdFx0Ly8gXHRcdFx0Y29uc3Qgbm90ZSA9IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQodG9kYXlzTm90ZSk7XHJcblx0XHQvLyBcdFx0XHRjb25zb2xlLmxvZyhub3RlKTtcclxuXHJcblx0XHQvLyBcdFx0fSBlbHNlIHtcclxuXHRcdC8vIFx0XHRcdGNvbnNvbGUubG9nKCdcdTRFQ0FcdTY1RTVcdTMwNkVcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwNENcdTMwN0ZcdTMwNDJcdTMwNUZcdTMwOEFcdTMwN0VcdTMwNUJcdTMwOTMnKTtcclxuXHRcdC8vIFx0XHR9XHJcblx0XHQvLyBcdH1cclxuXHRcdC8vIH0pO1xyXG5cdFxyXG5cdC8vICB2aWV3XHUzMDZFXHU2NkY0XHU2NUIwKFx1MzBBMlx1MzBDM1x1MzBEN1x1MzBDN1x1MzBGQ1x1MzBDOFx1NjY0Mlx1NzUyOClcclxuXHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeShhc3luYygpPT57XHJcblx0XHR0aGlzLmNoZWNrVmlldyhmYWxzZSk7XHJcblx0fSlcclxuXHJcblx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cclxuXHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IERhaWx5Tm90ZU91dGxpbmVTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHQvLyBEZXZlbG9wZXIgRG9jc1x1MzA2Qlx1NUY5M1x1MzA2M1x1MzA2Nlx1MzBBQlx1MzBCOVx1MzBCRlx1MzBFMFx1MzBEM1x1MzBFNVx1MzBGQ1x1MzA5Mlx1MzBDN1x1MzBCRlx1MzBDM1x1MzBDMVxyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShEYWlseU5vdGVPdXRsaW5lVmlld1R5cGUpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcblx0XHQvLyB2MC42LjBcdTRFRTVcdTUyNERcdTMwNkVcdThBMkRcdTVCOUFcdTMwQzdcdTMwRkNcdTMwQkZcdTMwNkJcdTVCRkVcdTMwNTdcdTMwNjZcdTRFOTJcdTYzREJcdTYwMjdcdTMwOTJcdTdEQURcdTYzMDFcdTMwNTlcdTMwOEJcdTMwNUZcdTMwODFcdTMwNkVcdTVCRkVcdTVGRENcclxuXHRcdC8vIDAuNlx1RkYwRTBcdTRFRTVcdTUyNERcdTMwNkZkdXJhdGlvblx1MzA2RiBudW1iZXJcdTU3OEJcdTMwNjBcdTMwNjNcdTMwNUZcdTMwNENcdTMwMDEgZGF5fnllYXJcdTMwNkVcdTMwRDdcdTMwRURcdTMwRDFcdTMwQzZcdTMwQTNcdTMwOTJcdTYzMDFcdTMwNjRcdTMwQUFcdTMwRDZcdTMwQjhcdTMwQTdcdTMwQUZcdTMwQzhcdTMwNkJcdTU5MDlcdTY2RjRcdTMwNTdcdTMwNUZcdTMwMDJcclxuXHRcdGlmICh0eXBlb2YgdGhpcy5zZXR0aW5ncy5kdXJhdGlvbiA9PT0gXCJudW1iZXJcIil7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MuZHVyYXRpb24gPSBERUZBVUxUX1NFVFRJTkdTLmR1cmF0aW9uO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHR9XHJcblxyXG5cdGNoZWNrVmlldyA9IGFzeW5jKGFjdGl2YXRlVmlldzogYm9vbGVhbik6UHJvbWlzZTx2b2lkPiA9PiB7XHJcblxyXG5cdFx0bGV0IFtsZWFmXSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoRGFpbHlOb3RlT3V0bGluZVZpZXdUeXBlKTtcclxuXHRcdGlmICghbGVhZikge1xyXG5cdFx0XHRzd2l0Y2ggKHRoaXMuc2V0dGluZ3Mudmlld1Bvc2l0aW9uKSB7XHJcblx0XHRcdFx0Y2FzZSAncmlnaHQnOlxyXG5cdFx0XHRcdFx0bGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAnbGVmdCc6XHJcblx0XHRcdFx0XHRsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlZnRMZWFmKGZhbHNlKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ3RhYic6XHJcblx0XHRcdFx0XHRsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3RhYicpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAnc3BsaXQnOlxyXG5cdFx0XHRcdFx0bGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCdzcGxpdCcpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAncG9wb3V0JzpcclxuXHRcdFx0XHRcdGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZignd2luZG93Jyk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0XHRhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7IHR5cGU6IERhaWx5Tm90ZU91dGxpbmVWaWV3VHlwZX0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAoYWN0aXZhdGVWaWV3KSB7XHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xyXG5cdFx0fVxyXG5cdH0gXHJcblx0IFxyXG59IiwgImltcG9ydCB7IE1hcmtkb3duVmlldywgTm90aWNlLCBzZXRJY29uLCBkZWJvdW5jZSwgRGVib3VuY2VyLCBNZW51LCBWaWV3U3RhdGVSZXN1bHQsIFZpZXd9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBURmlsZX0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW1wb3J0IHsgZ2V0QWxsRGFpbHlOb3RlcywgZ2V0RGF0ZUZyb21GaWxlLCBjcmVhdGVEYWlseU5vdGUsIGdldERhdGVVSUQsIFxyXG5cdGdldEFsbFdlZWtseU5vdGVzLCBnZXRBbGxNb250aGx5Tm90ZXMsIGdldEFsbFF1YXJ0ZXJseU5vdGVzLCBnZXRBbGxZZWFybHlOb3RlcywgSUdyYW51bGFyaXR5IH0gZnJvbSBcIm9ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZmFjZVwiO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIlxyXG5cclxuaW1wb3J0IERhaWx5Tm90ZU91dGxpbmVQbHVnaW4sIHsgRGFpbHlOb3RlT3V0bGluZVNldHRpbmdzLCBPdXRsaW5lRGF0YSwgRmlsZUluZm8sIEZpbGVTdGF0dXMsIERBWVNfUEVSX1VOSVQsR1JBTlVMQVJJVFlfTElTVCwgR1JBTlVMQVJJVFlfVE9fUEVSSU9ESUNJVFksIEZJTEVJTkZPX1RPX0RJU1BMQVksIEZJTEVJTkZPX1RPX0RJU1BMQVlfREFZLCBEYXRlSW5mb30gZnJvbSAnc3JjL21haW4nO1xyXG5cclxuaW1wb3J0IHsgY3JlYXRlQW5kT3BlbkRhaWx5Tm90ZSB9IGZyb20gJ3NyYy9jcmVhdGVBbmRPcGVuRGFpbHlOb3RlJztcclxuaW1wb3J0IHsgTW9kYWxFeHRyYWN0IH0gZnJvbSAnc3JjL21vZGFsRXh0cmFjdCc7XHJcblxyXG4vLyBQZXJpb2RpYyBOb3Rlc1xyXG5pbXBvcnQge3R5cGUgQ2FsZW5kYXJTZXQsfSBmcm9tICdzcmMvcGVyaW9kaWNOb3Rlc1R5cGVzJztcclxuaW1wb3J0IHsgY3JlYXRlQW5kT3BlblBlcmlvZGljTm90ZSB9IGZyb20gJy4vY3JlYXRlQW5kT3BlblBlcmlvZGljTm90ZSc7XHJcblxyXG5pbXBvcnQgeyBkcmF3VUkgfSBmcm9tICdzcmMvZHJhd1VJJztcclxuaW1wb3J0IHsgZ2V0VGFyZ2V0RmlsZXMsIGdldFRhcmdldFBlcmlvZGljTm90ZXMgfSBmcm9tICcuL2dldFRhcmdldEZpbGVzJztcclxuaW1wb3J0IHsgZ2V0RmlsZUluZm8sIGdldE91dGxpbmUgfSBmcm9tICcuL2dldE91dGxpbmUnO1xyXG5pbXBvcnQgeyBkcmF3T3V0bGluZSB9IGZyb20gJy4vY29uc3RydWN0RE9NJztcclxuXHJcbmltcG9ydCB7IGdldEFQSSB9IGZyb20gXCJvYnNpZGlhbi1kYXRhdmlld1wiO1xyXG5cclxuXHJcblxyXG5leHBvcnQgY29uc3QgRGFpbHlOb3RlT3V0bGluZVZpZXdUeXBlID0gJ2RhaWx5LW5vdGUtb3V0bGluZSc7XHJcblxyXG4vLyBTdGF0ZVx1MzA2N1x1NzNGRVx1NTcyOFx1ODg2OFx1NzkzQVx1NEUyRFx1MzA2RVx1N0M5Mlx1NUVBNlx1MzAwMVx1MzBBQlx1MzBFQ1x1MzBGM1x1MzBDMFx1MzBGQ1x1MzBCQlx1MzBDM1x1MzBDOFx1MzA5Mlx1NEZERFx1NjMwMVxyXG5pbnRlcmZhY2UgSURhaWx5Tm90ZU91dGxpbmVTdGF0ZSB7XHJcblx0YWN0aXZlU2V0OiBudW1iZXI7XHJcblx0YWN0aXZlR3JhbnVsYXJpdHk6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIERhaWx5Tm90ZU91dGxpbmVWaWV3IGV4dGVuZHMgSXRlbVZpZXcgaW1wbGVtZW50cyBJRGFpbHlOb3RlT3V0bGluZVN0YXRlIHtcclxuXHRcclxuXHRwbHVnaW46IERhaWx5Tm90ZU91dGxpbmVQbHVnaW47XHJcblx0c2V0dGluZ3M6RGFpbHlOb3RlT3V0bGluZVNldHRpbmdzO1xyXG5cclxuXHRhbGxEYWlseU5vdGVzOiBSZWNvcmQ8c3RyaW5nLFRGaWxlPjtcclxuXHRcclxuXHR0YXJnZXRGaWxlczogVEZpbGVbXTtcclxuXHQvLyBmaWxlU3RhdHVzOiBGaWxlU3RhdHVzW107XHJcblx0ZmlsZUluZm86IEZpbGVJbmZvW107XHJcblxyXG5cdGRhdGVJbmZvOiBEYXRlSW5mb1tdO1xyXG5cdFxyXG5cdHNlYXJjaFJhbmdlOiB7XHJcblx0XHRsYXRlc3Q6IG1vbWVudCxcclxuXHRcdGVhcmxpZXN0OiBtb21lbnRcclxuXHR9ID0ge1xyXG5cdFx0bGF0ZXN0OiB3aW5kb3cubW9tZW50KCksXHJcblx0XHRlYXJsaWVzdDogd2luZG93Lm1vbWVudCgpXHJcblx0fTtcclxuXHRvdXRsaW5lRGF0YTogT3V0bGluZURhdGFbXVtdO1xyXG5cclxuXHRmbGFnUmVkcmF3OiBib29sZWFuO1xyXG5cdGZsYWdSZWdldEFsbDogYm9vbGVhbjtcclxuXHJcblx0ZXh0cmFjdE1vZGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHRleHRyYWN0VGFzazogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuXHQvL1x1NTE2OFx1MzBENVx1MzBBMVx1MzBBNFx1MzBFQlx1MzA2RVx1NjI5OFx1MzA4QVx1MzA1Rlx1MzA1Rlx1MzA3RlxyXG5cdGNvbGxhcHNlQWxsOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG5cdC8vIFBlcmlvZGljIE5vdGVzXHJcblx0dmVyUE46IG51bWJlcjsgIC8vIFBlcmlvZGljIE5vdGVzIHBsdWdpblx1MzA2RVx1MzBEMFx1MzBGQ1x1MzBCOFx1MzBFN1x1MzBGMyAgMFx1RkYxQW9mZiAgMVx1RkYxQTwxLjAuMCAgMjo+PTEuMC4wIFxyXG5cdGNhbGVuZGFyU2V0czogQ2FsZW5kYXJTZXRbXTtcclxuXHRhY3RpdmVTZXQ6IG51bWJlciA9IDA7IFxyXG5cdGFjdGl2ZUdyYW51bGFyaXR5OiBudW1iZXIgPSAwOyAvLyBkYXkgfCB3ZWVrIHwgbW9udGggfCBxdWFydGVyIHwgeWVhciBHUkFOVUxBUklUWV9MSVNUXHUzMDZFXHU2REZCXHUzMDQ4XHU1QjU3XHUzMDY4XHUzMDU3XHUzMDY2XHJcbiAgXHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRsZWFmOiBXb3Jrc3BhY2VMZWFmLFxyXG5cdFx0cGx1Z2luOiBEYWlseU5vdGVPdXRsaW5lUGx1Z2luLFxyXG5cdFx0c2V0dGluZ3M6IERhaWx5Tm90ZU91dGxpbmVTZXR0aW5ncyxcclxuXHQpIHtcclxuXHRcdHN1cGVyKGxlYWYpO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcblx0fVxyXG4gIFxyXG5cdGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gRGFpbHlOb3RlT3V0bGluZVZpZXdUeXBlO1xyXG5cdH1cclxuICBcclxuXHRnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuICdEYWlseSBOb3RlIE91dGxpbmUnO1xyXG5cdH1cclxuICBcclxuXHRnZXRJY29uKCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gJ2NhbGVuZGFyLWNsb2NrJztcclxuXHR9XHJcblxyXG5cdFxyXG5cdGFzeW5jIG9uT3Blbigpe1xyXG5cclxuXHRcdHRoaXMuaW5pdFZpZXcoKTtcclxuXHRcdC8vICBcdTUyMURcdTU2REVcdTMwNkVcdTMwQzdcdTMwQTRcdTMwRUFcdTMwRkNcdTMwQ0VcdTMwRkNcdTMwQzhcdTYzQTJcdTdEMjJcdTUxRTZcdTc0MDZcdTMwNkZpbml0VmlldygpXHUzMDZCXHU3OUZCXHU1MkQ1XHUzMDU3XHUzMDAxXHU1QjlGXHU4ODRDXHU1MjREXHUzMDZCXHUzMDhGXHUzMDVBXHUzMDRCXHUzMDZCXHUzMEE2XHUzMEE4XHUzMEE0XHUzMEM4KGJvb3REZWxheSlcdTMwOTJcdTUxNjVcdTMwOENcdTMwNUZcdTMwMDJcclxuXHRcdC8vICBcdTMwNURcdTMwNDZcdTMwNTdcdTMwNkFcdTMwNDRcdTMwNjhcdThENzdcdTUyRDVcdTY2NDJcdTMwNkJcdTUxNjhcdTMwQzdcdTMwQTRcdTMwRUFcdTMwRkNcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwNkVcdTMwQzdcdTMwRkNcdTMwQkZcdTUzRDZcdTVGOTdcdTMwNkJcdTU5MzFcdTY1NTdcdTMwNTlcdTMwOEJcdTMwODhcdTMwNDZcdTMwNjBcdTMwNjNcdTMwNUZcdTMwNUZcdTMwODFcdTMwMDJcclxuXHJcblx0XHQvL1x1ODFFQVx1NTJENVx1NjZGNFx1NjVCMFx1MzA2RVx1MzA1Rlx1MzA4MVx1MzA2RVx1MzBDN1x1MzBGQ1x1MzBCRlx1NTkwOVx1NjZGNFx1MzAwMVx1MzBENVx1MzBBMVx1MzBBNFx1MzBFQlx1OEZGRFx1NTJBMC9cdTUyNEFcdTk2NjRcdTMwNkVcdTc2RTNcdTg5OTYgb2JzZXJ2ZSBmaWxlIGNoYW5nZS9jcmVhdGUvZGVsZXRlXHJcblx0XHRjb25zdCBkZWJvdW5jZXJSZXF1ZXN0UmVmcmVzaDpEZWJvdW5jZXI8W10+ID0gZGVib3VuY2UodGhpcy5hdXRvUmVmcmVzaCwyMDAwLHRydWUpO1xyXG5cdFx0dGhpcy5mbGFnUmVkcmF3ID0gZmFsc2U7XHJcblx0XHR0aGlzLmZsYWdSZWdldEFsbCA9IGZhbHNlOyBcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLm9uKCdjaGFuZ2VkJywgKGZpbGUpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMudGFyZ2V0RmlsZXM/LmluY2x1ZGVzKGZpbGUpKXtcclxuXHRcdFx0XHR0aGlzLmZsYWdSZWRyYXcgPSB0cnVlO1xyXG5cdFx0XHRcdGRlYm91bmNlclJlcXVlc3RSZWZyZXNoLmNhbGwodGhpcyk7XHJcblx0XHRcdH1cclxuXHRcdH0pKTtcclxuXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAudmF1bHQub24oJ2NyZWF0ZScsKGZpbGUpPT57XHJcblx0XHRcdHRoaXMuZmxhZ1JlZ2V0QWxsID0gdHJ1ZTtcclxuXHRcdFx0ZGVib3VuY2VyUmVxdWVzdFJlZnJlc2guY2FsbCh0aGlzKTtcclxuXHRcdH0pKTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC52YXVsdC5vbignZGVsZXRlJywoZmlsZSk9PntcclxuXHRcdFx0dGhpcy5mbGFnUmVnZXRBbGwgPSB0cnVlO1xyXG5cdFx0XHRkZWJvdW5jZXJSZXF1ZXN0UmVmcmVzaC5jYWxsKHRoaXMpO1xyXG5cdFx0fSkpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgb25DbG9zZSgpe1xyXG5cdFx0Ly8gTm90aGluIHRvIGNsZWFuIHVwXHJcblx0fVxyXG5cclxuXHQvLyBodHRwczovL2xpYW1jYS5pbi9PYnNpZGlhbi9BUEkrRkFRL3ZpZXdzL3BlcnNpc3RpbmcreW91cit2aWV3K3N0YXRlXHJcblx0YXN5bmMgc2V0U3RhdGUoc3RhdGU6IElEYWlseU5vdGVPdXRsaW5lU3RhdGUsIHJlc3VsdDpWaWV3U3RhdGVSZXN1bHQpOlByb21pc2U8dm9pZD57XHJcblx0XHRpZiAoc3RhdGUuYWN0aXZlU2V0KXtcclxuXHRcdFx0dGhpcy5hY3RpdmVTZXQgPSBzdGF0ZS5hY3RpdmVTZXQ7XHJcblx0XHR9XHJcblx0XHRpZiAoc3RhdGUuYWN0aXZlR3JhbnVsYXJpdHkpe1xyXG5cdFx0XHR0aGlzLmFjdGl2ZUdyYW51bGFyaXR5ID0gc3RhdGUuYWN0aXZlR3JhbnVsYXJpdHk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gc3VwZXIuc2V0U3RhdGUoc3RhdGUsIHJlc3VsdCk7XHJcblx0fVxyXG5cclxuXHRnZXRTdGF0ZSgpOiBJRGFpbHlOb3RlT3V0bGluZVN0YXRlIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGFjdGl2ZVNldDogdGhpcy5hY3RpdmVTZXQsXHJcblx0XHRcdGFjdGl2ZUdyYW51bGFyaXR5OiB0aGlzLmFjdGl2ZUdyYW51bGFyaXR5LFxyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYXN5bmMgaW5pdFZpZXcoKSB7XHJcblx0XHRhd2FpdCB0aGlzLmJvb3REZWxheSgpOyAvL1x1NUMxMVx1MzA1N1x1NUY4NVx1MzA1Rlx1MzA2QVx1MzA0NFx1MzA2OFx1OEQ3N1x1NTJENVx1NzZGNFx1NUY4Q1x1MzA2RkRhaWx5IE5vdGVcdTMwNkVcdTUzRDZcdTVGOTdcdTMwNkJcdTU5MzFcdTY1NTdcdTMwNTlcdTMwOEJcdTMwODhcdTMwNDZcdTMwNjBcclxuXHRcdHRoaXMuY29sbGFwc2VBbGwgPSB0aGlzLnNldHRpbmdzLmNvbGxhcHNlQWxsQXRTdGFydHVwO1xyXG5cdFx0XHJcblx0XHR0aGlzLnZlclBOID0gYXdhaXQgdGhpcy5jaGVja1BlcmlvZGljTm90ZXMoKTtcclxuXHRcdHRoaXMucmVzZXRTZWFyY2hSYW5nZSgpO1xyXG5cdFx0XHJcblx0XHR0aGlzLnJlZnJlc2hWaWV3KHRydWUsIHRydWUsIHRydWUpO1xyXG5cdFxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhc3luYyBib290RGVsYXkoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRyZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7IHNldFRpbWVvdXQocmVzb2x2ZSwgMzAwKTt9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYXN5bmMgYXV0b1JlZnJlc2goKXtcclxuXHRcdGlmICghKHRoaXMuZmxhZ1JlZHJhdyB8fCB0aGlzLmZsYWdSZWdldEFsbCkpe1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5yZWZyZXNoVmlldyh0aGlzLmZsYWdSZWdldEFsbCwgdGhpcy5mbGFnUmVnZXRBbGwsIHRydWUpO1xyXG5cdFx0dGhpcy5mbGFnUmVnZXRBbGwgPSBmYWxzZTtcclxuXHRcdHRoaXMuZmxhZ1JlZHJhdyA9IGZhbHNlO1xyXG5cdH1cclxuXHJcblx0Ly8gXHUzMEVBXHUzMEQ1XHUzMEVDXHUzMEMzXHUzMEI3XHUzMEU1XHUzMEJCXHUzMEYzXHUzMEJGXHUzMEZDXHJcblx0Ly8gcmVnZXRBbGxcdTMwNEN0cnVlOiBcdTUxNjhcdTMwQzdcdTMwQTRcdTMwRUFcdTMwRkNcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwOTJcdTUzRDZcdTVGOTdcdTMwNTdcdTc2RjRcdTMwNTlcclxuXHQvLyBnZXRUYXJnZXRcdTMwNEN0cnVlOiBcdTczRkVcdTU3MjhcdTMwNkVcdTYzQTJcdTdEMjJcdTdCQzRcdTU2RjJcdTMwNkJcdTU0MkJcdTMwN0VcdTMwOENcdTMwOEJcdTMwQzdcdTMwQTRcdTMwRUFcdTMwRkNcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwOTJcdTcyNzlcdTVCOUFcclxuXHQvLyBnZXRPdXRsaW5lXHUzMDRDdHJ1ZTogXHU1QkZFXHU4QzYxXHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHU3RkE0XHUzMDZFXHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHU2MEM1XHU1ODMxXHUzMDAxXHUzMEEyXHUzMEE2XHUzMEM4XHUzMEU5XHUzMEE0XHUzMEYzXHU2MEM1XHU1ODMxXHUzMDkyXHU1M0Q2XHU1Rjk3XHJcblx0Ly8gXHUzMDVEXHUzMDZFXHU1RjhDVUlcdTkwRThcdTUyMDZcdTMwNjhcdTMwQTJcdTMwQTZcdTMwQzhcdTMwRTlcdTMwQTRcdTMwRjNcdTkwRThcdTUyMDZcdTMwOTJcdTYzQ0ZcdTc1M0JcclxuXHRhc3luYyByZWZyZXNoVmlldyhmbGFnUmVnZXRBbGw6IGJvb2xlYW4sIGZsYWdHZXRUYXJnZXQ6Ym9vbGVhbiwgZmxhZ0dldE91dGxpbmU6Ym9vbGVhbil7XHJcblx0XHRjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLnNob3dEZWJ1Z0luZm8pe1xyXG5cdFx0XHRjb25zb2xlLmxvZygnRE5POnN0YXJ0IHJlZnJlc2hpbmcgdmlldy4gQ2FsZW5kYXJTZXRzOicsdGhpcy5jYWxlbmRhclNldHMpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy52ZXJQTiA9IGF3YWl0IHRoaXMuY2hlY2tQZXJpb2RpY05vdGVzKCk7XHJcblxyXG5cdFx0aWYgKHRoaXMudmVyUE4gIT0gMil7XHJcblx0XHRcdC8vIGNvcmUgZGFpbHkgbm90ZS8gcGVyaW9kaWMgbm90ZXMgcGx1Z2luIHYwLnggXHUzMDZFXHU1ODM0XHU1NDA4XHJcblx0XHRcdGlmIChmbGFnUmVnZXRBbGwpe1xyXG5cdFx0XHRcdHRoaXMuYWxsRGFpbHlOb3RlcyA9IHRoaXMuZ2V0QWxsTm90ZXMoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gYXdhaXQgdGhpcy50ZXN0QmFja2xpbmtzKCk7XHJcblxyXG5cdFx0XHRpZiAoZmxhZ0dldFRhcmdldCl7XHJcblx0XHRcdFx0dGhpcy50YXJnZXRGaWxlcyA9IGdldFRhcmdldEZpbGVzLmNhbGwodGhpcywgdGhpcy5hbGxEYWlseU5vdGVzLCBHUkFOVUxBUklUWV9MSVNUW3RoaXMuYWN0aXZlR3JhbnVsYXJpdHldKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZihmbGFnR2V0T3V0bGluZSl7XHJcblx0XHRcdFx0dGhpcy5maWxlSW5mbyA9IGF3YWl0IGdldEZpbGVJbmZvLmNhbGwodGhpcywgdGhpcy50YXJnZXRGaWxlcyk7XHJcblx0XHRcdFx0dGhpcy5vdXRsaW5lRGF0YSA9IGF3YWl0IGdldE91dGxpbmUuY2FsbCh0aGlzLCB0aGlzLnRhcmdldEZpbGVzLHRoaXMuZmlsZUluZm8pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGRyYXdVSS5jYWxsKHRoaXMpO1xyXG5cdFx0XHRkcmF3T3V0bGluZS5jYWxsKHRoaXMsIHRoaXMudGFyZ2V0RmlsZXMsIHRoaXMuZmlsZUluZm8sIHRoaXMub3V0bGluZURhdGEpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gcGVyaW9kaWMgbm90ZXMgcGx1Z2luIHYxLnhcdTVCRkVcdTVGRENcclxuXHRcdFx0aWYgKCF0aGlzLmNhbGVuZGFyU2V0c1t0aGlzLmFjdGl2ZVNldF0pe1xyXG5cdFx0XHRcdHRoaXMuYWN0aXZlU2V0ID0gMDtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIXRoaXMuY2FsZW5kYXJTZXRzW3RoaXMuYWN0aXZlU2V0XVtHUkFOVUxBUklUWV9MSVNUW3RoaXMuYWN0aXZlR3JhbnVsYXJpdHldXT8uZW5hYmxlZCl7XHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2hvd0RlYnVnSW5mbyl7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnRE5POiBDYWxlbmRlciBzZXQgaXMgbm90IGVuYWJsZWQuIHRoaXMuYWN0aXZlR3JhbnVsYXJpdHkgaXMgc2V0IHRvIDAuIENhbGVuZGFyc2V0cywgdGhpcy5hY3RpdmVTZXQsIHRoaXMuYWN0aXZlR3JhbnVsYXJpdHk6Jyx0aGlzLmNhbGVuZGFyU2V0cywgdGhpcy5hY3RpdmVTZXQsIHRoaXMuYWN0aXZlR3JhbnVsYXJpdHkpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0aGlzLmFjdGl2ZUdyYW51bGFyaXR5ID0gMDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gYXdhaXQgdGhpcy50ZXN0QmFja2xpbmtzKCk7XHJcblxyXG5cdFx0XHRpZiAoZmxhZ0dldFRhcmdldCl7XHJcblx0XHRcdFx0dGhpcy50YXJnZXRGaWxlcyA9IGdldFRhcmdldFBlcmlvZGljTm90ZXMuY2FsbCh0aGlzLCB0aGlzLmNhbGVuZGFyU2V0c1t0aGlzLmFjdGl2ZVNldF0sIEdSQU5VTEFSSVRZX0xJU1RbdGhpcy5hY3RpdmVHcmFudWxhcml0eV0pXHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKGZsYWdHZXRPdXRsaW5lKXtcclxuXHRcdFx0XHR0aGlzLmZpbGVJbmZvID0gYXdhaXQgZ2V0RmlsZUluZm8uY2FsbCh0aGlzLCB0aGlzLnRhcmdldEZpbGVzKTtcclxuXHRcdFx0XHR0aGlzLm91dGxpbmVEYXRhID0gYXdhaXQgZ2V0T3V0bGluZS5jYWxsKHRoaXMsIHRoaXMudGFyZ2V0RmlsZXMsdGhpcy5maWxlSW5mbyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGRyYXdVSS5jYWxsKHRoaXMpO1xyXG5cdFx0XHRkcmF3T3V0bGluZS5jYWxsKHRoaXMsIHRoaXMudGFyZ2V0RmlsZXMsIHRoaXMuZmlsZUluZm8sIHRoaXMub3V0bGluZURhdGEpO1xyXG5cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLnNob3dEZWJ1Z0luZm8pe1xyXG5cdFx0XHRjb25zb2xlLmxvZyAoJ0ROTzogdGltZSByZXF1aXJlZCB0byByZWZyZXNoIHZpZXc6ICcsIGVuZFRpbWUgLSBzdGFydFRpbWUpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gXHVGRjNCIFx1RkYzRFx1MzA2RVx1OTY2NFx1NTNCQlxyXG5cdHByaXZhdGUgc3RyaXBNYXJrZG93blN5bWJvbCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuICh0ZXh0LnJlcGxhY2UoLyhcXFtcXFspfChcXF1cXF0pL2csJycpKTtcclxuXHR9XHJcblxyXG5cdC8vIFx1NjNBMlx1N0QyMlx1N0JDNFx1NTZGMlx1MzA5Mlx1OEEyRFx1NUI5QVx1MzA2Qlx1NTQwOFx1MzA4Rlx1MzA1Qlx1MzA2Nlx1NTIxRFx1NjcxRlx1NTMxNlxyXG5cdHB1YmxpYyByZXNldFNlYXJjaFJhbmdlKCk6dm9pZCB7XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5pbml0aWFsU2VhcmNoVHlwZSA9PSAnZm9yd2FyZCcpe1xyXG5cdFx0XHRjb25zdCBvbnNldERhdGUgPSB3aW5kb3cubW9tZW50KHRoaXMuc2V0dGluZ3Mub25zZXQsXCJZWVlZLU1NLUREXCIpO1xyXG5cdFx0XHRpZiAob25zZXREYXRlLmlzVmFsaWQoKSl7XHJcblx0XHRcdFx0dGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdCA9IG9uc2V0RGF0ZTtcclxuXHRcdFx0XHR0aGlzLnNlYXJjaFJhbmdlLmxhdGVzdCA9IG9uc2V0RGF0ZS5jbG9uZSgpLmFkZCh0aGlzLnNldHRpbmdzLmR1cmF0aW9uLmRheSAtMSwnZGF5cycpO1xyXG5cdFx0XHR9IGVsc2UgeyAgXHJcblx0XHRcdFx0Ly8gb25zZXREYXRlXHUzMDRDXHU0RTBEXHU2QjYzXHUzMDZBXHUzMDg5XHU1RjUzXHU2NUU1XHU4RDc3XHU3MEI5XHUzMDZFYmFja3dhcmQgc2VhcmNoXHUzMDkyXHU4ODRDXHUzMDQ2XHJcblx0XHRcdFx0bmV3IE5vdGljZSgnb25zZXQgZGF0ZSBpcyBpbnZhbGlkJyk7XHJcblx0XHRcdFx0dGhpcy5zZWFyY2hSYW5nZS5sYXRlc3QgPSB3aW5kb3cubW9tZW50KCkuc3RhcnRPZignZGF5Jyk7XHJcblx0XHRcdFx0dGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdCA9IHdpbmRvdy5tb21lbnQoKS5zdGFydE9mKCdkYXknKS5zdWJ0cmFjdCh0aGlzLnNldHRpbmdzLmR1cmF0aW9uLmRheSAtIDEsJ2RheXMnKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmluaXRpYWxTZWFyY2hUeXBlID09ICdiYWNrd2FyZCcpe1xyXG5cdFx0XHR0aGlzLnNlYXJjaFJhbmdlLmxhdGVzdCA9IHdpbmRvdy5tb21lbnQoKS5zdGFydE9mKCdkYXknKTtcclxuXHRcdFx0dGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdCA9IHdpbmRvdy5tb21lbnQoKS5zdGFydE9mKCdkYXknKS5zdWJ0cmFjdCh0aGlzLnNldHRpbmdzLmR1cmF0aW9uLmRheSAtIDEgLCdkYXlzJyk7XHJcblx0XHR9IFxyXG5cdH1cclxuXHJcblx0Ly8gUGVyaW9kaWMgTm90ZXNcdTMwNkVcdTcyQjZcdTYxNEJcdTMwOTJcdTMwQzFcdTMwQTdcdTMwQzNcdTMwQUYgIHJldHVybiAwOlx1MzBBQVx1MzBENSAxOnYwLngueCAyOnYxLjAuMC1cclxuXHRwcml2YXRlIGFzeW5jIGNoZWNrUGVyaW9kaWNOb3RlcygpOiBQcm9taXNlPG51bWJlcj4ge1xyXG5cdFx0XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5zaG93RGVidWdJbmZvKXtcclxuXHRcdFx0Y29uc29sZS5sb2coJ0ROTzpjaGVja2luZyB0aGUgdmVyc2lvbiBvZiBQZXJpb2RpYyBOb3RlcyBwbHVnaW4nKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoYXBwLnBsdWdpbnMucGx1Z2luc1sncGVyaW9kaWMtbm90ZXMnXSl7XHJcblx0XHRcdGlmIChOdW1iZXIoYXBwLnBsdWdpbnMucGx1Z2luc1sncGVyaW9kaWMtbm90ZXMnXS5tYW5pZmVzdC52ZXJzaW9uLnNwbGl0KFwiLlwiKVswXSkgPj0xKXtcclxuXHRcdFx0XHQvLyB2ZXIgMS4wLjBcdTRFRTVcdTRFMEFcclxuXHRcdFx0XHR0aGlzLmNhbGVuZGFyU2V0cyA9IHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik/LmNhbGVuZGFyU2V0TWFuYWdlci5nZXRDYWxlbmRhclNldHMoKTtcclxuXHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2hvd0RlYnVnSW5mbyl7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygncmV0dXJuIG9mIHRoaXMuYXBwLlBOLmNhbGVuZGFyU2V0TWFuYWdlci5nZXRDYWxlbmRhclNldHMoKTogJyx0aGlzLmFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpPy5jYWxlbmRhclNldE1hbmFnZXIuZ2V0Q2FsZW5kYXJTZXRzKCkpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ3JldHVybiBvZiB3aW5kb3cuYXBwLlBOLmNhbGVuZGFyU2V0TWFuYWdlci5nZXRDYWxlbmRhclNldHMoKTogJyx3aW5kb3cuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik/LmNhbGVuZGFyU2V0TWFuYWdlci5nZXRDYWxlbmRhclNldHMoKSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmICghdGhpcy5jYWxlbmRhclNldHMubGVuZ3RoKXtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoJ2ZhaWxlZCB0byBpbXBvcnQgY2FsZW5kYXIgc2V0cyB0byBEYWlseSBOb3RlIE91dGxpbmUnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y29uc3QgaW5pdGlhbEdyYW51bGFyaXR5ID0gdGhpcy5hY3RpdmVHcmFudWxhcml0eTtcclxuXHRcdFx0XHR3aGlsZSAoIXRoaXMuY2FsZW5kYXJTZXRzW3RoaXMuYWN0aXZlU2V0XVtHUkFOVUxBUklUWV9MSVNUW3RoaXMuYWN0aXZlR3JhbnVsYXJpdHldXT8uZW5hYmxlZCl7XHJcblx0XHRcdFx0XHR0aGlzLmFjdGl2ZUdyYW51bGFyaXR5ID0gKHRoaXMuYWN0aXZlR3JhbnVsYXJpdHkgKyAxKSAlIEdSQU5VTEFSSVRZX0xJU1QubGVuZ3RoO1xyXG5cdFx0XHRcdFx0aWYodGhpcy5hY3RpdmVHcmFudWxhcml0eSA9PSBpbml0aWFsR3JhbnVsYXJpdHkpe1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLnJlcXVlc3RTYXZlTGF5b3V0KCk7XHJcblxyXG5cdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnNob3dEZWJ1Z0luZm8pe1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ29idGFpbmVkIHZlclBOOiAnLCB0aGlzLnZlclBOICwnIGNhbGVuZGFyU2V0czogJywgdGhpcy5jYWxlbmRhclNldHMpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gMjtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyB2ZXIgMC54LnhcclxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmNhbGVuZGFyU2V0c0VuYWJsZWQgPSBmYWxzZTtcclxuXHRcdFx0XHR0aGlzLmFjdGl2ZVNldCA9IDA7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblxyXG5cdFx0XHRcdGNvbnN0IGluaXRpYWxHcmFudWxhcml0eSA9IHRoaXMuYWN0aXZlR3JhbnVsYXJpdHk7XHJcblx0XHRcdFx0d2hpbGUgKCF0aGlzLmFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpLnNldHRpbmdzPy5bR1JBTlVMQVJJVFlfVE9fUEVSSU9ESUNJVFlbR1JBTlVMQVJJVFlfTElTVFt0aGlzLmFjdGl2ZUdyYW51bGFyaXR5XV1dPy5lbmFibGVkKXtcclxuXHRcdFx0XHRcdHRoaXMuYWN0aXZlR3JhbnVsYXJpdHkgPSAodGhpcy5hY3RpdmVHcmFudWxhcml0eSArIDEpICUgR1JBTlVMQVJJVFlfTElTVC5sZW5ndGg7XHJcblx0XHRcdFx0XHRpZih0aGlzLmFjdGl2ZUdyYW51bGFyaXR5ID09IGluaXRpYWxHcmFudWxhcml0eSl7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UucmVxdWVzdFNhdmVMYXlvdXQoKTtcclxuXHRcdFx0XHRyZXR1cm4gMTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gUGVyaW9kaWMgTm90ZXNcdTMwNENcdTMwQUFcdTMwRDVcdTMwNEJcdTMwQTRcdTMwRjNcdTMwQjlcdTMwQzhcdTMwRkNcdTMwRUJcdTMwNTVcdTMwOENcdTMwNjZcdTMwNDRcdTMwNkFcdTMwNDRcclxuXHRcdFx0dGhpcy5zZXR0aW5ncy5wZXJpb2RpY05vdGVzRW5hYmxlZCA9IGZhbHNlO1xyXG5cdFx0XHR0aGlzLnNldHRpbmdzLmNhbGVuZGFyU2V0c0VuYWJsZWQgPSBmYWxzZTtcclxuXHRcdFx0dGhpcy5hY3RpdmVHcmFudWxhcml0eSA9IDA7XHJcblx0XHRcdHRoaXMuYWN0aXZlU2V0ID0gMDtcclxuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdHJldHVybiAwO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gZ3JhbnVsYXJpdHlcdTMwNkJcdTVGOTNcdTMwNjNcdTMwNjZcdTUxNjhcdTMwNjZcdTMwNkVkYWlseS93ZWVrbHkvbW9udGhseS9xdWFydGVybHkveWVhcmx5XHUzMENFXHUzMEZDXHUzMEM4XHUzMDkyXHU1M0Q2XHU1Rjk3XHJcblx0Z2V0QWxsTm90ZXMoKTpSZWNvcmQ8c3RyaW5nLFRGaWxlPiB7XHJcblx0XHRzd2l0Y2ggKHRoaXMuYWN0aXZlR3JhbnVsYXJpdHkpe1xyXG5cdFx0XHRjYXNlIDA6XHJcblx0XHRcdFx0cmV0dXJuIGdldEFsbERhaWx5Tm90ZXMoKTtcclxuXHRcdFx0Y2FzZSAxOlxyXG5cdFx0XHRcdHJldHVybiBnZXRBbGxXZWVrbHlOb3RlcygpO1xyXG5cdFx0XHRjYXNlIDI6XHJcblx0XHRcdFx0cmV0dXJuIGdldEFsbE1vbnRobHlOb3RlcygpO1xyXG5cdFx0XHRjYXNlIDM6XHJcblx0XHRcdFx0cmV0dXJuIGdldEFsbFF1YXJ0ZXJseU5vdGVzKCk7XHJcblx0XHRcdGNhc2UgNDpcclxuXHRcdFx0XHRyZXR1cm4gZ2V0QWxsWWVhcmx5Tm90ZXMoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIFx1MzBEMFx1MzBDM1x1MzBBRlx1MzBFQVx1MzBGM1x1MzBBRlx1MzAwMWRhdGF2aWV3XHUzMDZFXHUzMEM2XHUzMEI5XHUzMEM4XHU3NTI4XHJcblx0Ly8gYXN5bmMgdGVzdEJhY2tsaW5rcygpOlByb21pc2U8dm9pZD57XHJcblxyXG5cdC8vIFx0Y29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcblx0Ly8gXHQvLyBcdTY3MkFcdTg5RTNcdTZDN0FcdTMwRUFcdTMwRjNcdTMwQUZcclxuXHQvLyBcdGxldCB1bnJlc29sdmVkTGlua3MgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLnVucmVzb2x2ZWRMaW5rcztcclxuXHQvLyBcdGNvbnNvbGUubG9nKCdcdTY3MkFcdTg5RTNcdTZDN0FcdTMwRUFcdTMwRjNcdTMwQUYnLHVucmVzb2x2ZWRMaW5rcyk7XHJcblx0Ly8gXHQvLyBcdTcyNzlcdTVCOUFcdTMwNkVcdTY3MkFcdTg5RTNcdTZDN0FcdTMwRUFcdTMwRjNcdTMwQUZcdTMwOTJcdTU0MkJcdTMwODBcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwOTJcdTYyQkRcdTUxRkFcclxuXHQvLyBcdGNvbnN0IHJlc3VsdCA9IE9iamVjdC5lbnRyaWVzKHVucmVzb2x2ZWRMaW5rcykuZmlsdGVyKCh2YWx1ZUFycmF5KT0+IHZhbHVlQXJyYXlbMV0uaGFzT3duUHJvcGVydHkoXCIyMDIzLTEyLTIyX0ZyaWRheVwiKSk7XHJcblxyXG5cdC8vIFx0Y29uc3QgZW5kVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG5cdC8vIFx0Y29uc29sZS5sb2coJ1x1NjcyQVx1ODlFM1x1NkM3QVx1MzBFQVx1MzBGM1x1MzBBRlx1NjNBMlx1N0QyMlx1NjI0MFx1ODk4MVx1NjY0Mlx1OTU5MycsIGVuZFRpbWUgLSBzdGFydFRpbWUpO1xyXG5cclxuXHQvLyBcdGNvbnN0IHNUaW1lMiA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG5cdC8vIFx0Ly9kYXRhdmlld0FQSSBcdTUzRDZcdTVGOTdcclxuXHQvLyBcdGNvbnN0IGRhdGF2aWV3QVBJPSBnZXRBUEkoKTtcclxuXHQvLyBcdGNvbnN0IHRlc3RWYWx1ZSA9IGF3YWl0IGRhdGF2aWV3QVBJLnBhZ2VzKCctXCJEYWlseVwiJyk7XHJcblx0Ly8gXHRjb25zb2xlLmxvZygnRGFpbHlcdTMwOTJcdTk2NjRcdTMwNEZcdTMwRDVcdTMwQTFcdTMwQTRcdTMwRUInLHRlc3RWYWx1ZSk7XHJcblx0Ly8gXHRjb25zdCBlVGltZTIgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuXHQvLyBcdGNvbnNvbGUubG9nKCdkYXRhdmlldyBwYWdlc1x1NTNENlx1NUY5N1x1NjI0MFx1ODk4MVx1NjY0Mlx1OTU5MycsIGVUaW1lMi1zVGltZTIpO1xyXG5cclxuXHQvLyBcdGNvbnN0IHNUaW1lMyA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG5cdC8vIFx0Ly8gXHU3Mjc5XHU1QjlBXHUzMDZFbWRheVx1MzA5Mlx1NjMwMVx1MzA2NFx1MzBENVx1MzBBMVx1MzBBNFx1MzBFQlx1MzA2RVx1NjkxQ1x1N0QyMlxyXG5cdC8vIFx0Ly9sZXQgdGVzdFZhbHVlMiA9IFtdO1xyXG5cdC8vIFx0Ly8gZm9yIChsZXQgaSA9IDA7IGk8IDU2OyBpKyspe1xyXG5cdC8vIFx0Ly8gXHRjb25zdCBkdnF1ZXJ5OnN0cmluZyA9ICdMSVNUIFdIRVJFIGZpbGUubWRheSA9IGRhdGUodG9kYXkpIC0gZHVyKCcgKyBpICsgJyBkKSc7XHJcblx0Ly8gXHQvLyBcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGF2aWV3QVBJLnF1ZXJ5KGR2cXVlcnkpO1xyXG5cdC8vIFx0Ly8gXHR0ZXN0VmFsdWUyLnB1c2gocmVzdWx0LnZhbHVlLnZhbHVlcyk7XHJcblx0Ly8gXHQvLyB9XHJcblx0Ly8gXHQvL2NvbnNvbGUubG9nKCdcdTMwQzdcdTMwRkNcdTMwQkZcdTMwRDNcdTMwRTVcdTMwRkMyJyx0ZXN0VmFsdWUyKTtcclxuXHQvLyBcdGNvbnN0IGVUaW1lMyA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG5cdC8vIFx0Y29uc29sZS5sb2coJ1x1NjcxRlx1OTU5M1x1N0JDNFx1NTZGMlx1NjMwN1x1NUI5QW1kYXknLCBlVGltZTMtc1RpbWUzKTtcclxuXHQvLyB9XHJcbn1cclxuIiwgIlxyXG5pbXBvcnQgeyBzZXRJY29uLCBURmlsZSwgTWVudSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgR1JBTlVMQVJJVFlfTElTVCwgR1JBTlVMQVJJVFlfVE9fUEVSSU9ESUNJVFksIEZJTEVJTkZPX1RPX0RJU1BMQVksIEZJTEVJTkZPX1RPX0RJU1BMQVlfREFZLERBWVNfUEVSX1VOSVQsICB9IGZyb20gJy4vbWFpbic7XHJcbmltcG9ydCB7IGNyZWF0ZUFuZE9wZW5EYWlseU5vdGUgfSBmcm9tICdzcmMvY3JlYXRlQW5kT3BlbkRhaWx5Tm90ZSc7XHJcbmltcG9ydCB7IE1vZGFsRXh0cmFjdCB9IGZyb20gJ3NyYy9tb2RhbEV4dHJhY3QnO1xyXG5pbXBvcnQge3R5cGUgQ2FsZW5kYXJTZXQsfSBmcm9tICdzcmMvcGVyaW9kaWNOb3Rlc1R5cGVzJztcclxuaW1wb3J0IHsgY3JlYXRlQW5kT3BlblBlcmlvZGljTm90ZSB9IGZyb20gJy4vY3JlYXRlQW5kT3BlblBlcmlvZGljTm90ZSc7XHJcbmltcG9ydCB7IElHcmFudWxhcml0eSB9IGZyb20gJ29ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZmFjZSc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZHJhd1VJKCk6IHZvaWQge1xyXG4gICAgXHJcbiAgICBjb25zdCBuYXZIZWFkZXI6IEhUTUxFbGVtZW50ID0gY3JlYXRlRGl2KFwibmF2LWhlYWRlclwiKTtcclxuICAgIGNvbnN0IG5hdkJ1dHRvbkNvbnRhaW5lcjogSFRNTEVsZW1lbnQgPSBuYXZIZWFkZXIuY3JlYXRlRGl2KFwibmF2LWJ1dHRvbnMtY29udGFpbmVyXCIpO1xyXG5cclxuICAgIC8vIHBlcmlvZGljIG5vdGVzXHJcbiAgICBjb25zdCBncmFudWxhcml0eSA9IEdSQU5VTEFSSVRZX0xJU1RbdGhpcy5hY3RpdmVHcmFudWxhcml0eV07XHJcbiAgICBcclxuICAgIC8vIFx1MzBBMlx1MzBBNFx1MzBCM1x1MzBGM1x1NjNDRlx1NzUzQlxyXG4gICAgdWlQcmV2aW91c1BhZ2UuY2FsbCh0aGlzLCBuYXZCdXR0b25Db250YWluZXIsIGdyYW51bGFyaXR5KTtcclxuICAgIHVpTmV4dFBhZ2UuY2FsbCh0aGlzLCBuYXZCdXR0b25Db250YWluZXIsIGdyYW51bGFyaXR5KTtcclxuICAgIHVpUmV0dXJuSG9tZS5jYWxsKHRoaXMsIG5hdkJ1dHRvbkNvbnRhaW5lcik7XHJcbiAgICAvLyB1aVVwZGF0ZS5jYWxsKHRoaXMsIG5hdkJ1dHRvbkNvbnRhaW5lcik7XHJcbiAgICB1aVNldHRpbmcuY2FsbCh0aGlzLCBuYXZCdXR0b25Db250YWluZXIsIGdyYW51bGFyaXR5KTtcclxuICAgIHVpQ3JlYXRlRGFpbHlOb3RlLmNhbGwodGhpcywgbmF2QnV0dG9uQ29udGFpbmVyLCBncmFudWxhcml0eSk7XHJcbiAgICB1aUV4dHJhY3QuY2FsbCh0aGlzLCBuYXZCdXR0b25Db250YWluZXIpO1xyXG4gICAgdWlDb2xsYXBzZS5jYWxsKHRoaXMsIG5hdkJ1dHRvbkNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgXHJcbiAgICAvLyBcdTY1RTVcdTRFRDhcdTMwNkVcdTdCQzRcdTU2RjJcdTMwNkVcdTYzQ0ZcdTc1M0JcclxuICAgIGNvbnN0IG5hdkRhdGVSYW5nZTogSFRNTEVsZW1lbnQgPSBuYXZIZWFkZXIuY3JlYXRlRGl2KFwibmF2LWRhdGUtcmFuZ2VcIik7XHJcbiAgICBsZXQgbGF0ZXN0ID0gdGhpcy5zZWFyY2hSYW5nZS5sYXRlc3QuY2xvbmUoKTtcclxuICAgIGxldCBlYXJsaWVzdCA9IHRoaXMuc2VhcmNoUmFuZ2UuZWFybGllc3QuY2xvbmUoKTtcclxuXHJcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5pbml0aWFsU2VhcmNoVHlwZSA9PSdiYWNrd2FyZCcpe1xyXG4gICAgICAgIGVhcmxpZXN0ID0gbGF0ZXN0LmNsb25lKCkuc3VidHJhY3QodGhpcy5zZXR0aW5ncy5kdXJhdGlvbltncmFudWxhcml0eV0gLSAxICxncmFudWxhcml0eSk7XHJcbiAgICAgICAgaWYgKGxhdGVzdC5pc1NhbWUod2luZG93Lm1vbWVudCgpLFwiZGF5XCIpKXtcclxuICAgICAgICAgICAgbGF0ZXN0ID0gbGF0ZXN0LmFkZChNYXRoLmNlaWwodGhpcy5zZXR0aW5ncy5vZmZzZXQvREFZU19QRVJfVU5JVFtncmFudWxhcml0eV0pLGdyYW51bGFyaXR5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5pbml0aWFsU2VhcmNoVHlwZSA9PSdmb3J3YXJkJyl7XHJcbiAgICAgICAgbGF0ZXN0ID0gZWFybGllc3QuY2xvbmUoKS5hZGQodGhpcy5zZXR0aW5ncy5kdXJhdGlvbltncmFudWxhcml0eV0gLTEgLGdyYW51bGFyaXR5KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkYXRlUmFuZ2U6IHN0cmluZyA9IGVhcmxpZXN0LmZvcm1hdChcIllZWVkvTU0vREQgWy1dIFwiKSArIFxyXG4gICAgICAgIGxhdGVzdC5mb3JtYXQoIGVhcmxpZXN0LmlzU2FtZShsYXRlc3QsJ3llYXInKSA/ICBcIk1NL0REXCI6IFwiWVlZWS9NTS9ERFwiKTtcclxuICAgIG5hdkRhdGVSYW5nZS5jcmVhdGVEaXYoXCJuYXYtZGF0ZS1yYW5nZS1jb250ZW50XCIpLnNldFRleHQoZGF0ZVJhbmdlKTtcclxuXHJcbiAgICAvL1x1NjVFNVx1NEVEOFx1N0JDNFx1NTZGMlx1MzBBRlx1MzBFQVx1MzBDM1x1MzBBRlx1NjY0Mlx1MzA2RVx1NTJENVx1NEY1QyBcdTVGOENcdTMwNjdcdTU5MDlcdTY2RjRcdTMwNTlcdTMwOEJcclxuICAgIG5hdkRhdGVSYW5nZS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG9uc2V0RGF0ZSA9IHdpbmRvdy5tb21lbnQodGhpcy5zZXR0aW5ncy5vbnNldCxcIllZWVktTU0tRERcIik7XHJcbiAgICAgICAgICAgIGlmIChvbnNldERhdGUuaXNWYWxpZCgpKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoUmFuZ2UuZWFybGllc3QgPSBvbnNldERhdGU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFJhbmdlLmxhdGVzdCA9IG9uc2V0RGF0ZS5jbG9uZSgpLmFkZCh0aGlzLnNldHRpbmdzLmR1cmF0aW9uLmRheSAtMSwnZGF5cycpO1xyXG4gICAgICAgICAgICB9IGVsc2UgeyAgXHJcbiAgICAgICAgICAgICAgICAvLyBvbnNldERhdGVcdTMwNENcdTRFMERcdTZCNjNcdTMwNkFcdTMwODlcdTVGNTNcdTY1RTVcdThENzdcdTcwQjlcdTMwNkViYWNrd2FyZCBzZWFyY2hcdTMwOTJcdTg4NENcdTMwNDZcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoUmFuZ2UubGF0ZXN0ID0gd2luZG93Lm1vbWVudCgpLnN0YXJ0T2YoJ2RheScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdCA9IHdpbmRvdy5tb21lbnQoKS5zdGFydE9mKCdkYXknKS5zdWJ0cmFjdCh0aGlzLnNldHRpbmdzLmR1cmF0aW9uLmRheSAtIDEsJ2RheXMnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFZpZXcoZmFsc2UsIHRydWUsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgLy8gUGVyaW9kaWMgTm90ZXMgXHU3QzkyXHU1RUE2XHU2M0NGXHU3NTNCICYgXHU3QzkyXHU1RUE2XHU1MjA3XHUzMDhBXHU2NkZGXHUzMDQ4XHU1MUU2XHU3NDA2XHJcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5wZXJpb2RpY05vdGVzRW5hYmxlZCl7XHJcbiAgICAgICAgY29uc3QgbmF2R3JhbnVsYXJpdHk6IEhUTUxFbGVtZW50ID0gbmF2SGVhZGVyLmNyZWF0ZURpdihcIm5hdi1kYXRlLXJhbmdlXCIpO1xyXG4gICAgICAgIG5hdkdyYW51bGFyaXR5LmNyZWF0ZURpdihcIm5hdi1kYXRlLXJhbmdlLWNvbnRlbnRcIikuc2V0VGV4dChHUkFOVUxBUklUWV9MSVNUW3RoaXMuYWN0aXZlR3JhbnVsYXJpdHldKTtcclxuXHJcbiAgICAgICAgbmF2R3JhbnVsYXJpdHkuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICAoZXZldDpNb3VzZUV2ZW50KSA9PntcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnNob3dEZWJ1Z0luZm8pe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdETk86Y2xpY2tlZCB0byBjaGFuZ2UgZ3JhbnVsYXJpdHkuIHZlclBOLCBjYWxlbmRhclNldHM6Jyx0aGlzLmFjdGl2ZUdyYW51bGFyaXR5LCB0aGlzLnZlclBOLCB0aGlzLmNhbGVuZGFyU2V0cyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbml0aWFsR3JhbnVsYXJpdHkgPSB0aGlzLmFjdGl2ZUdyYW51bGFyaXR5O1xyXG4gICAgICAgICAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlR3JhbnVsYXJpdHkgPSAodGhpcy5hY3RpdmVHcmFudWxhcml0eSArIDEpICUgR1JBTlVMQVJJVFlfTElTVC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9IHdoaWxlICgoXHJcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMudmVyUE4gPT0gMiAmJiAhdGhpcy5jYWxlbmRhclNldHNbdGhpcy5hY3RpdmVTZXRdW0dSQU5VTEFSSVRZX0xJU1RbdGhpcy5hY3RpdmVHcmFudWxhcml0eV1dPy5lbmFibGVkKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnZlclBOID09IDEgJiYgIXRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIikuc2V0dGluZ3M/LltHUkFOVUxBUklUWV9UT19QRVJJT0RJQ0lUWVtHUkFOVUxBUklUWV9MSVNUW3RoaXMuYWN0aXZlR3JhbnVsYXJpdHldXV0/LmVuYWJsZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgKSAmJiB0aGlzLmFjdGl2ZUdyYW51bGFyaXR5ICE9IGluaXRpYWxHcmFudWxhcml0eSlcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXF1ZXN0U2F2ZUxheW91dCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyh0cnVlLCB0cnVlLCB0cnVlKTsgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApXHJcblxyXG4gICAgICAgIC8vIFx1MzBCM1x1MzBGM1x1MzBDNlx1MzBBRFx1MzBCOVx1MzBDOFx1MzBFMVx1MzBDQlx1MzBFNVx1MzBGQ1xyXG4gICAgICAgIG5hdkdyYW51bGFyaXR5LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiY29udGV4dG1lbnVcIixcclxuICAgICAgICAgICAgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PntcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaT0wIDsgaTxHUkFOVUxBUklUWV9MSVNULmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnZlclBOID09MiAmJiB0aGlzLmNhbGVuZGFyU2V0c1t0aGlzLmFjdGl2ZVNldF1bR1JBTlVMQVJJVFlfTElTVFtpXV0/LmVuYWJsZWQpfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMudmVyUE4gPT0xICYmIHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIikuc2V0dGluZ3M/LltHUkFOVUxBUklUWV9UT19QRVJJT0RJQ0lUWVtHUkFOVUxBUklUWV9MSVNUW2ldXV0/LmVuYWJsZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGljb24gPSAoIGkgPT0gdGhpcy5hY3RpdmVHcmFudWxhcml0eSk/IFwiY2hlY2tcIjpcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoR1JBTlVMQVJJVFlfTElTVFtpXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihpY29uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCAoKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVHcmFudWxhcml0eSA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXF1ZXN0U2F2ZUxheW91dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KHRydWUsdHJ1ZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICB9XHJcbiAgICAvLyBQZXJpb2RpYyBOb3RlcyBcdTMwQUJcdTMwRUNcdTMwRjNcdTMwQzBcdTMwRkNcdTMwQkJcdTMwQzNcdTMwQzhcdTYzQ0ZcdTc1M0IgJiBcdTMwQkJcdTMwQzNcdTMwQzhcdTUyMDdcdTMwOEFcdTY2RkZcdTMwNDhcdTUxRTZcdTc0MDZcclxuICAgIGlmICh0aGlzLnNldHRpbmdzLmNhbGVuZGFyU2V0c0VuYWJsZWQpe1xyXG4gICAgICAgIGNvbnN0IG5hdkNhbGVuZGFyU2V0OiBIVE1MRWxlbWVudCA9IG5hdkhlYWRlci5jcmVhdGVEaXYoXCJuYXYtZGF0ZS1yYW5nZVwiKTtcclxuICAgICAgICBuYXZDYWxlbmRhclNldC5jcmVhdGVEaXYoXCJuYXYtZGF0ZS1yYW5nZS1jb250ZW50XCIpLnNldFRleHQodGhpcy5jYWxlbmRhclNldHNbdGhpcy5hY3RpdmVTZXRdLmlkKTtcclxuICAgIFxyXG4gICAgICAgIG5hdkNhbGVuZGFyU2V0LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgKGV2ZXQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVNldCA9ICh0aGlzLmFjdGl2ZVNldCArIDEpICUgdGhpcy5jYWxlbmRhclNldHMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJlcXVlc3RTYXZlTGF5b3V0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLHRydWUsdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApXHJcblxyXG4gICAgICAgIC8vIFx1MzBCM1x1MzBGM1x1MzBDNlx1MzBBRFx1MzBCOVx1MzBDOFx1MzBFMVx1MzBDQlx1MzBFNVx1MzBGQ1xyXG4gICAgICAgIG5hdkNhbGVuZGFyU2V0LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiY29udGV4dG1lbnVcIixcclxuICAgICAgICAgICAgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PntcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaT0wIDsgaTx0aGlzLmNhbGVuZGFyU2V0cy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWNvbiA9ICggaSA9PSB0aGlzLmFjdGl2ZVNldCk/IFwiY2hlY2tcIjpcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUodGhpcy5jYWxlbmRhclNldHNbaV0uaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihpY29uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soICgpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlU2V0ID0gaTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmVxdWVzdFNhdmVMYXlvdXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLHRydWUsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1NjNDRlx1NzUzQlxyXG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcclxuICAgIHRoaXMuY29udGVudEVsLmFwcGVuZENoaWxkKG5hdkhlYWRlcik7XHJcbn1cclxuXHJcblxyXG4vL1x1OTA0RVx1NTNCQlx1MzA2Qlx1NzlGQlx1NTJENVxyXG5mdW5jdGlvbiB1aVByZXZpb3VzUGFnZSAocGFyZW50RWw6IEhUTUxFbGVtZW50LCBncmFudWxhcml0eTogSUdyYW51bGFyaXR5KTp2b2lke1xyXG5cclxuICAgIGxldCBuYXZBY3Rpb25CdXR0b246IEhUTUxFbGVtZW50ID0gcGFyZW50RWwuY3JlYXRlRGl2KFwiY2xpY2thYmxlLWljb24gbmF2LWFjdGlvbi1idXR0b25cIik7XHJcbiAgICBuYXZBY3Rpb25CdXR0b24uYXJpYUxhYmVsID0gXCJwcmV2aW91cyBub3Rlc1wiO1xyXG4gICAgc2V0SWNvbihuYXZBY3Rpb25CdXR0b24sXCJhcnJvdy1sZWZ0XCIpO1xyXG5cclxuICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoUmFuZ2UubGF0ZXN0ID0gdGhpcy5zZWFyY2hSYW5nZS5sYXRlc3Quc3VidHJhY3QodGhpcy5zZXR0aW5ncy5kdXJhdGlvbltncmFudWxhcml0eV0sIGdyYW51bGFyaXR5KTtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdCA9IHRoaXMuc2VhcmNoUmFuZ2UuZWFybGllc3Quc3VidHJhY3QodGhpcy5zZXR0aW5ncy5kdXJhdGlvbltncmFudWxhcml0eV0sZ3JhbnVsYXJpdHkpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG59XHJcblxyXG4vL1x1NjcyQVx1Njc2NVx1MzA2Qlx1NzlGQlx1NTJENVxyXG5mdW5jdGlvbiB1aU5leHRQYWdlIChwYXJlbnRFbDogSFRNTEVsZW1lbnQsIGdyYW51bGFyaXR5OiBJR3JhbnVsYXJpdHkpOnZvaWR7XHJcbiAgICBsZXQgbmF2QWN0aW9uQnV0dG9uID0gcGFyZW50RWwuY3JlYXRlRGl2KFwiY2xpY2thYmxlLWljb24gbmF2LWFjdGlvbi1idXR0b25cIik7XHJcbiAgICBuYXZBY3Rpb25CdXR0b24uYXJpYUxhYmVsID0gXCJuZXh0IG5vdGVzXCI7XHJcbiAgICBzZXRJY29uKG5hdkFjdGlvbkJ1dHRvbixcImFycm93LXJpZ2h0XCIpO1xyXG5cclxuICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoUmFuZ2UubGF0ZXN0ID0gdGhpcy5zZWFyY2hSYW5nZS5sYXRlc3QuYWRkKHRoaXMuc2V0dGluZ3MuZHVyYXRpb25bZ3JhbnVsYXJpdHldLGdyYW51bGFyaXR5KTtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdCA9IHRoaXMuc2VhcmNoUmFuZ2UuZWFybGllc3QuYWRkKHRoaXMuc2V0dGluZ3MuZHVyYXRpb25bZ3JhbnVsYXJpdHldLGdyYW51bGFyaXR5KTtcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxufVxyXG5cclxuLy8gXHUzMERCXHUzMEZDXHUzMEUwXHUzMDZCXHU2MjNCXHUzMDhCXHJcbmZ1bmN0aW9uIHVpUmV0dXJuSG9tZSAocGFyZW50RWw6IEhUTUxFbGVtZW50KTp2b2lkIHtcclxuICAgIGxldCBuYXZBY3Rpb25CdXR0b24gPSBwYXJlbnRFbC5jcmVhdGVEaXYoXCJjbGlja2FibGUtaWNvbiBuYXYtYWN0aW9uLWJ1dHRvblwiKTtcclxuICAgIG5hdkFjdGlvbkJ1dHRvbi5hcmlhTGFiZWwgPSBcImhvbWVcIjtcclxuICAgIHNldEljb24obmF2QWN0aW9uQnV0dG9uLFwiaG9tZVwiKTtcclxuICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRTZWFyY2hSYW5nZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG4gICAgbmF2QWN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgXCJjb250ZXh0bWVudVwiLFxyXG4gICAgICAgIChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHJcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcInJlZnJlc2ggdmlld1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwicmVmcmVzaC1jd1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyh0cnVlLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICk7XHJcbn1cclxuXHJcbi8vXHU2NkY0XHU2NUIwXHJcbmZ1bmN0aW9uIHVpVXBkYXRlIChwYXJlbnRFbDogSFRNTEVsZW1lbnQpOnZvaWQge1xyXG4gICAgbGV0IG5hdkFjdGlvbkJ1dHRvbiA9IHBhcmVudEVsLmNyZWF0ZURpdihcImNsaWNrYWJsZS1pY29uIG5hdi1hY3Rpb24tYnV0dG9uXCIpO1xyXG4gICAgbmF2QWN0aW9uQnV0dG9uLmFyaWFMYWJlbCA9IFwicmVmcmVzaFwiO1xyXG4gICAgc2V0SWNvbihuYXZBY3Rpb25CdXR0b24sXCJyZWZyZXNoLWN3XCIpO1xyXG4gICAgbmF2QWN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgIGFzeW5jIChldmVudDpNb3VzZUV2ZW50KSA9PntcclxuICAgICAgICAgICAgLy8gdGhpcy5yZXNldFNlYXJjaFJhbmdlKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFZpZXcodHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxufVxyXG5cclxuLy9cdThBMkRcdTVCOUFcclxuZnVuY3Rpb24gdWlTZXR0aW5nKHBhcmVudEVsOiBIVE1MRWxlbWVudCwgZ3JhbnVsYXJpdHk6IElHcmFudWxhcml0eSk6dm9pZHtcclxuICAgIGxldCBuYXZBY3Rpb25CdXR0b24gPSBwYXJlbnRFbC5jcmVhdGVEaXYoXCJjbGlja2FibGUtaWNvbiBuYXYtYWN0aW9uLWJ1dHRvblwiKTtcclxuICAgIG5hdkFjdGlvbkJ1dHRvbi5hcmlhTGFiZWwgPSBcIm9wZW4gc2V0dGluZ3NcIjtcclxuICAgIHNldEljb24obmF2QWN0aW9uQnV0dG9uLFwic2V0dGluZ3NcIik7XHJcbiAgICBuYXZBY3Rpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgYXN5bmMgKGV2ZW50Ok1vdXNlRXZlbnQpID0+e1xyXG4gICAgICAgICAgICB0aGlzLmFwcC5zZXR0aW5nLm9wZW4oKTtcclxuICAgICAgICAgICAgdGhpcy5hcHAuc2V0dGluZy5vcGVuVGFiQnlJZCh0aGlzLnBsdWdpbi5tYW5pZmVzdC5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxuICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY29udGV4dG1lbnVcIixcclxuICAgICAgICAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbWVudSA9IG5ldyBNZW51KCk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBpbiB0aGlzLnNldHRpbmdzLnNob3dFbGVtZW50cyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpY29uID0gKCB0aGlzLnNldHRpbmdzLnNob3dFbGVtZW50c1tlbGVtZW50XSA9PSB0cnVlKT8gXCJjaGVja1wiOlwiXCI7XHJcbiAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShgc2hvdyAke2VsZW1lbnR9YClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oaWNvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5zaG93RWxlbWVudHNbZWxlbWVudF0gPSAhdGhpcy5zZXR0aW5ncy5zaG93RWxlbWVudHNbZWxlbWVudF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5zaG93RWxlbWVudHMubGlzdEl0ZW1zKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGljb24gPSAodGhpcy5zZXR0aW5ncy50YXNrT25seSk/IFwiY2hlY2tcIjogXCJcIjtcclxuICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwidGFza3Mgb25seVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihpY29uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYygpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnRhc2tPbmx5ID0gIXRoaXMuc2V0dGluZ3MudGFza09ubHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgaWNvbkJhY2tsaW5rID0gKHRoaXMuc2V0dGluZ3Muc2hvd0JhY2tsaW5rcyA9PSB0cnVlKT8gXCJjaGVja1wiOlwiXCI7XHJcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAuc2V0VGl0bGUoYHNob3cgYmFja2xpbmsgZmlsZXNgKVxyXG4gICAgICAgICAgICAgICAgLnNldEljb24oaWNvbkJhY2tsaW5rKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Muc2hvd0JhY2tsaW5rcyA9ICF0aGlzLnNldHRpbmdzLnNob3dCYWNrbGlua3M7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSxmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcclxuICAgICAgICAgICAgaWYgKGdyYW51bGFyaXR5ID09J2RheScpe1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggaW4gRklMRUlORk9fVE9fRElTUExBWV9EQVkpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGljb24gPSAoIGluZGV4ID09IHRoaXMuc2V0dGluZ3MuZGlzcGxheUZpbGVJbmZvRGFpbHkpPyBcImNoZWNrXCI6XCJcIjtcclxuICAgICAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKEZJTEVJTkZPX1RPX0RJU1BMQVlfREFZW2luZGV4XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKGljb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayggYXN5bmMoKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmRpc3BsYXlGaWxlSW5mb0RhaWx5ID0gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSxmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggaW4gRklMRUlORk9fVE9fRElTUExBWSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWNvbiA9ICggaW5kZXggPT0gdGhpcy5zZXR0aW5ncy5kaXNwbGF5RmlsZUluZm9QZXJpb2RpYyk/IFwiY2hlY2tcIjpcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoRklMRUlORk9fVE9fRElTUExBWVtpbmRleF0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihpY29uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soIGFzeW5jKCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5kaXNwbGF5RmlsZUluZm9QZXJpb2RpYyA9IGluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaWNvblRvb2x0aXAgPSAodGhpcy5zZXR0aW5ncy50b29sdGlwUHJldmlldyk/IFwiY2hlY2tcIjpcIlwiO1xyXG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCJzaG93IHRvb2x0aXAgcHJldmlld1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKGljb25Ub29sdGlwKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy50b29sdGlwUHJldmlldyA9ICF0aGlzLnNldHRpbmdzLnRvb2x0aXBQcmV2aWV3O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSxmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgbWVudS5zaG93QXRNb3VzZUV2ZW50KGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG59XHJcblxyXG4vLyBcdTMwQzdcdTMwQTRcdTMwRUFcdTMwRkNcdTMwQ0VcdTMwRkNcdTMwQzhcdTRGNUNcdTYyMTBcclxuZnVuY3Rpb24gdWlDcmVhdGVEYWlseU5vdGUocGFyZW50RWw6SFRNTEVsZW1lbnQsIGdyYW51bGFyaXR5OiBJR3JhbnVsYXJpdHkpOnZvaWR7XHJcbiAgICBsZXQgbmF2QWN0aW9uQnV0dG9uID0gcGFyZW50RWwuY3JlYXRlRGl2KFwiY2xpY2thYmxlLWljb24gbmF2LWFjdGlvbi1idXR0b25cIik7XHJcblxyXG4gICAgLy8gcGVyaW9kaWMgbm90ZVx1MzA2RVx1MzBBQVx1MzBGM1x1MzBBQVx1MzBENVx1MzA4NFx1N0M5Mlx1NUVBNlx1MzA2Qlx1NUY5M1x1MzA2M1x1MzA2Nlx1MzBFOVx1MzBEOVx1MzBFQlx1MzA5Mlx1NEY1Q1x1NjIxMFxyXG4gICAgbGV0IGxhYmVsRm9yVG9kYXk6IHN0cmluZyA9ICdjcmVhdGUvb3BlbiAnO1xyXG4gICAgbGV0IGxhYmVsRm9yTmV4dDogc3RyaW5nID0gJ2NyZWF0ZS9vcGVuICc7XHJcbiAgICBpZiAoZ3JhbnVsYXJpdHkgPT0gJ2RheScpe1xyXG4gICAgICAgIGxhYmVsRm9yVG9kYXkgPSBsYWJlbEZvclRvZGF5ICsgXCJ0b2RheSdzIFwiO1xyXG4gICAgICAgIGxhYmVsRm9yTmV4dCA9IGxhYmVsRm9yTmV4dCArIFwidG9tb3Jyb3cncyBcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGFiZWxGb3JUb2RheSA9IGxhYmVsRm9yVG9kYXkgKyBcInByZXNlbnQgXCI7XHJcbiAgICAgICAgbGFiZWxGb3JOZXh0ID0gbGFiZWxGb3JOZXh0ICsgXCJuZXh0IFwiO1xyXG4gICAgfVxyXG4gICAgbGFiZWxGb3JUb2RheSA9IGxhYmVsRm9yVG9kYXkgKyBHUkFOVUxBUklUWV9UT19QRVJJT0RJQ0lUWVtncmFudWxhcml0eV0gKyAnIG5vdGUnO1xyXG4gICAgbGFiZWxGb3JOZXh0ID0gbGFiZWxGb3JOZXh0ICsgR1JBTlVMQVJJVFlfVE9fUEVSSU9ESUNJVFlbZ3JhbnVsYXJpdHldICsgJyBub3RlJztcclxuXHJcbiAgICBpZiAodGhpcy52ZXJQTiA9PSAyKXtcclxuICAgICAgICBsYWJlbEZvclRvZGF5ID0gbGFiZWxGb3JUb2RheSArICcgZm9yICcgKyB0aGlzLmNhbGVuZGFyU2V0c1t0aGlzLmFjdGl2ZVNldF0uaWQ7XHJcbiAgICAgICAgbGFiZWxGb3JOZXh0ID0gbGFiZWxGb3JOZXh0ICsgJyBmb3IgJyArIHRoaXMuY2FsZW5kYXJTZXRzW3RoaXMuYWN0aXZlU2V0XS5pZDtcclxuICAgIH1cclxuXHJcbiAgICBuYXZBY3Rpb25CdXR0b24uYXJpYUxhYmVsID0gbGFiZWxGb3JUb2RheTtcclxuICAgIHNldEljb24obmF2QWN0aW9uQnV0dG9uLFwiY2FsZW5kYXItcGx1c1wiKTtcclxuICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0O1xyXG4gICAgICAgICAgICBjb25zdCBkYXRlID0gd2luZG93Lm1vbWVudCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMudmVyUE4gPT0gMil7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVBbmRPcGVuUGVyaW9kaWNOb3RlKCBncmFudWxhcml0eSwgZGF0ZSwgdGhpcy5jYWxlbmRhclNldHNbdGhpcy5hY3RpdmVTZXRdKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUFuZE9wZW5EYWlseU5vdGUoZ3JhbnVsYXJpdHksIGRhdGUsIHRoaXMuYWxsRGFpbHlOb3Rlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICApO1xyXG4gICAgbmF2QWN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgXCJjb250ZXh0bWVudVwiLFxyXG4gICAgICAgIChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxyXG4gICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIC5zZXRUaXRsZShcImNyZWF0ZS9vcGVuIHRvbW9ycm93J3MgZGFpbHkgbm90ZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShsYWJlbEZvck5leHQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJjYWxlbmRhci1wbHVzXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSB3aW5kb3cubW9tZW50KCkuYWRkKDEsZ3JhbnVsYXJpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52ZXJQTiA9PSAyKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUFuZE9wZW5QZXJpb2RpY05vdGUoZ3JhbnVsYXJpdHksIGRhdGUsIHRoaXMuY2FsZW5kYXJTZXRzW3RoaXMuYWN0aXZlU2V0XSk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlQW5kT3BlbkRhaWx5Tm90ZShncmFudWxhcml0eSwgZGF0ZSwgdGhpcy5hbGxEYWlseU5vdGVzKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICk7XHJcbn1cclxuXHJcbi8vXHU2MkJEXHU1MUZBXHJcbmZ1bmN0aW9uIHVpRXh0cmFjdChwYXJlbnRFbDogSFRNTEVsZW1lbnQpOnZvaWR7XHJcbiAgICBsZXQgbmF2QWN0aW9uQnV0dG9uID0gcGFyZW50RWwuY3JlYXRlRGl2KFwiY2xpY2thYmxlLWljb24gbmF2LWFjdGlvbi1idXR0b25cIik7XHJcbiAgICBpZiAoIXRoaXMuZXh0cmFjdE1vZGUpe1xyXG4gICAgICAgIC8vXHU2MkJEXHU1MUZBXHUzMDkyXHUzMEFBXHUzMEYzXHUzMDZCXHJcbiAgICAgICAgbmF2QWN0aW9uQnV0dG9uLmFyaWFMYWJlbCA9IFwiZXh0cmFjdFwiO1xyXG4gICAgICAgIHNldEljb24obmF2QWN0aW9uQnV0dG9uLFwic2VhcmNoXCIpO1xyXG4gICAgICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIC8vXHU1MTY1XHU1MjlCXHUzMEUyXHUzMEZDXHUzMEMwXHUzMEVCXHUzMDkyXHU5NThCXHUzMDRGXHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0O1xyXG4gICAgICAgICAgICBjb25zdCBvblN1Ym1pdCA9IChlbmFibGVFeHRyYWN0OiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW5hYmxlRXh0cmFjdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRyYWN0TW9kZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSxmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5ldyBNb2RhbEV4dHJhY3QodGhpcy5hcHAsIHRoaXMucGx1Z2luLCBvblN1Ym1pdCkub3BlbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvL1x1NjJCRFx1NTFGQVx1MzA5Mlx1MzBBQVx1MzBENVx1MzA2QlxyXG4gICAgICAgIG5hdkFjdGlvbkJ1dHRvbi5hcmlhTGFiZWwgPSBcInVuZXh0cmFjdFwiO1xyXG4gICAgICAgIHNldEljb24obmF2QWN0aW9uQnV0dG9uLFwieC1jaXJjbGVcIik7XHJcbiAgICAgICAgbmF2QWN0aW9uQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIHRoaXMuZXh0cmFjdE1vZGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5leHRyYWN0VGFzayA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLGZhbHNlKTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBuYXZBY3Rpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICBcImNvbnRleHRtZW51XCIsXHJcbiAgICAgICAgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xyXG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XHJcbiAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiZXh0cmFjdCB0YXNrc1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiY2hlY2stc3F1YXJlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdE1vZGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3RUYXNrID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSxmYWxzZSk7IFxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxuXHJcbn1cclxuXHJcbi8vXHU1MTY4XHU0RjUzXHUzMEQ1XHUzMEE5XHUzMEZDXHUzMEVCXHUzMEM5XHJcblxyXG5mdW5jdGlvbiB1aUNvbGxhcHNlIChwYXJlbnRFbDpIVE1MRWxlbWVudCk6dm9pZHtcclxuICAgIGxldCBuYXZBY3Rpb25CdXR0b24gPSBwYXJlbnRFbC5jcmVhdGVEaXYoXCJjbGlja2FibGUtaWNvbiBuYXYtYWN0aW9uLWJ1dHRvblwiKTtcclxuICAgIGlmICh0aGlzLmNvbGxhcHNlQWxsKXtcclxuICAgICAgICBuYXZBY3Rpb25CdXR0b24uY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXRoaXMuY29sbGFwc2VBbGwpe1xyXG4gICAgICAgIC8vXHU1MTY4XHU0RjUzXHUzMEQ1XHUzMEE5XHUzMEZDXHUzMEVCXHUzMEM5XHUzMDkyXHUzMEFBXHUzMEYzXHUzMDZCXHJcbiAgICAgICAgbmF2QWN0aW9uQnV0dG9uLmFyaWFMYWJlbCA9IFwiY29sbGFwc2UgYWxsXCI7XHJcbiAgICAgICAgc2V0SWNvbihuYXZBY3Rpb25CdXR0b24sXCJjaGV2cm9ucy1kb3duLXVwXCIpO1xyXG4gICAgICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIHRoaXMuY29sbGFwc2VBbGwgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy9cdTUxNjhcdTRGNTNcdTMwRDVcdTMwQTlcdTMwRkNcdTMwRUJcdTMwQzlcdTMwOTJcdTMwQUFcdTMwRDVcdTMwNkJcclxuICAgICAgICBuYXZBY3Rpb25CdXR0b24uYXJpYUxhYmVsID0gXCJleHBhbmRcIjtcclxuICAgICAgICBzZXRJY29uKG5hdkFjdGlvbkJ1dHRvbixcImNoZXZyb25zLWRvd24tdXBcIik7XHJcbiAgICAgICAgbmF2QWN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgIGFzeW5jIChldmVudDpNb3VzZUV2ZW50KSA9PntcclxuICAgICAgICAgICAgdGhpcy5jb2xsYXBzZUFsbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLGZhbHNlKTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IG1vbWVudCAgZnJvbSBcIm1vbWVudFwiO1xyXG5pbXBvcnQgeyBURmlsZSwgV29ya3NwYWNlTGVhZiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgY3JlYXRlRGFpbHlOb3RlLCBnZXREYWlseU5vdGUsIGNyZWF0ZVBlcmlvZGljTm90ZSwgSUdyYW51bGFyaXR5LCBnZXREYXRlVUlELCBjcmVhdGVRdWFydGVybHlOb3RlLCBjcmVhdGVZZWFybHlOb3RlfSBmcm9tIFwib2JzaWRpYW4tZGFpbHktbm90ZXMtaW50ZXJmYWNlXCI7XHJcblxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUFuZE9wZW5EYWlseU5vdGUoIGdyYW51bGFyaXR5OiBJR3JhbnVsYXJpdHksIGRhdGU6IG1vbWVudCwgYWxsRmlsZXM6IFJlY29yZDxzdHJpbmcsVEZpbGU+KTogUHJvbWlzZTx2b2lkPiB7XHJcblx0Y29uc3QgeyB3b3Jrc3BhY2UgfSA9IHdpbmRvdy5hcHA7XHJcblxyXG5cdGNvbnN0IGNyZWF0ZUZpbGUgPSBhc3luYyAoKSA9PiB7XHJcblx0XHQvLyBjcmVhdGVQZXJpb2RpY05vdGVcdTMwNkZxdWFydGVyL3llYXJcdTMwNkJcdTMwNkZcdTVCRkVcdTVGRENcdTMwNTdcdTMwNjZcdTMwNDRcdTMwNkFcdTMwNDRcdTMwODhcdTMwNDZcdTMwNkFcdTMwNkVcdTMwNjdcdTUyMDZcdTVDOTBcdTMwMDJcclxuXHRcdGxldCBuZXdOb3RlOlRGaWxlO1xyXG5cdFx0c3dpdGNoIChncmFudWxhcml0eSl7XHJcblx0XHRcdGNhc2UgJ3F1YXJ0ZXInOlxyXG5cdFx0XHRcdG5ld05vdGUgPSBhd2FpdCBjcmVhdGVRdWFydGVybHlOb3RlKGRhdGUpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICd5ZWFyJzpcclxuXHRcdFx0XHRuZXdOb3RlID0gYXdhaXQgY3JlYXRlWWVhcmx5Tm90ZShkYXRlKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRuZXdOb3RlID0gYXdhaXQgY3JlYXRlUGVyaW9kaWNOb3RlKGdyYW51bGFyaXR5LCBkYXRlKTtcclxuXHRcdH1cclxuXHRcdFx0XHRhd2FpdCB3b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKG5ld05vdGUpO1xyXG5cclxuXHR9O1xyXG5cdGNvbnN0IGRhaWx5bm90ZSA9IGFsbEZpbGVzW2dldERhdGVVSUQoZGF0ZSwgZ3JhbnVsYXJpdHkpXTtcclxuXHQvL2NvbnN0IGRhaWx5bm90ZSA9IGdldERhaWx5Tm90ZShkYXRlLCBhbGxGaWxlcyk7XHJcblx0aWYgKCFkYWlseW5vdGUpe1xyXG5cdFx0YXdhaXQgY3JlYXRlRmlsZSgpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRhd2FpdCB3b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKGRhaWx5bm90ZSk7XHJcblx0fVxyXG5cclxufVxyXG4iLCAiXHJcbmltcG9ydCB7IEFwcCwgTW9kYWwsIFNjb3BlLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgRGFpbHlOb3RlT3V0bGluZVBsdWdpbiBmcm9tICdzcmMvbWFpbic7XHJcbmV4cG9ydCBjbGFzcyBNb2RhbEV4dHJhY3QgZXh0ZW5kcyBNb2RhbCB7XHJcblx0cGx1Z2luOiBEYWlseU5vdGVPdXRsaW5lUGx1Z2luO1xyXG5cdHNjb3BlOiBTY29wZTtcclxuXHJcblx0aW5wdXRlZFZhbHVlOiBzdHJpbmc7XHJcblx0ZW5hYmxlRXh0cmFjdCA6IGJvb2xlYW47XHJcblx0b25TdWJtaXQ6IChlbmFibGVFeHRyYWN0OiBib29sZWFuKSA9PiB2b2lkO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBEYWlseU5vdGVPdXRsaW5lUGx1Z2luLCBvblN1Ym1pdDogKGVuYWJsZUV4dHJhY3Q6IGJvb2xlYW4pID0+IHZvaWQpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcclxuXHR9XHJcblxyXG5cdG9uT3BlbigpIHtcclxuXHRcdHRoaXMuaW5wdXRlZFZhbHVlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mud29yZHNUb0V4dHJhY3Q7XHJcblxyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJiclwiKTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcblx0XHRcdC5zZXROYW1lKFwiRXh0cmFjdCBieSB3b3JkIG9yIHBocmFzZTpcIilcclxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+e1xyXG5cdFx0XHRcdHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mud29yZHNUb0V4dHJhY3QpLmlucHV0RWwuc2VsZWN0KCk7XHJcblx0XHRcdFx0dGV4dC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMuaW5wdXRlZFZhbHVlID0gdmFsdWVcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+XHJcblx0XHRcdFx0YnRuXHJcblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIkV4dHJhY3RcIilcclxuXHRcdFx0XHRcdC5zZXRDdGEoKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soXHJcblx0XHRcdFx0XHRcdGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5leGVjdXRlRXh0cmFjdCgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQpKVxyXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+XHJcblx0XHRcdFx0YnRuXHJcblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIkNhbmNlbFwiKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHQvLyBFbnRlclx1MzA2N1x1MzA2RVx1NTE2NVx1NTI5Qlx1MzA2Qlx1NUY4Q1x1MzA2N1x1NUJGRVx1NUZEQ1x1MzA1N1x1MzA1Rlx1MzA0NCBcclxuXHRcdHRoaXMuc2NvcGUucmVnaXN0ZXIoW10sICdFbnRlcicsIFxyXG5cdFx0XHQoZXZ0OiBLZXlib2FyZEV2ZW50KT0+e1xyXG5cdFx0XHRcdHRoaXMuZXhlY3V0ZUV4dHJhY3QoKTtcclxuXHRcdFx0fVxyXG5cdFx0IFx0KTtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKSB7XHJcblx0XHRsZXQgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGV4ZWN1dGVFeHRyYWN0KCk6UHJvbWlzZTx2b2lkPntcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9FeHRyYWN0ID0gdGhpcy5pbnB1dGVkVmFsdWU7XHJcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdHRoaXMub25TdWJtaXQodHJ1ZSk7XHJcblx0fVxyXG59XHJcbiIsICIvKlxyXG5Db2RlcyBpbiB0aGlzIGZpbGUgaXMgYWRhcHRlZCBmcm9tIFBlcmlvZGljIE5vdGVzIGJ5IExpYW0gQ2FpbiBodHRwczovL2dpdGh1Yi5jb20vbGlhbWNhaW4vb2JzaWRpYW4tcGVyaW9kaWMtbm90ZXNcclxuXHJcblRoZSBvcmlnaW5hbCB3b3JrIGlzIE1JVC1saWNlbnNlZC5cclxuXHJcbk1JVCBMaWNlbnNlXHJcblxyXG5Db3B5cmlnaHQgKGMpIDIwMjEgTGlhbSBDYWluXHJcblxyXG5QZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XHJcbm9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcclxuaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xyXG50byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXHJcbmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xyXG5mdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxyXG5cclxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsXHJcbmNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXHJcbklNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG5GSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcclxuQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxyXG5MSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxyXG5PVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRVxyXG5TT0ZUV0FSRS5cclxuKi9cclxuXHJcblxyXG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcclxuaW1wb3J0IHsgQXBwLCBURmlsZSwgV29ya3NwYWNlTGVhZiwgbm9ybWFsaXplUGF0aCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBJR3JhbnVsYXJpdHkgfSBmcm9tIFwib2JzaWRpYW4tZGFpbHktbm90ZXMtaW50ZXJmYWNlXCI7XHJcblxyXG5pbXBvcnQgeyBDYWxlbmRhclNldCB9IGZyb20gXCIuL3BlcmlvZGljTm90ZXNUeXBlc1wiO1xyXG5cclxuaW1wb3J0IHsgR3JhbnVsYXJpdHksIFBlcmlvZGljQ29uZmlnIH0gZnJvbSBcIi4vcGVyaW9kaWNOb3Rlc1R5cGVzXCI7XHJcblxyXG5jb25zdCBERUZBVUxUX05PVEVfRk9STUFUID0ge1xyXG5cdGRheTogXCJZWVlZLU1NLUREXCIsXHJcblx0d2VlazogXCJnZ2dnLVtXXXd3XCIsXHJcblx0bW9udGg6IFwiWVlZWS1NTVwiLFxyXG5cdHF1YXJ0ZXI6IFwiWVlZWS1bUV1RXCIsXHJcblx0eWVhcjogXCJZWVlZXCJcclxufVxyXG5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBbmRPcGVuUGVyaW9kaWNOb3RlKCBncmFudWxhcml0eTogSUdyYW51bGFyaXR5LCBkYXRlOiBtb21lbnQsIGNhbGVuZGFyU2V0OiBDYWxlbmRhclNldCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdGNvbnN0IHsgd29ya3NwYWNlIH0gPSB3aW5kb3cuYXBwO1xyXG5cclxuXHJcblx0bGV0IGZpbGUgPSB3aW5kb3cuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIikuY2FjaGUuZ2V0UGVyaW9kaWNOb3RlKFxyXG5cdFx0Y2FsZW5kYXJTZXQuaWQsIGdyYW51bGFyaXR5LCBkYXRlIFxyXG5cdCk7XHJcblx0aWYgKCFmaWxlKSB7XHJcblx0XHQvLyAgZmlsZVx1MzA5Mlx1NEY1Q1x1NjIxMFxyXG4gICAgXHRjb25zdCBjb25maWcgPSBjYWxlbmRhclNldFtncmFudWxhcml0eV07XHJcbiAgICBcdGNvbnN0IGZvcm1hdCA9IGNhbGVuZGFyU2V0W2dyYW51bGFyaXR5XS5mb3JtYXQ7XHJcblxyXG5cdFx0Y29uc3QgZmlsZW5hbWUgPSBkYXRlLmZvcm1hdChmb3JtYXQgPyBmb3JtYXQgOiBERUZBVUxUX05PVEVfRk9STUFUW2dyYW51bGFyaXR5XSk7XHJcblx0XHRjb25zdCB0ZW1wbGF0ZUNvbnRlbnRzID0gYXdhaXQgZ2V0VGVtcGxhdGVDb250ZW50cyh3aW5kb3cuYXBwLCBjb25maWcudGVtcGxhdGVQYXRoKTtcclxuXHRcdGNvbnN0IHJlbmRlcmVkQ29udGVudHMgPSBhcHBseVRlbXBsYXRlVHJhbnNmb3JtYXRpb25zKFxyXG5cdFx0XHRmaWxlbmFtZSxcclxuXHRcdFx0Z3JhbnVsYXJpdHkgYXMgR3JhbnVsYXJpdHksXHJcblx0XHRcdGRhdGUsXHJcblx0XHRcdGZvcm1hdCxcclxuXHRcdFx0dGVtcGxhdGVDb250ZW50c1xyXG4gICAgXHQpO1xyXG4gICAgY29uc3QgZGVzdFBhdGggPSBhd2FpdCBnZXROb3RlQ3JlYXRpb25QYXRoKHdpbmRvdy5hcHAsIGZpbGVuYW1lLCBjb25maWcpO1xyXG4gICAgZmlsZSA9IGF3YWl0IHdpbmRvdy5hcHAudmF1bHQuY3JlYXRlKGRlc3RQYXRoLCByZW5kZXJlZENvbnRlbnRzKTtcclxuXHR9XHJcblxyXG5cdGF3YWl0IHdvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUoZmlsZSk7XHJcbn1cclxuXHJcblxyXG4vLyBQZXJpb2RpYyBOb3RlcyB1dGlsLnRzXHUzMDRCXHUzMDg5XHJcbmFzeW5jIGZ1bmN0aW9uIGdldFRlbXBsYXRlQ29udGVudHMoXHJcblx0YXBwOiBBcHAsXHJcblx0dGVtcGxhdGVQYXRoOiBzdHJpbmcgfCB1bmRlZmluZWRcclxuICApOiBQcm9taXNlPHN0cmluZz4ge1xyXG5cdGNvbnN0IHsgbWV0YWRhdGFDYWNoZSwgdmF1bHQgfSA9IGFwcDtcclxuXHRjb25zdCBub3JtYWxpemVkVGVtcGxhdGVQYXRoID0gbm9ybWFsaXplUGF0aCh0ZW1wbGF0ZVBhdGggPz8gXCJcIik7XHJcblx0aWYgKHRlbXBsYXRlUGF0aCA9PT0gXCIvXCIpIHtcclxuXHQgIHJldHVybiBQcm9taXNlLnJlc29sdmUoXCJcIik7XHJcblx0fVxyXG4gIFxyXG5cdHRyeSB7XHJcblx0ICBjb25zdCB0ZW1wbGF0ZUZpbGUgPSBtZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KG5vcm1hbGl6ZWRUZW1wbGF0ZVBhdGgsIFwiXCIpO1xyXG5cdCAgcmV0dXJuIHRlbXBsYXRlRmlsZSA/IHZhdWx0LmNhY2hlZFJlYWQodGVtcGxhdGVGaWxlKSA6IFwiXCI7XHJcblx0fSBjYXRjaCAoZXJyKSB7XHJcblx0ICBjb25zb2xlLmVycm9yKFxyXG5cdFx0YEZhaWxlZCB0byByZWFkIHRoZSBkYWlseSBub3RlIHRlbXBsYXRlICcke25vcm1hbGl6ZWRUZW1wbGF0ZVBhdGh9J2AsXHJcblx0XHRlcnJcclxuXHQgICk7XHJcblx0ICBuZXcgTm90aWNlKFwiRmFpbGVkIHRvIHJlYWQgdGhlIGRhaWx5IG5vdGUgdGVtcGxhdGVcIik7XHJcblx0ICByZXR1cm4gXCJcIjtcclxuXHR9XHJcbiAgfVxyXG5cclxuZnVuY3Rpb24gYXBwbHlUZW1wbGF0ZVRyYW5zZm9ybWF0aW9ucyhcclxuZmlsZW5hbWU6IHN0cmluZyxcclxuZ3JhbnVsYXJpdHk6IEdyYW51bGFyaXR5LFxyXG5kYXRlOiBtb21lbnQsXHJcbmZvcm1hdDogc3RyaW5nLFxyXG5yYXdUZW1wbGF0ZUNvbnRlbnRzOiBzdHJpbmdcclxuKTogc3RyaW5nIHtcclxubGV0IHRlbXBsYXRlQ29udGVudHMgPSByYXdUZW1wbGF0ZUNvbnRlbnRzO1xyXG5cclxudGVtcGxhdGVDb250ZW50cyA9IHJhd1RlbXBsYXRlQ29udGVudHNcclxuXHQucmVwbGFjZSgve3tcXHMqZGF0ZVxccyp9fS9naSwgZmlsZW5hbWUpXHJcblx0LnJlcGxhY2UoL3t7XFxzKnRpbWVcXHMqfX0vZ2ksIHdpbmRvdy5tb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcclxuXHQucmVwbGFjZSgve3tcXHMqdGl0bGVcXHMqfX0vZ2ksIGZpbGVuYW1lKTtcclxuXHJcbmlmIChncmFudWxhcml0eSA9PT0gXCJkYXlcIikge1xyXG5cdHRlbXBsYXRlQ29udGVudHMgPSB0ZW1wbGF0ZUNvbnRlbnRzXHJcblx0LnJlcGxhY2UoL3t7XFxzKnllc3RlcmRheVxccyp9fS9naSwgZGF0ZS5jbG9uZSgpLnN1YnRyYWN0KDEsIFwiZGF5XCIpLmZvcm1hdChmb3JtYXQpKVxyXG5cdC5yZXBsYWNlKC97e1xccyp0b21vcnJvd1xccyp9fS9naSwgZGF0ZS5jbG9uZSgpLmFkZCgxLCBcImRcIikuZm9ybWF0KGZvcm1hdCkpXHJcblx0LnJlcGxhY2UoXHJcblx0XHQve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSxcclxuXHRcdChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcclxuXHRcdGNvbnN0IG5vdyA9IHdpbmRvdy5tb21lbnQoKTtcclxuXHRcdGNvbnN0IGN1cnJlbnREYXRlID0gZGF0ZS5jbG9uZSgpLnNldCh7XHJcblx0XHRcdGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxyXG5cdFx0XHRtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXHJcblx0XHRcdHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcclxuXHRcdH0pO1xyXG5cdFx0aWYgKGNhbGMpIHtcclxuXHRcdFx0Y3VycmVudERhdGUuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAobW9tZW50Rm9ybWF0KSB7XHJcblx0XHRcdHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChmb3JtYXQpO1xyXG5cdFx0fVxyXG5cdCk7XHJcbn1cclxuXHJcbmlmIChncmFudWxhcml0eSA9PT0gXCJ3ZWVrXCIpIHtcclxuXHR0ZW1wbGF0ZUNvbnRlbnRzID0gdGVtcGxhdGVDb250ZW50cy5yZXBsYWNlKFxyXG5cdC97e1xccyooc3VuZGF5fG1vbmRheXx0dWVzZGF5fHdlZG5lc2RheXx0aHVyc2RheXxmcmlkYXl8c2F0dXJkYXkpXFxzKjooLio/KX19L2dpLFxyXG5cdChfLCBkYXlPZldlZWssIG1vbWVudEZvcm1hdCkgPT4ge1xyXG5cdFx0Y29uc3QgZGF5ID0gZ2V0RGF5T2ZXZWVrTnVtZXJpY2FsVmFsdWUoZGF5T2ZXZWVrKTtcclxuXHRcdHJldHVybiBkYXRlLndlZWtkYXkoZGF5KS5mb3JtYXQobW9tZW50Rm9ybWF0LnRyaW0oKSk7XHJcblx0fVxyXG5cdCk7XHJcbn1cclxuXHJcbmlmIChncmFudWxhcml0eSA9PT0gXCJtb250aFwiKSB7XHJcblx0dGVtcGxhdGVDb250ZW50cyA9IHRlbXBsYXRlQ29udGVudHMucmVwbGFjZShcclxuXHQve3tcXHMqKG1vbnRoKVxccyooKFsrLV1cXGQrKShbeXFtd2Roc10pKT9cXHMqKDouKz8pP319L2dpLFxyXG5cdChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcclxuXHRcdGNvbnN0IG5vdyA9IHdpbmRvdy5tb21lbnQoKTtcclxuXHRcdGNvbnN0IG1vbnRoU3RhcnQgPSBkYXRlXHJcblx0XHQuY2xvbmUoKVxyXG5cdFx0LnN0YXJ0T2YoXCJtb250aFwiKVxyXG5cdFx0LnNldCh7XHJcblx0XHRcdGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxyXG5cdFx0XHRtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXHJcblx0XHRcdHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcclxuXHRcdH0pO1xyXG5cdFx0aWYgKGNhbGMpIHtcclxuXHRcdG1vbnRoU3RhcnQuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAobW9tZW50Rm9ybWF0KSB7XHJcblx0XHRyZXR1cm4gbW9udGhTdGFydC5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG1vbnRoU3RhcnQuZm9ybWF0KGZvcm1hdCk7XHJcblx0fVxyXG5cdCk7XHJcbn1cclxuXHJcbmlmIChncmFudWxhcml0eSA9PT0gXCJxdWFydGVyXCIpIHtcclxuXHR0ZW1wbGF0ZUNvbnRlbnRzID0gdGVtcGxhdGVDb250ZW50cy5yZXBsYWNlKFxyXG5cdC97e1xccyoocXVhcnRlcilcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSxcclxuXHQoXywgX3RpbWVPckRhdGUsIGNhbGMsIHRpbWVEZWx0YSwgdW5pdCwgbW9tZW50Rm9ybWF0KSA9PiB7XHJcblx0XHRjb25zdCBub3cgPSB3aW5kb3cubW9tZW50KCk7XHJcblx0XHRjb25zdCBtb250aFN0YXJ0ID0gZGF0ZVxyXG5cdFx0LmNsb25lKClcclxuXHRcdC5zdGFydE9mKFwicXVhcnRlclwiKVxyXG5cdFx0LnNldCh7XHJcblx0XHRcdGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxyXG5cdFx0XHRtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXHJcblx0XHRcdHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcclxuXHRcdH0pO1xyXG5cdFx0aWYgKGNhbGMpIHtcclxuXHRcdG1vbnRoU3RhcnQuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAobW9tZW50Rm9ybWF0KSB7XHJcblx0XHRyZXR1cm4gbW9udGhTdGFydC5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG1vbnRoU3RhcnQuZm9ybWF0KGZvcm1hdCk7XHJcblx0fVxyXG5cdCk7XHJcbn1cclxuXHJcbmlmIChncmFudWxhcml0eSA9PT0gXCJ5ZWFyXCIpIHtcclxuXHR0ZW1wbGF0ZUNvbnRlbnRzID0gdGVtcGxhdGVDb250ZW50cy5yZXBsYWNlKFxyXG5cdC97e1xccyooeWVhcilcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSxcclxuXHQoXywgX3RpbWVPckRhdGUsIGNhbGMsIHRpbWVEZWx0YSwgdW5pdCwgbW9tZW50Rm9ybWF0KSA9PiB7XHJcblx0XHRjb25zdCBub3cgPSB3aW5kb3cubW9tZW50KCk7XHJcblx0XHRjb25zdCBtb250aFN0YXJ0ID0gZGF0ZVxyXG5cdFx0LmNsb25lKClcclxuXHRcdC5zdGFydE9mKFwieWVhclwiKVxyXG5cdFx0LnNldCh7XHJcblx0XHRcdGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxyXG5cdFx0XHRtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXHJcblx0XHRcdHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcclxuXHRcdH0pO1xyXG5cdFx0aWYgKGNhbGMpIHtcclxuXHRcdG1vbnRoU3RhcnQuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAobW9tZW50Rm9ybWF0KSB7XHJcblx0XHRyZXR1cm4gbW9udGhTdGFydC5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG1vbnRoU3RhcnQuZm9ybWF0KGZvcm1hdCk7XHJcblx0fVxyXG5cdCk7XHJcbn1cclxuXHJcbnJldHVybiB0ZW1wbGF0ZUNvbnRlbnRzO1xyXG59XHJcblxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0Tm90ZUNyZWF0aW9uUGF0aChcclxuXHRhcHA6IEFwcCxcclxuXHRmaWxlbmFtZTogc3RyaW5nLFxyXG5cdHBlcmlvZGljQ29uZmlnOiBQZXJpb2RpY0NvbmZpZ1xyXG4gICk6IFByb21pc2U8c3RyaW5nPiB7XHJcblx0Y29uc3QgZGlyZWN0b3J5ID0gcGVyaW9kaWNDb25maWcuZm9sZGVyID8/IFwiXCI7XHJcblx0Y29uc3QgZmlsZW5hbWVXaXRoRXh0ID0gIWZpbGVuYW1lLmVuZHNXaXRoKFwiLm1kXCIpID8gYCR7ZmlsZW5hbWV9Lm1kYCA6IGZpbGVuYW1lO1xyXG4gIFxyXG5cdGNvbnN0IHBhdGggPSBub3JtYWxpemVQYXRoKGpvaW4oZGlyZWN0b3J5LCBmaWxlbmFtZVdpdGhFeHQpKTtcclxuXHRhd2FpdCBlbnN1cmVGb2xkZXJFeGlzdHMoYXBwLCBwYXRoKTtcclxuXHRyZXR1cm4gcGF0aDtcclxuICB9XHJcblxyXG4vLyBDcmVkaXQ6IEBjcmVhdGlvbml4L3BhdGguanNcclxuZnVuY3Rpb24gam9pbiguLi5wYXJ0U2VnbWVudHM6IHN0cmluZ1tdKTogc3RyaW5nIHtcclxuXHQvLyBTcGxpdCB0aGUgaW5wdXRzIGludG8gYSBsaXN0IG9mIHBhdGggY29tbWFuZHMuXHJcblx0bGV0IHBhcnRzOiBzdHJpbmdbXSA9IFtdO1xyXG5cdGZvciAobGV0IGkgPSAwLCBsID0gcGFydFNlZ21lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG5cdFx0cGFydHMgPSBwYXJ0cy5jb25jYXQocGFydFNlZ21lbnRzW2ldLnNwbGl0KFwiL1wiKSk7XHJcblx0fVxyXG5cdC8vIEludGVycHJldCB0aGUgcGF0aCBjb21tYW5kcyB0byBnZXQgdGhlIG5ldyByZXNvbHZlZCBwYXRoLlxyXG5cdGNvbnN0IG5ld1BhcnRzID0gW107XHJcblx0Zm9yIChsZXQgaSA9IDAsIGwgPSBwYXJ0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuXHRcdGNvbnN0IHBhcnQgPSBwYXJ0c1tpXTtcclxuXHRcdC8vIFJlbW92ZSBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaGVzXHJcblx0XHQvLyBBbHNvIHJlbW92ZSBcIi5cIiBzZWdtZW50c1xyXG5cdFx0aWYgKCFwYXJ0IHx8IHBhcnQgPT09IFwiLlwiKSBjb250aW51ZTtcclxuXHRcdC8vIFB1c2ggbmV3IHBhdGggc2VnbWVudHMuXHJcblx0XHRlbHNlIG5ld1BhcnRzLnB1c2gocGFydCk7XHJcblx0fVxyXG5cdC8vIFByZXNlcnZlIHRoZSBpbml0aWFsIHNsYXNoIGlmIHRoZXJlIHdhcyBvbmUuXHJcblx0aWYgKHBhcnRzWzBdID09PSBcIlwiKSBuZXdQYXJ0cy51bnNoaWZ0KFwiXCIpO1xyXG5cdC8vIFR1cm4gYmFjayBpbnRvIGEgc2luZ2xlIHN0cmluZyBwYXRoLlxyXG5cdHJldHVybiBuZXdQYXJ0cy5qb2luKFwiL1wiKTtcclxufVxyXG5cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZUZvbGRlckV4aXN0cyhhcHA6IEFwcCwgcGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0Y29uc3QgZGlycyA9IHBhdGgucmVwbGFjZSgvXFxcXC9nLCBcIi9cIikuc3BsaXQoXCIvXCIpO1xyXG5cdGRpcnMucG9wKCk7IC8vIHJlbW92ZSBiYXNlbmFtZVxyXG5cclxuXHRpZiAoZGlycy5sZW5ndGgpIHtcclxuXHRcdGNvbnN0IGRpciA9IGpvaW4oLi4uZGlycyk7XHJcblx0XHRpZiAoIWFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZGlyKSkge1xyXG5cdFx0YXdhaXQgYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihkaXIpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGdldERheXNPZldlZWsoKTogc3RyaW5nW10ge1xyXG5cdGNvbnN0IHsgbW9tZW50IH0gPSB3aW5kb3c7XHJcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuXHRsZXQgd2Vla1N0YXJ0ID0gKG1vbWVudC5sb2NhbGVEYXRhKCkgYXMgYW55KS5fd2Vlay5kb3c7XHJcblx0Y29uc3QgZGF5c09mV2VlayA9IFtcclxuXHQgIFwic3VuZGF5XCIsXHJcblx0ICBcIm1vbmRheVwiLFxyXG5cdCAgXCJ0dWVzZGF5XCIsXHJcblx0ICBcIndlZG5lc2RheVwiLFxyXG5cdCAgXCJ0aHVyc2RheVwiLFxyXG5cdCAgXCJmcmlkYXlcIixcclxuXHQgIFwic2F0dXJkYXlcIixcclxuXHRdO1xyXG4gIFxyXG5cdHdoaWxlICh3ZWVrU3RhcnQpIHtcclxuXHQgIGNvbnN0IGRheSA9IGRheXNPZldlZWsuc2hpZnQoKTtcclxuXHQgIGlmIChkYXkpIGRheXNPZldlZWsucHVzaChkYXkpO1xyXG5cdCAgd2Vla1N0YXJ0LS07XHJcblx0fVxyXG5cdHJldHVybiBkYXlzT2ZXZWVrO1xyXG4gIH1cclxuXHJcbmZ1bmN0aW9uIGdldERheU9mV2Vla051bWVyaWNhbFZhbHVlKGRheU9mV2Vla05hbWU6IHN0cmluZyk6IG51bWJlciB7XHJcblx0cmV0dXJuIGdldERheXNPZldlZWsoKS5pbmRleE9mKGRheU9mV2Vla05hbWUudG9Mb3dlckNhc2UoKSk7XHJcbiAgfSIsICJcdC8vIFx1NTNENlx1NUY5N1x1MzA1N1x1MzA1Rlx1NTE2OFx1MzBDN1x1MzBBNFx1MzBFQVx1MzBGQ1x1MzBDRVx1MzBGQ1x1MzBDOFx1MzA0Qlx1MzA4OVx1NjNBMlx1N0QyMlx1N0JDNFx1NTZGMlx1MzA2RVx1MzBDN1x1MzBBNFx1MzBFQVx1MzBGQ1x1MzBDRVx1MzBGQ1x1MzBDOFx1MzA5Mlx1NTIwN1x1MzA4QVx1NTFGQVx1MzA1OSAgXHJcblxyXG5pbXBvcnQgeyBBcHAsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IElHcmFudWxhcml0eSwgZ2V0RGF0ZVVJRCB9IGZyb20gXCJvYnNpZGlhbi1kYWlseS1ub3Rlcy1pbnRlcmZhY2VcIjtcclxuaW1wb3J0IHsgREFZU19QRVJfVU5JVCwgRGF0ZUluZm8gfSBmcm9tIFwiLi9tYWluXCI7XHJcbmltcG9ydCB7IENhbGVuZGFyU2V0IH0gZnJvbSBcIi4vcGVyaW9kaWNOb3Rlc1R5cGVzXCI7XHJcblxyXG5cdC8vICh2ZXIwLngueFx1MzA2RXBlcmlvZGljIG5vdGVzXHUzMDZCXHUzMDgyXHU1QkZFXHU1RkRDXHUzMDAyKVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGFyZ2V0RmlsZXMoYWxsRmlsZXM6UmVjb3JkPHN0cmluZyxURmlsZT4sIGdyYW51bGFyaXR5OiBJR3JhbnVsYXJpdHkpOiBURmlsZVtde1xyXG5cclxuXHRsZXQgZmlsZXM6IFRGaWxlW10gPSBbXTtcclxuXHRsZXQgY2hlY2tEYXRlID0gdGhpcy5zZWFyY2hSYW5nZS5sYXRlc3QuY2xvbmUoKTtcclxuXHRsZXQgY2hlY2tEYXRlRWFybGllc3QgPSB0aGlzLnNlYXJjaFJhbmdlLmVhcmxpZXN0LmNsb25lKCk7XHJcblxyXG5cdGlmICh0aGlzLnNldHRpbmdzLmluaXRpYWxTZWFyY2hUeXBlID09J2JhY2t3YXJkJyl7XHJcblx0XHRpZihjaGVja0RhdGUuaXNTYW1lKHdpbmRvdy5tb21lbnQoKSwnZGF5Jykpe1xyXG5cdFx0XHRjaGVja0RhdGUuYWRkKE1hdGguY2VpbCh0aGlzLnNldHRpbmdzLm9mZnNldC9EQVlTX1BFUl9VTklUW2dyYW51bGFyaXR5XSksZ3JhbnVsYXJpdHkpO1xyXG5cdFx0fVxyXG5cdFx0Y2hlY2tEYXRlRWFybGllc3QgPSB0aGlzLnNlYXJjaFJhbmdlLmxhdGVzdC5jbG9uZSgpLnN1YnRyYWN0KHRoaXMuc2V0dGluZ3MuZHVyYXRpb25bZ3JhbnVsYXJpdHldIC0gMSxncmFudWxhcml0eSk7XHJcblx0fSBlbHNlIHtcclxuXHRcdC8vIGZvcndhcmQgc2VhcmNoXHUzMDZFXHUzMDY4XHUzMDREXHJcblx0XHRjaGVja0RhdGUgPSB0aGlzLnNlYXJjaFJhbmdlLmVhcmxpZXN0LmNsb25lKCkuYWRkKHRoaXMuc2V0dGluZ3MuZHVyYXRpb25bZ3JhbnVsYXJpdHldIC0gMSxncmFudWxhcml0eSk7XHJcblx0fVxyXG5cdFxyXG5cdHdoaWxlIChjaGVja0RhdGUuaXNTYW1lT3JBZnRlcihjaGVja0RhdGVFYXJsaWVzdCxncmFudWxhcml0eSkpe1xyXG5cdFx0aWYgKGFsbEZpbGVzW2dldERhdGVVSUQoY2hlY2tEYXRlLCBncmFudWxhcml0eSldKXtcclxuXHRcdFx0ZmlsZXMucHVzaChhbGxGaWxlc1tnZXREYXRlVUlEKGNoZWNrRGF0ZSwgZ3JhbnVsYXJpdHkpXSk7XHJcblx0XHR9XHJcblx0XHRjaGVja0RhdGUuc3VidHJhY3QoMSxncmFudWxhcml0eSk7XHJcblx0fVxyXG5cdHJldHVybiBmaWxlcztcclxufVxyXG5cclxuLy8gXHU2M0EyXHU3RDIyXHU3QkM0XHU1NkYyXHUzMDZFUGVyaW9kaWMgTm90ZXNcdTMwOTJcdTUzRDZcdTVGOTdcdTMwNTlcdTMwOEIgXHVGRjA4cGVpcm9kaWMgbm90ZXMgMS54LnhcdTc1MjhcdUZGMDlcclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRhcmdldFBlcmlvZGljTm90ZXMoY2FsZW5kYXJTZXQ6IENhbGVuZGFyU2V0LCBncmFudWxhcml0eTogSUdyYW51bGFyaXR5KTogVEZpbGVbXXtcclxuXHRsZXQgZmlsZXM6IFRGaWxlW10gPSBbXTtcclxuXHJcblx0Ly8gZGF5XHU1N0ZBXHU2RTk2XHUzMDZFXHU2M0EyXHU3RDIyXHU3QkM0XHU1NkYyXHUzMDY3XHUzMDQyXHUzMDhCc2VhcmNoUmFuZ2VcdTMwOTJcdTUxNDNcdTMwNkJcdTMwMDFcdTdDOTJcdTVFQTZcdTMwNkJcdTVGRENcdTMwNThcdTMwNjZcdTYzQTJcdTdEMjJcdTdCQzRcdTU2RjJcdTMwOTJcdTYyRTFcdTVGMzVcdTMwNTdcdTMwNUZcdTMwODJcdTMwNkVcdTMwOTJjaGVja0RhdGUsY2hlY2tEYXRlRWFybGllc3RcdTMwNkJcdTRFRTNcdTUxNjVcclxuXHRsZXQgY2hlY2tEYXRlID0gdGhpcy5zZWFyY2hSYW5nZS5sYXRlc3QuY2xvbmUoKTtcclxuXHRsZXQgY2hlY2tEYXRlRWFybGllc3QgPSB0aGlzLnNlYXJjaFJhbmdlLmVhcmxpZXN0LmNsb25lKCk7XHJcblx0XHJcblx0aWYgKHRoaXMuc2V0dGluZ3MuaW5pdGlhbFNlYXJjaFR5cGU9PSdiYWNrd2FyZCcpe1xyXG5cdFx0aWYoY2hlY2tEYXRlLmlzU2FtZSh3aW5kb3cubW9tZW50KCksJ2RheScpKXtcclxuXHRcdFx0Y2hlY2tEYXRlLmFkZChNYXRoLmNlaWwodGhpcy5zZXR0aW5ncy5vZmZzZXQvREFZU19QRVJfVU5JVFtncmFudWxhcml0eV0pLGdyYW51bGFyaXR5KTtcclxuXHRcdH1cclxuXHRcdGNoZWNrRGF0ZUVhcmxpZXN0ID0gdGhpcy5zZWFyY2hSYW5nZS5sYXRlc3QuY2xvbmUoKS5zdWJ0cmFjdCh0aGlzLnNldHRpbmdzLmR1cmF0aW9uW2dyYW51bGFyaXR5XSAtIDEsZ3JhbnVsYXJpdHkpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHQvLyBmb3J3YXJkIHNlYXJjaFx1MzA2RVx1MzA2OFx1MzA0RFxyXG5cdFx0Y2hlY2tEYXRlID0gdGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdC5jbG9uZSgpLmFkZCh0aGlzLnNldHRpbmdzLmR1cmF0aW9uW2dyYW51bGFyaXR5XSAtIDEsZ3JhbnVsYXJpdHkpO1xyXG5cdH1cclxuXHRpZiAodGhpcy5zZXR0aW5ncy5zaG93RGVidWdJbmZvKXtcclxuXHRcdGNvbnNvbGUubG9nKCdETk86c2VhcmNoaW5nIGNhY2hlcyBvZiBQZXJpb2RpYyBOb3Rlcy4uLiBjYWxlbmRhciBzZXQ6JyxjYWxlbmRhclNldCk7XHJcblx0fVxyXG5cclxuXHR3aGlsZSAoY2hlY2tEYXRlLmlzU2FtZU9yQWZ0ZXIoY2hlY2tEYXRlRWFybGllc3QsZ3JhbnVsYXJpdHkpKXtcclxuXHRcdGNvbnN0IGNhY2hlcyA9IHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIikuY2FjaGUuZ2V0UGVyaW9kaWNOb3RlcyhjYWxlbmRhclNldC5pZCxncmFudWxhcml0eSxjaGVja0RhdGUpO1xyXG5cdFx0Zm9yIChjb25zdCBmaWxlIG9mIGNhY2hlcyl7XHJcblx0XHRcdC8vXHU1M0IzXHU1QkM2XHUzMDZCXHUzMERFXHUzMEMzXHUzMEMxXHUzMDU3XHUzMDVGXHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHU1MUZBXHUzMDZBXHUzMDUxXHUzMDhDXHUzMDcwXHUzMEI5XHUzMEFEXHUzMEMzXHUzMEQ3XHJcblx0XHRcdGlmICggdGhpcy5zZXR0aW5ncy5leGFjdE1hdGNoT25seSAmJiAhZmlsZT8ubWF0Y2hEYXRhPy5leGFjdCkge1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vXHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHUzMEQxXHUzMEI5XHUzMDRDLm1kXHUzMDY3XHU3RDQyXHUzMDhGXHUzMDg5XHUzMDZBXHUzMDUxXHUzMDhDXHUzMDcwXHVGRjA4XHUzMERFXHUzMEZDXHUzMEFGXHUzMEMwXHUzMEE2XHUzMEYzXHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHUzMDY3XHUzMDZBXHUzMDUxXHUzMDhDXHUzMDcwXHVGRjA5XHUzMEI5XHUzMEFEXHUzMEMzXHUzMEQ3XHJcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLm1hcmtkb3duT25seSAmJiAhZmlsZT8uZmlsZVBhdGguZW5kc1dpdGgoXCIubWRcIikpe1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIFx1MzBENVx1MzBBMVx1MzBBNFx1MzBFQlx1MzBEMVx1MzBCOVx1MzA2QlBOXHUzMDZFXHUzMEQ1XHUzMEE5XHUzMEVCXHUzMEMwXHUzMEQxXHUzMEI5XHUzMDRDXHU1NDJCXHUzMDdFXHUzMDhDXHUzMDY2XHUzMDQ0XHUzMDZBXHUzMDQ0ICYmIFBOXHUzMDZFXHUzMEQ1XHUzMEE5XHUzMEVCXHUzMEMwXHUzMEQxXHUzMEI5XHUzMDRDXHU2MzA3XHU1QjlBXHUzMDU1XHUzMDhDXHUzMDY2XHUzMDQ0XHUzMDhCIFx1MzA2RVx1MzA2OFx1MzA0RFx1MzA2Rlx1NTFFNlx1NzQwNlx1MzA5Mlx1MzBCOVx1MzBBRFx1MzBDM1x1MzBEN1xyXG5cdFx0XHQvLyBcdUZGMEFcdTczRkVcdTcyQjZcdTMwNkVQTlx1MzBEOVx1MzBGQ1x1MzBCRlx1MzA2N1x1MzA2Rlx1MzAwMVx1MzBBQlx1MzBFQ1x1MzBGM1x1MzBDMFx1MzBGQ1x1MzBCQlx1MzBDM1x1MzBDOFx1MzA2RVx1NjMwN1x1NUI5QVx1MzA2Qlx1MzA0Qlx1MzA0Qlx1MzA4Rlx1MzA4OVx1MzA1QVx1NTE2OFx1MzBCQlx1MzBDM1x1MzBDOFx1MzA2Qlx1NTQyQlx1MzA3RVx1MzA4Q1x1MzA4QlBOXHUzMDRDXHU4RkQ0XHUzMDU1XHUzMDhDXHUzMDhCXHUzMDg4XHUzMDQ2XHUzMDY3XHUzMDQyXHUzMDhCXHUzMDVGXHUzMDgxXHUzMDAxXHU1NDA0XHUzMEJCXHUzMEMzXHUzMEM4XHUzMDZFXHUzMEQ1XHUzMEE5XHUzMEVCXHUzMEMwXHUzMEQxXHUzMEI5XHUzMDY3XHUzMEQ1XHUzMEEzXHUzMEVCXHUzMEJGXHUzMEVBXHUzMEYzXHUzMEIwXHUzMDU5XHUzMDhCXHJcblx0XHRcdC8vIFx1MzA1Rlx1MzA2MFx1MzA1N1x1MzBENVx1MzBBOVx1MzBFQlx1MzBDMFx1MzBEMVx1MzBCOVx1MzA0Q1x1NjMwN1x1NUI5QVx1MzA1NVx1MzA4Q1x1MzA2Nlx1MzA0NFx1MzA2QVx1MzA0NFx1MzA2OFx1MzA0RFx1MzA2Rlx1MzBCOVx1MzBBRFx1MzBDM1x1MzBEN1xyXG5cdFx0XHRpZiAoIWZpbGUuZmlsZVBhdGguc3RhcnRzV2l0aChjYWxlbmRhclNldFtncmFudWxhcml0eV0uZm9sZGVyLmNvbmNhdChcIi9cIikpICYmIGNhbGVuZGFyU2V0W2dyYW51bGFyaXR5XS5mb2xkZXIpe1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNvbnN0IGZpbGVvYmogPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZS5maWxlUGF0aCk7XHJcblx0XHRcdGlmIChmaWxlb2JqIGluc3RhbmNlb2YgVEZpbGUpe1xyXG5cdFx0XHRcdGZpbGVzLnB1c2goZmlsZW9iaik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGNoZWNrRGF0ZS5zdWJ0cmFjdCgxLGdyYW51bGFyaXR5KTtcclxuXHR9XHJcblx0cmV0dXJuIGZpbGVzO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEJhY2tsaW5rRmlsZXMoYXBwOiBBcHAsIGZpbGU6VEZpbGUpOlRGaWxlW117XHJcblx0bGV0IGZpbGVzOlRGaWxlW109W107XHJcblx0bGV0IGJhY2tsaW5rcyA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEJhY2tsaW5rc0ZvckZpbGUoZmlsZSkuZGF0YTtcclxuXHRmb3IgKCBjb25zdCBrZXkgaW4gYmFja2xpbmtzKXtcclxuXHRcdGNvbnN0IGZpbGVvYmogPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGtleSk7XHJcblx0XHRpZiAoZmlsZW9iaiBpbnN0YW5jZW9mIFRGaWxlKXtcclxuXHRcdFx0ZmlsZXMucHVzaChmaWxlb2JqKTtcclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIGZpbGVzO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QmFja2xpbmtGaWxlc0RhdGF2aWV3KGFwcDpBcHAsIGZpbGU6VEZpbGUpOlRGaWxlW117XHJcblx0bGV0IGZpbGVzOlRGaWxlW109W107XHJcblxyXG5cdGlmICghYXBwLnBsdWdpbnMucGx1Z2luc1snZGF0YXZpZXcnXSl7XHJcblx0XHRyZXR1cm4gZ2V0QmFja2xpbmtGaWxlcyhhcHAsIGZpbGUpO1xyXG5cdH1cclxuXHJcblx0bGV0IGJhY2tsaW5rcyA9IGFwcC5wbHVnaW5zLnBsdWdpbnM/LmRhdGF2aWV3Py5hcGk/LnBhZ2VzKGBcIiR7ZmlsZS5wYXRofVwiYCk/LnZhbHVlc1swXT8uZmlsZS5pbmxpbmtzLnZhbHVlcztcclxuXHJcblx0aWYgKCFiYWNrbGlua3MpIHtcclxuXHRcdHJldHVybiBnZXRCYWNrbGlua0ZpbGVzKGFwcCxmaWxlKTtcclxuXHR9XHJcblx0Zm9yICggbGV0IGkgPSAwOyBpIDwgYmFja2xpbmtzLmxlbmd0aDsgaSsrKXtcclxuXHRcdGNvbnN0IGZpbGVvYmogPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGJhY2tsaW5rc1tpXS5wYXRoKTtcclxuXHRcdGlmIChmaWxlb2JqIGluc3RhbmNlb2YgVEZpbGUpe1xyXG5cdFx0XHRmaWxlcy5wdXNoKGZpbGVvYmopO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gZmlsZXM7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXREYXRlSW5mbyhhcHA6QXBwKTpEYXRlSW5mb1tdIHtcclxuXHJcblx0Ly8gXHU3QzkyXHU1RUE2XHUzMDZGZGF5XHUzMDZCXHU1NkZBXHU1QjlBXHUzMDAyXHJcblx0bGV0IHN0YXJ0RGF0ZSA9IHRoaXMuc2VhcmNoUmFuZ2UubGF0ZXN0LmNsb25lKCk7XHJcblx0aWYgKHRoaXMuc2V0dGluZ3MuaW5pdGlhbFNlYXJjaFR5cGUgPT0nYmFja3dhcmQnICYmIHN0YXJ0RGF0ZS5pc1NhbWUod2luZG93Lm1vbWVudCgpLCdkYXknKSl7XHJcblx0XHRzdGFydERhdGUuYWRkKHRoaXMuc2V0dGluZ3Mub2Zmc2V0LCdkYXlzJyk7ICAvLyBcdTg4NjhcdThBMThcdTU0MDhcdTMwNjNcdTMwNjZcdTMwOEJcdUZGMUZcclxuXHR9XHJcblx0XHJcblxyXG5cclxufSIsICJpbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBnZXREYXRlRnJvbUZpbGUgfSBmcm9tIFwib2JzaWRpYW4tZGFpbHktbm90ZXMtaW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7IEZpbGVJbmZvLCBHUkFOVUxBUklUWV9MSVNULCBPdXRsaW5lRGF0YSB9IGZyb20gXCIuL21haW5cIjtcclxuaW1wb3J0IHsgZ2V0QmFja2xpbmtGaWxlc0RhdGF2aWV3IH0gZnJvbSBcIi4vZ2V0VGFyZ2V0RmlsZXNcIjtcclxuXHJcbi8vIFx1MzBDN1x1MzBBNFx1MzBFQVx1MzBGQ1x1MzBDRVx1MzBGQ1x1MzBDOFx1MzA2RVx1OTE0RFx1NTIxN1x1MzA0Qlx1MzA4OVx1NTQwNFx1MzBENVx1MzBBMVx1MzBBNFx1MzBFQlx1MzA2Qlx1OTVBMlx1MzA1OVx1MzA4Qlx1NjBDNVx1NTgzMVx1MzA5Mlx1NjJCRFx1NTFGQVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmlsZUluZm8oZmlsZXM6VEZpbGVbXSk6UHJvbWlzZTxGaWxlSW5mb1tdPntcclxuICAgIGxldCBmaWxlSW5mbzpGaWxlSW5mb1tdPVtdO1xyXG4gICAgZm9yIChsZXQgaT0wOyBpIDwgZmlsZXMubGVuZ3RoIDsgaSsrKXtcclxuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlc1tpXSk7XHJcbiAgICAgICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KFwiXFxuXCIpO1xyXG5cclxuICAgICAgICBjb25zdCBiYWNrbGlua0ZpbGVzID0gKHRoaXMuc2V0dGluZ3Muc2hvd0JhY2tsaW5rcykgPyBnZXRCYWNrbGlua0ZpbGVzRGF0YXZpZXcoIHRoaXMuYXBwLCBmaWxlc1tpXSk6IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgbGV0IGluZm86RmlsZUluZm8gPSB7XHJcbiAgICAgICAgICAgIGRhdGU6IGdldERhdGVGcm9tRmlsZShmaWxlc1tpXSxHUkFOVUxBUklUWV9MSVNUW3RoaXMuYWN0aXZlR3JhbnVsYXJpdHldKSxcclxuICAgICAgICAgICAgLy9jb250ZW50OiBjb250ZW50LFxyXG4gICAgICAgICAgICBsaW5lczogbGluZXMsXHJcbiAgICAgICAgICAgIG51bU9mTGluZXM6IGxpbmVzLmxlbmd0aCxcclxuICAgICAgICAgICAgaXNGb2xkZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBiYWNrbGlua3M6IGJhY2tsaW5rRmlsZXMsXHJcbiAgICAgICAgICAgIGZyb250bWF0dGVyTGlua3M6IHVuZGVmaW5lZFxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBwZXJpb2RpYyBub3RlcyBiZXRhXHU1QkZFXHU1RkRDXHJcbiAgICAgICAgaWYgKHRoaXMudmVyUE4gPT0gMil7XHJcbiAgICAgICAgICAgIGluZm8uZGF0ZSA9IHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIikuY2FjaGUuY2FjaGVkRmlsZXMuZ2V0KHRoaXMuY2FsZW5kYXJTZXRzW3RoaXMuYWN0aXZlU2V0XS5pZCkuZ2V0KGZpbGVzW2ldLnBhdGgpLmRhdGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmaWxlSW5mby5wdXNoKGluZm8pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZpbGVJbmZvO1xyXG59XHJcblxyXG4vLyBcdTMwRTFcdTMwQkZcdTMwQzdcdTMwRkNcdTMwQkZcdTMwNEJcdTMwODlcdTMwQTJcdTMwQTZcdTMwQzhcdTMwRTlcdTMwQTRcdTMwRjNcdTg5ODFcdTdEMjBcdTMwOTJcdTYyQkRcdTUxRkFcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE91dGxpbmUoZmlsZXM6VEZpbGVbXSxpbmZvOkZpbGVJbmZvW10pOlByb21pc2U8T3V0bGluZURhdGFbXVtdPntcclxuICAgIGxldCBkYXRhOk91dGxpbmVEYXRhW11bXT1bXTsgICAgXHJcbiAgICBmb3IgKGxldCBpPTA7IGk8IGZpbGVzLmxlbmd0aCA7IGkrKyl7XHJcbiAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlc1tpXSk7XHJcblxyXG4gICAgICAgIC8vIHByb3BlcnRpZXMoZnJvbnRtYXR0ZXIpXHUzMDRCXHUzMDg5XHUzMEVBXHUzMEYzXHUzMEFGXHUzMDkyXHU1M0Q2XHU1Rjk3XHJcbiAgICAgICAgaW5mb1tpXS5mcm9udG1hdHRlckxpbmtzID0gY2FjaGU/LmZyb250bWF0dGVyTGlua3M7XHJcblxyXG4gICAgICAgIC8vIFx1N0E3QVx1OTE0RFx1NTIxN1x1MzA5Mlx1NjMwN1x1NUI5QVxyXG4gICAgICAgIGRhdGFbaV09W107XHJcbiAgICAgICAgaWYgKCFjYWNoZSl7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBoZWFkaW5ncyxsaW5rcyx0YWdzXHUzMDkyXHU2MkJEXHU1MUZBXHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdjaGVjayBoZWFkaW5ncycsY2FjaGUuaGFzT3duUHJvcGVydHkoXCJoZWFkaW5nc1wiKSApO1xyXG4gICAgICAgIGlmIChjYWNoZS5oYXNPd25Qcm9wZXJ0eShcImhlYWRpbmdzXCIpKXtcclxuICAgICAgICAgICAgZm9yIChsZXQgaj0wOyBqPCBjYWNoZS5oZWFkaW5ncy5sZW5ndGggOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudDpPdXRsaW5lRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlT2ZFbGVtZW50IDogXCJoZWFkaW5nXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gOiBjYWNoZS5oZWFkaW5nc1tqXS5wb3NpdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5VGV4dCA6IGNhY2hlLmhlYWRpbmdzW2pdLmhlYWRpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IGNhY2hlLmhlYWRpbmdzW2pdLmxldmVsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgZGF0YVtpXS5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnY2hlY2sgbGlua3MnLGNhY2hlLmhhc093blByb3BlcnR5KFwibGlua3NcIikgKTtcclxuICAgICAgICBpZiAoY2FjaGUuaGFzT3duUHJvcGVydHkoXCJsaW5rc1wiKSl7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGo9MDsgajwgY2FjaGUubGlua3MubGVuZ3RoIDsgaisrKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQ6T3V0bGluZURhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZU9mRWxlbWVudCA6IFwibGlua1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogY2FjaGUubGlua3Nbal0ucG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgLy9cdTMwREVcdTMwRkNcdTMwQUZcdTMwQzBcdTMwQTZcdTMwRjNcdTMwRUFcdTMwRjNcdTMwQUZcdTMwNkJcdTVCRkVcdTVGRENcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5VGV4dCA6IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoY2FjaGUubGlua3Nbal0uZGlzcGxheVRleHQgPT1cIlwiKSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjYWNoZS5saW5rc1tqXS5vcmlnaW5hbC5zdWJzdHJpbmcoMSxjYWNoZS5saW5rc1tqXS5vcmlnaW5hbC5pbmRleE9mKFwiXVwiKSkgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY2FjaGUubGlua3Nbal0uZGlzcGxheVRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgbGluazogY2FjaGUubGlua3Nbal0ubGlua1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGRhdGFbaV0ucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2NoZWNrIGxpc3RzJyk7XHJcbiAgICAgICAgaWYgKGNhY2hlLmhhc093blByb3BlcnR5KFwibGlzdEl0ZW1zXCIpKXtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGo9MDsgajwgY2FjaGUubGlzdEl0ZW1zLmxlbmd0aCA7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAvL1x1NEVFNVx1NEUwQlx1MzA2N1x1MzBFQVx1MzBCOVx1MzBDOFx1MzBBMlx1MzBBNFx1MzBDNlx1MzBFMFx1MzA2RVx1OTY4RVx1NUM2NFx1MzA2RVx1NTIyNFx1NUI5QVx1MzA5Mlx1ODg0Q1x1MzA0Nlx1MzAwMlxyXG4gICAgICAgICAgICAgICAgLy9cdTMwRUFcdTMwQjlcdTMwQzhcdTMwNkVcdTUxNDhcdTk4MkRcdTMwNkVcdTk4MDVcdTc2RUU6MFx1MzAwMVx1NTE0OFx1OTgyRFx1MzA2N1x1MzA2Rlx1MzA2QVx1MzA0NFx1MzA0Q1x1MzBFQlx1MzBGQ1x1MzBDOFx1MzBFQ1x1MzBEOVx1MzBFQjoxXHUzMDAxXHU3QjJDMlx1OTY4RVx1NUM2NFx1NEVFNVx1NEUwQlx1RkYxQTJcdTMwNjhcdTMwNTdcdTMwNjZcdTMwNDRcdTMwOEJcdTMwMDJcclxuICAgICAgICAgICAgICAgIC8vcGFyZW50XHUzMDRDXHU2QjYzXHUzMDZFXHU2NTcwXHUzMDZBXHUzMDg5XHU3QjJDMlx1OTY4RVx1NUM2NFx1NEVFNVx1NEUwQlxyXG4gICAgICAgICAgICAgICAgLy9cdThDQTBcdTMwNkVcdTY1NzBcdTMwNjdcdTMwMDFcdTdENzZcdTVCRkVcdTUwMjRcdTMwNENwb3NpdGlvbi5zdGFydC5saW5lXHUzMDY4XHU0RTAwXHU4MUY0XHUzMDU3XHUzMDY2XHUzMDQ0XHUzMDhDXHUzMDcwXHUzMEM4XHUzMEMzXHUzMEQ3XHUzMEEyXHUzMEE0XHUzMEM2XHUzMEUwKDApXHUzMDAxXHU5NzVFXHU0RTAwXHU4MUY0XHUzMDZBXHUzMDg5XHUzMEVCXHUzMEZDXHUzMEM4XHVGRjA4MVx1RkYwOVxyXG4gICAgICAgICAgICAgICAgLy9cdTMwNUZcdTMwNjBcdTMwNTdcdTg5OTZcdTg5OUFcdTc2ODRcdTMwNkJcdTk2RTJcdTMwOENcdTMwNUZcdTMwQzhcdTMwQzNcdTMwRDdcdTMwRUNcdTMwRDlcdTMwRUJcdTMwNkVcdTMwQTJcdTMwQTRcdTMwQzZcdTMwRTBcdTMwNjdcdTMwODJcdTMwMDFcdTk1OTNcdTMwNkJoZWFkaW5nXHUzMDRDXHUzMDZBXHUzMDQ0XHUzMDY4XHUzMEVCXHUzMEZDXHUzMEM4XHUzMEEyXHUzMEE0XHUzMEM2XHUzMEUwXHUzMDY4XHUzMDU3XHUzMDY2XHU1MjI0XHU1QjlBXHUzMDU1XHUzMDhDXHUzMDY2XHUzMDU3XHUzMDdFXHUzMDQ2XHUzMDZFXHUzMDY3XHUzMDAxXHJcbiAgICAgICAgICAgICAgICAvL1x1NTI0RFx1MzA2RVx1MzBFQVx1MzBCOVx1MzBDOFx1MzBBMlx1MzBBNFx1MzBDNlx1MzBFMFx1MzA2OFx1MzA2RVx1ODg0Q1x1MzA2RVx1NURFRVx1MzA0QzFcdTMwNkVcdTY2NDJcdTMwNkVcdTMwN0ZcdTMwRUJcdTMwRkNcdTMwQzhcdTMwQTJcdTMwQTRcdTMwQzZcdTMwRTBcdTMwNjhcdTMwNTdcdTMwNjZcdTUyMjRcdTVCOUFcdTMwNTlcdTMwOEJcdTMwODhcdTMwNDZcdTRGRUVcdTZCNjNcdTMwNTlcdTMwOEJcdTMwMDJcclxuICAgICAgICAgICAgICAgIGxldCBsaXN0TGV2ZWw6IG51bWJlciA9IDA7IC8vIDA6dG9wIGl0ZW0gb2YgYSBsaXN0IDE6cm9vdCBsZXZlIDI6b3RoZXJcclxuICAgICAgICAgICAgICAgIGlmIChjYWNoZS5saXN0SXRlbXNbal0ucGFyZW50ID4wKXtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0TGV2ZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChqPjApe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKE1hdGguYWJzKGNhY2hlLmxpc3RJdGVtc1tqXS5wYXJlbnQpID09IGNhY2hlLmxpc3RJdGVtc1tqXS5wb3NpdGlvbi5zdGFydC5saW5lKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoY2FjaGUubGlzdEl0ZW1zW2pdLnBvc2l0aW9uLnN0YXJ0LmxpbmUgLSBjYWNoZS5saXN0SXRlbXNbai0xXS5wb3NpdGlvbi5zdGFydC5saW5lID09IDEpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0TGV2ZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQ6T3V0bGluZURhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZU9mRWxlbWVudCA6IFwibGlzdEl0ZW1zXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gOiBjYWNoZS5saXN0SXRlbXNbal0ucG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVRleHQgOiB0aGlzLmZpbGVJbmZvW2ldLmxpbmVzW2NhY2hlLmxpc3RJdGVtc1tqXS5wb3NpdGlvbi5zdGFydC5saW5lXS5yZXBsYWNlKC9eKFxcc3xcXHQpKi1cXHMoXFxbLlxcXVxccykqLywnJyksXHJcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWwgOiBsaXN0TGV2ZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFzayA6IGNhY2hlLmxpc3RJdGVtc1tqXS50YXNrXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgZGF0YVtpXS5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdjaGVjayB0YWdzJyxjYWNoZS5oYXNPd25Qcm9wZXJ0eShcInRhZ3NcIikgKTtcclxuICAgICAgICBpZiAoY2FjaGUuaGFzT3duUHJvcGVydHkoXCJ0YWdzXCIpKXtcclxuICAgICAgICAgICAgZm9yIChsZXQgaj0wOyBqPCBjYWNoZS50YWdzLmxlbmd0aCA7IGorKyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50Ok91dGxpbmVEYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGVPZkVsZW1lbnQgOiBcInRhZ1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogY2FjaGUudGFnc1tqXS5wb3NpdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5VGV4dCA6IGNhY2hlLnRhZ3Nbal0udGFnLnN1YnN0cmluZygxKSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBkYXRhW2ldLnB1c2goZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gXHU4OTgxXHU3RDIwXHUzMDZFXHU3NjdCXHU1ODM0XHU5ODA2XHUzMDZCXHUzMEJEXHUzMEZDXHUzMEM4XHJcbiAgICAgICAgZGF0YVtpXS5zb3J0KChhLGIpPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gKGEucG9zaXRpb24uc3RhcnQub2Zmc2V0IC0gYi5wb3NpdGlvbi5zdGFydC5vZmZzZXQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGF0YTtcclxuXHJcbn0iLCAiaW1wb3J0IHsgQXBwLCBNYXJrZG93blZpZXcsIE1lbnUsIFRGaWxlLCBwYXJzZUxpbmt0ZXh0LCBzZXRJY29uLCBzZXRUb29sdGlwIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IEZpbGVJbmZvLCBPdXRsaW5lRGF0YSwgR1JBTlVMQVJJVFlfTElTVCB9IGZyb20gXCIuL21haW5cIjtcclxuaW1wb3J0IHsgYWRkRmxhZywgY2hlY2tGbGFnLCBnZXRTdWJwYXRoUG9zaXRpb24sIHJlbW92ZUZsYWcgfSBmcm9tIFwiLi91dGlsXCI7XHJcbmltcG9ydCB7IERhaWx5Tm90ZU91dGxpbmVWaWV3VHlwZSB9IGZyb20gXCIuL3ZpZXdcIjtcclxuXHJcbi8vICBcdTMwQTJcdTMwQTZcdTMwQzhcdTMwRTlcdTMwQTRcdTMwRjNcdTYzQ0ZcdTc1M0JcdFxyXG5leHBvcnQgZnVuY3Rpb24gZHJhd091dGxpbmUoIGZpbGVzOiBURmlsZVtdLCBpbmZvOiBGaWxlSW5mb1tdLCBkYXRhOiBPdXRsaW5lRGF0YVtdW10pOnZvaWQge1xyXG5cclxuICAgIGNvbnN0IGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCA9IGNyZWF0ZURpdihcIm5hdi1maWxlcy1jb250YWluZXIgbm9kZS1pbnNlcnQtZXZlbnRcIik7XHJcbiAgICBjb25zdCByb290RWw6IEhUTUxFbGVtZW50ID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KFwidHJlZS1pdGVtIG5hdi1mb2xkZXIgbW9kLXJvb3RcIik7IFxyXG4gICAgY29uc3Qgcm9vdENoaWxkcmVuRWw6IEhUTUxFbGVtZW50ID0gcm9vdEVsLmNyZWF0ZURpdihcInRyZWUtaXRlbS1jaGlsZHJlbiBuYXYtZm9sZGVyLWNoaWxkcmVuXCIpOyBcclxuXHJcbiAgICBpZiAoZmlsZXMubGVuZ3RoID09IDApe1xyXG4gICAgICAgIHJvb3RDaGlsZHJlbkVsLmNyZWF0ZUVsKFwiaDRcIix7XHJcbiAgICAgICAgICAgIHRleHQ6IFwiRGFpbHkvcGVyaW9kaWMgbm90ZSBsb2FkaW5nIGVycm9yKHRyeSBjbGlja2luZyBvbiB0aGUgSG9tZSBpY29uKVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaW5jbHVkZSBvbmx5IG1vZGVcdTMwNENcdTMwQUFcdTMwRjNcdTMwNkJcdTMwNkFcdTMwNjNcdTMwNjZcdTMwNDRcdTMwOEJcdTMwNEJcclxuICAgIGxldCBpbmNsdWRlTW9kZTogYm9vbGVhbiA9ICh0aGlzLnNldHRpbmdzLmluY2x1ZGVPbmx5ICE9ICdub25lJykgJiYgKEJvb2xlYW4odGhpcy5zZXR0aW5ncy53b3Jkc1RvSW5jbHVkZS5sZW5ndGgpIHx8ICh0aGlzLnNldHRpbmdzLmluY2x1ZGVCZWdpbm5pbmcpKTtcclxuXHJcbiAgICAvLyBcdTg4NjhcdTc5M0FcdTMwQUFcdTMwRjNcdTMwNkJcdTMwNkFcdTMwNjNcdTMwNjZcdTMwNDRcdTMwOEJcdTg5OEJcdTUxRkFcdTMwNTdcdTMwRUNcdTMwRDlcdTMwRUJcdTMwNkVcdTY3MDBcdTlBRDhcdTUwMjRcclxuICAgIGxldCBtYXhMZXZlbCA9IHRoaXMuc2V0dGluZ3MuaGVhZGluZ0xldmVsLmluZGV4T2YodHJ1ZSk7XHJcblxyXG4gICAgXHJcblxyXG5cclxuICAgIGZvciAobGV0IGk9MDsgaTxmaWxlcy5sZW5ndGggOyBpKyspe1xyXG5cclxuICAgICAgICAvLyBcdTY3MDBcdTY1QjBcdTMwNkVcdTg5OEJcdTUxRkFcdTMwNTdcdTMwRUNcdTMwRDlcdTMwRUJcclxuICAgICAgICBsZXQgbGF0ZXN0SGVhZGluZ0xldmVsID0gMDtcclxuXHJcbiAgICAgICAgLy8gXHUzMEM3XHUzMEE0XHUzMEVBXHUzMEZDXHUzMENFXHUzMEZDXHUzMEM4XHUzMDZFXHUzMEJGXHUzMEE0XHUzMEM4XHUzMEVCXHU5MEU4XHU1MjA2XHU0RjVDXHU2MjEwID0gXHUzMEQ1XHUzMEE5XHUzMEVCXHUzMEMwXHU0RjVDXHU2MjEwXHJcbiAgICAgICAgY29uc3QgZGFpbHlOb3RlRWw6IEhUTUxFbGVtZW50ID0gcm9vdENoaWxkcmVuRWwuY3JlYXRlRGl2KFwidHJlZS1pdGVtIG5hdi1mb2xkZXJcIik7XHJcbiAgICAgICAgY29uc3QgZGFpbHlOb3RlVGl0bGVFbDogSFRNTEVsZW1lbnQgPSBkYWlseU5vdGVFbC5jcmVhdGVEaXYoXCJ0cmVlLWl0ZW0tc2VsZiBpcy1jbGlja2FibGUgbW9kLWNvbGxhcHNpYmxlIG5hdi1mb2xkZXItdGl0bGVcIik7XHJcbiAgICAgICAgY29uc3QgZGFpbHlOb3RlQ2hpbGRyZW5FbDogSFRNTEVsZW1lbnQgPSBkYWlseU5vdGVFbC5jcmVhdGVEaXYoXCJ0cmVlLWl0ZW0tY2hpbGRyZW4gbmF2LWZvbGRlci1jaGlsZHJlblwiKTtcclxuXHJcbiAgICAgICAgLy8gXHUzMENFXHUzMEZDXHUzMEM4XHUzMEJGXHUzMEE0XHUzMEM4XHUzMEVCXHUzMDZCXHU4MENDXHU2NjZGXHU4MjcyXHUzMDkyXHU4Q0EwXHU4Mzc3XHJcbiAgICAgICAgY29uc3QgY2hhbmdlQ29sb3IgPSB0aGlzLnNldHRpbmdzLm5vdGVUaXRsZUJhY2tncm91bmRDb2xvcjtcclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZUNvbG9yICE9J25vbmUnKXtcclxuICAgICAgICAgICAgY29uc3QgY3VzdG9tQ29sb3IgPSB0aGlzLnNldHRpbmdzLmN1c3RvbU5vdGVUaXRsZUJhY2tncm91bmRDb2xvcjtcclxuICAgICAgICAgICAgY29uc3QgY3VzdG9tQ29sb3JIb3ZlciA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tTm90ZVRpdGxlQmFja2dyb3VuZENvbG9ySG92ZXI7XHJcbiAgICAgICAgICAgIGNvbnN0IHRoZW1lID0gQm9vbGVhbihkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdLmNsYXNzTGlzdC5jb250YWlucygndGhlbWUtbGlnaHQnKSk/ICdsaWdodCc6J2RhcmsnXHJcblxyXG4gICAgICAgICAgICBkYWlseU5vdGVUaXRsZUVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGN1c3RvbUNvbG9yW2NoYW5nZUNvbG9yXVt0aGVtZV07XHJcbiAgICAgICAgICAgIGRhaWx5Tm90ZVRpdGxlRWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjdXN0b21Db2xvckhvdmVyW2NoYW5nZUNvbG9yXVt0aGVtZV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBkYWlseU5vdGVUaXRsZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPWN1c3RvbUNvbG9yW2NoYW5nZUNvbG9yXVt0aGVtZV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gIFx1NjI5OFx1MzA4QVx1MzA1Rlx1MzA1Rlx1MzA3Rlx1MzBBMlx1MzBBNFx1MzBCM1x1MzBGM1xyXG4gICAgICAgIGNvbnN0IG5vdGVDb2xsYXBzZUljb246SFRNTEVsZW1lbnQgPSBkYWlseU5vdGVUaXRsZUVsLmNyZWF0ZURpdihcInRyZWUtaXRlbS1pY29uIGNvbGxhcHNlLWljb24gbmF2LWZvbGRlci1jb2xsYXBzZS1pbmRpY2F0b3JcIik7XHJcbiAgICAgICAgc2V0SWNvbihub3RlQ29sbGFwc2VJY29uLFwicmlnaHQtdHJpYW5nbGVcIik7XHJcblxyXG4gICAgICAgIC8vXHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHU1NDBEXHUzMDZCXHUzMEEyXHUzMEE0XHUzMEIzXHUzMEYzXHUzMDkyXHU0RUQ4XHU1MkEwXHJcbiAgICAgICAgLy8gc3dpdGNoKHRoaXMuc2V0dGluZ3MuaWNvbi5ub3RlKXtcclxuICAgICAgICAvLyAgICAgY2FzZSAnbm9uZSc6XHJcbiAgICAgICAgLy8gICAgICAgICBicmVhaztcclxuICAgICAgICAvLyAgICAgY2FzZSAnY3VzdG9tJzpcclxuICAgICAgICAvLyAgICAgICAgIHNldEljb24oZGFpbHlOb3RlVGl0bGVFbCwgdGhpcy5zZXR0aW5ncy5jdXN0b21JY29uLm5vdGUpO1xyXG4gICAgICAgIC8vICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgLy8gICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgLy8gICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5pY29uLm5vdGUpe1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHNldEljb24oZGFpbHlOb3RlVGl0bGVFbCwgdGhpcy5zZXR0aW5ncy5pY29uLm5vdGUpO1xyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgLy8gIFx1NjI5OFx1MzA4QVx1MzA1Rlx1MzA1Rlx1MzA3Rlx1MzBBMlx1MzBBNFx1MzBCM1x1MzBGM1x1MzBBRlx1MzBFQVx1MzBDM1x1MzBBRlx1NjY0Mlx1MzA2RVx1NTFFNlx1NzQwNlxyXG4gICAgICAgIG5vdGVDb2xsYXBzZUljb24uYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICBhc3luYyAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1MzBENVx1MzBBOVx1MzBGQ1x1MzBFQlx1MzBDOVx1MzA1NVx1MzA4Q1x1MzA2Nlx1MzA0NFx1MzA4Qlx1NTgzNFx1NTQwOFxyXG4gICAgICAgICAgICAgICAgaWYgKGluZm9baV0uaXNGb2xkZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NTAwQlx1NTIyNVx1MzBENVx1MzBBOVx1MzBGQ1x1MzBFQlx1MzBDOVx1MzBENVx1MzBFOVx1MzBCMFx1MzA5Mlx1OTY2NFx1NTNCQlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jb2xsYXBzZUFsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tGbGFnKGZpbGVzW2ldLCAnZm9sZCcsIHRoaXMuc2V0dGluZ3MpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUZsYWcoZmlsZXNbaV0sICdmb2xkJywgdGhpcy5zZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHUzMEFBXHUzMEZDXHUzMEQ3XHUzMEYzXHU1MUU2XHU3NDA2XHJcbiAgICAgICAgICAgICAgICAgICAgZGFpbHlOb3RlRWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtY29sbGFwc2VkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbm90ZUNvbGxhcHNlSWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdpcy1jb2xsYXBzZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBpbmZvW2ldLmlzRm9sZGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZGFpbHlOb3RlQ2hpbGRyZW5FbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1OTU4Qlx1MzA0NFx1MzA2Nlx1MzA0NFx1MzA4Qlx1NTgzNFx1NTQwOFxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1MDBCXHU1MjI1XHUzMEQ1XHUzMEE5XHUzMEZDXHUzMEVCXHUzMEM5XHUzMEQ1XHUzMEU5XHUzMEIwXHUzMDkyXHU4RkZEXHU1MkEwXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNvbGxhcHNlQWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZsYWcoZmlsZXNbaV0sJ2ZvbGQnLHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTMwRDVcdTMwQTlcdTMwRkNcdTMwRUJcdTMwQzlcdTUxRTZcdTc0MDZcclxuICAgICAgICAgICAgICAgICAgICBkYWlseU5vdGVFbC5jbGFzc0xpc3QuYWRkKCdpcy1jb2xsYXBzZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBub3RlQ29sbGFwc2VJY29uLmNsYXNzTGlzdC5hZGQoJ2lzLWNvbGxhcHNlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGluZm9baV0uaXNGb2xkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhaWx5Tm90ZUNoaWxkcmVuRWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuXHJcbiAgICAgICAgLy93ZWVrbHkgbm90ZVx1MzA2RVx1NTgzNFx1NTQwOFx1MzAwMVx1MzBENVx1MzBBMVx1MzBBNFx1MzBFQlx1NTQwRFx1MzA2Qlx1NjVFNVx1NEVEOFx1MzA2RVx1N0JDNFx1NTZGMlx1MzA5Mlx1NEVEOFx1NTJBMFx1ODg2OFx1NzkzQVxyXG4gICAgICAgIGxldCBuYW1lID0gZmlsZXNbaV0uYmFzZW5hbWU7XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuYXR0YWNoV2Vla2x5Tm90ZXNOYW1lICYmIEdSQU5VTEFSSVRZX0xJU1RbdGhpcy5hY3RpdmVHcmFudWxhcml0eV0gPT0nd2Vlaycpe1xyXG4gICAgICAgICAgICBuYW1lID0gbmFtZSArIFwiIChcIiArdGhpcy5maWxlSW5mb1tpXS5kYXRlLmNsb25lKCkuc3RhcnRPZignd2VlaycpLmZvcm1hdChcIk1NL0REIFstXSBcIikgKyB0aGlzLmZpbGVJbmZvW2ldLmRhdGUuY2xvbmUoKS5lbmRPZignd2VlaycpLmZvcm1hdChcIk1NL0REXCIpICtcIilcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGFpbHlOb3RlVGl0bGVFbC5jcmVhdGVEaXYoXCJ0cmVlLWl0ZW0taW5uZXIgbmF2LWZvbGRlci10aXRsZS1jb250ZW50XCIpLnNldFRleHQobmFtZSk7XHJcblxyXG4gICAgICAgIC8vXHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHU1NDBEXHUzMDZFXHU1RjhDXHUzMDZFXHU2MEM1XHU1ODMxXHUzMDkyXHU4ODY4XHU3OTNBXHJcbiAgICAgICAgY29uc3QgaW5mb1RvRGlzcGxheSA9ICh0aGlzLmFjdGl2ZUdyYW51bGFyaXR5ID09IDAgKSA/IHRoaXMuc2V0dGluZ3MuZGlzcGxheUZpbGVJbmZvRGFpbHkgOiB0aGlzLnNldHRpbmdzLmRpc3BsYXlGaWxlSW5mb1BlcmlvZGljO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKGluZm9Ub0Rpc3BsYXkpIHtcclxuICAgICAgICAgICAgY2FzZSAnbGluZXMnOlxyXG4gICAgICAgICAgICAgICAgZGFpbHlOb3RlVGl0bGVFbC5kYXRhc2V0LnN1YmluZm8gPSBpbmZvW2ldLm51bU9mTGluZXMudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdkYXlzJzpcclxuICAgICAgICAgICAgICAgIGxldCBiYXNlZGF0ZSA9ICh0aGlzLnNldHRpbmdzLmluaXRpYWxTZWFyY2hUeXBlID09IFwiYmFja3dhcmRcIik/IHdpbmRvdy5tb21lbnQoKTogd2luZG93Lm1vbWVudCh0aGlzLnNldHRpbmdzLm9uc2V0KTtcclxuICAgICAgICAgICAgICAgIGRhaWx5Tm90ZVRpdGxlRWwuZGF0YXNldC5zdWJpbmZvID0gTWF0aC5hYnMoaW5mb1tpXS5kYXRlLmRpZmYoYmFzZWRhdGUuc3RhcnRPZihHUkFOVUxBUklUWV9MSVNUW3RoaXMuYWN0aXZlR3JhbnVsYXJpdHldKSxHUkFOVUxBUklUWV9MSVNUW3RoaXMuYWN0aXZlR3JhbnVsYXJpdHldKSkudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdkb3cnOlxyXG4gICAgICAgICAgICAgICAgZGFpbHlOb3RlVGl0bGVFbC5kYXRhc2V0LnN1YmluZm8gPSBpbmZvW2ldLmRhdGUuZm9ybWF0KFwiZGRkZFwiKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdkb3dzaG9ydCc6XHJcbiAgICAgICAgICAgICAgICBkYWlseU5vdGVUaXRsZUVsLmRhdGFzZXQuc3ViaW5mbyA9IGluZm9baV0uZGF0ZS5mb3JtYXQoXCJkZGRcIik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnd2Vla251bWJlcic6XHJcbiAgICAgICAgICAgICAgICBkYWlseU5vdGVUaXRsZUVsLmRhdGFzZXQuc3ViaW5mbyA9IGluZm9baV0uZGF0ZS5mb3JtYXQoXCJbd113d1wiKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICd0YWcnOlxyXG4gICAgICAgICAgICAgICAgbGV0IGZpcnN0dGFnSW5kZXggPSBkYXRhW2ldLmZpbmRJbmRleCggKGVsZW1lbnQsaW5kZXgpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtpXVtpbmRleF0udHlwZU9mRWxlbWVudCA9PSd0YWcnKTtcclxuICAgICAgICAgICAgICAgIGlmIChmaXJzdHRhZ0luZGV4ID49IDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhaWx5Tm90ZVRpdGxlRWwuZGF0YXNldC5zdWJpbmZvID0gZGF0YVtpXVtmaXJzdHRhZ0luZGV4XS5kaXNwbGF5VGV4dDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdub25lJzpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL1x1MzBDRVx1MzBGQ1x1MzBDOFx1MzBCRlx1MzBBNFx1MzBDOFx1MzBFQlx1MzA5Mlx1MzBBRlx1MzBFQVx1MzBDM1x1MzBBRlx1MzA1N1x1MzA1Rlx1MzA4OVx1MzA1RFx1MzA2RVx1MzBENVx1MzBBMVx1MzBBNFx1MzBFQlx1MzA5Mm9wZW5cclxuICAgICAgICBkYWlseU5vdGVUaXRsZUVsLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKGZpbGVzW2ldKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZmFsc2VcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvL2hvdmVyIHByZXZpZXdcclxuICAgICAgICBkYWlseU5vdGVUaXRsZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UudHJpZ2dlcignaG92ZXItbGluaycsIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LFxyXG4gICAgICAgICAgICAgICAgc291cmNlOiBEYWlseU5vdGVPdXRsaW5lVmlld1R5cGUsXHJcbiAgICAgICAgICAgICAgICBob3ZlclBhcmVudDogcm9vdEVsLFxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0RWw6IGRhaWx5Tm90ZVRpdGxlRWwsXHJcbiAgICAgICAgICAgICAgICBsaW5rdGV4dDogZmlsZXNbaV0ucGF0aCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gXHUzMEIzXHUzMEYzXHUzMEM2XHUzMEFEXHUzMEI5XHUzMEM4XHUzMEUxXHUzMENCXHUzMEU1XHUzMEZDXHJcbiAgICAgICAgZGFpbHlOb3RlVGl0bGVFbC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImNvbnRleHRtZW51XCIsXHJcbiAgICAgICAgICAgIChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVudSA9IG5ldyBNZW51KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9cdTY1QjBcdTg5OEZcdTMwQkZcdTMwRDZcdTMwNkJcdTk1OEJcdTMwNEZcclxuICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiT3BlbiBpbiBuZXcgdGFiXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiZmlsZS1wbHVzXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd0YWInKS5vcGVuRmlsZShmaWxlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgLy9cdTUzRjNcdTMwNkJcdTk1OEJcdTMwNEZcclxuICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiT3BlbiB0byB0aGUgcmlnaHRcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJzZXBhcmF0b3ItdmVydGljYWxcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3NwbGl0Jykub3BlbkZpbGUoZmlsZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIC8vXHU2NUIwXHU4OThGXHUzMEE2XHUzMEEzXHUzMEYzXHUzMEM5XHUzMEE2XHUzMDZCXHU5NThCXHUzMDRGXHJcbiAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIk9wZW4gaW4gbmV3IHdpbmRvd1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcInNjYW5cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd3aW5kb3cnKS5vcGVuRmlsZShsaW5rVGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuUG9wb3V0TGVhZih7c2l6ZTp7d2lkdGg6dGhpcy5zZXR0aW5ncy5wb3BvdXRTaXplLndpZHRoLGhlaWdodDp0aGlzLnNldHRpbmdzLnBvcG91dFNpemUuaGVpZ2h0fX0pLm9wZW5GaWxlKGZpbGVzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnBvcG91dEFsd2F5c09uVG9wKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRQb3BvdXRBbHdheXNPblRvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBjb25zdHJ1Y3RPdXRsaW5lRE9NLmNhbGwodGhpcywgZmlsZXNbaV0sIGluZm9baV0sIGRhdGFbaV0sIGRhaWx5Tm90ZUNoaWxkcmVuRWwpO1xyXG5cclxuICAgICAgICAvLyBpbmNsdWRlIG1vZGUgXHU3NTI4XHUzMDZFXHU1OTA5XHU2NTcwXHUzMDkyXHU1QkEzXHU4QTAwXHJcbiAgICAgICAgbGV0IGlzSW5jbHVkZWQgPSB0aGlzLnNldHRpbmdzLmluY2x1ZGVCZWdpbm5pbmc7XHJcbiAgICAgICAgbGV0IGluY2x1ZGVNb2RlSGVhZGluZ0xldmVsOiBudW1iZXI7XHJcbiAgICAgICAgLy8gZXhjbHVkZSBtb2RlIFx1NzUyOFx1NTkwOVx1NjU3MFxyXG4gICAgICAgIGxldCBpc0V4Y2x1ZGVkID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGV4Y2x1ZGVUeXBlOiBzdHJpbmc7XHJcbiAgICAgICAgbGV0IGV4Y2x1ZGVNb2RlSGVhZGluZ0xldmVsOiBudW1iZXI7XHJcbiAgICAgICAgbGV0IHByaW1lVHlwZSA9IHRoaXMuc2V0dGluZ3MuaW5jbHVkZU9ubHkgPT0gJ25vbmUnID8gdGhpcy5zZXR0aW5ncy5wcmltZUVsZW1lbnQgOiB0aGlzLnNldHRpbmdzLmluY2x1ZGVPbmx5O1xyXG4gICAgICAgIC8vIGV4dHJhY3QgXHUzMERFXHUzMEMzXHUzMEMxXHUzMDU5XHUzMDhCXHU5ODA1XHU3NkVFXHUzMDRDXHUzMDQyXHUzMDYzXHUzMDVGXHUzMDRCXHUzMDY5XHUzMDQ2XHUzMDRCXHJcbiAgICAgICAgbGV0IGlzRXh0cmFjdGVkID0gZmFsc2U7XHJcblxyXG5cclxuICAgICAgICAvLyBwcm9wZXJ0aWVzXHUzMDZFXHU1MUU2XHU3NDA2XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3Muc2hvd1Byb3BlcnR5TGlua3MgJiYgaW5mb1tpXS5mcm9udG1hdHRlckxpbmtzKXtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpbmZvW2ldLmZyb250bWF0dGVyTGlua3MubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rVGFyZ2V0ID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChwYXJzZUxpbmt0ZXh0KGluZm9baV0uZnJvbnRtYXR0ZXJMaW5rc1tqXS5saW5rKS5wYXRoLCBmaWxlc1tpXS5wYXRoKTtcclxuICAgICAgICAgICAgICAgIGlmICghKGxpbmtUYXJnZXQgaW5zdGFuY2VvZiBURmlsZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtTdWJwYXRoID0gcGFyc2VMaW5rdGV4dChpbmZvW2ldLmZyb250bWF0dGVyTGlua3Nbal0ubGluaykuc3VicGF0aDtcclxuICAgICAgICAgICAgICAgIC8vIFx1NjJCRFx1NTFGQSBleHRyYWN0XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5leHRyYWN0TW9kZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZXh0cmFjdFRhc2sgPT0gdHJ1ZSB8fCAhaW5mb1tpXS5mcm9udG1hdHRlckxpbmtzW2pdLmRpc3BsYXlUZXh0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGhpcy5zZXR0aW5ncy53b3Jkc1RvRXh0cmFjdC50b0xvd2VyQ2FzZSgpKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRXh0cmFjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0bGluZUVsOiBIVE1MRWxlbWVudCA9IGRhaWx5Tm90ZUNoaWxkcmVuRWwuY3JlYXRlRGl2KFwidHJlZS1pdGVtIG5hdi1maWxlXCIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0bGluZVRpdGxlOiBIVE1MRWxlbWVudCA9IG91dGxpbmVFbC5jcmVhdGVEaXYoXCJ0cmVlLWl0ZW0tc2VsZiBpcy1jbGlja2FibGUgbmF2LWZpbGUtdGl0bGVcIik7XHJcbiAgICAgICAgICAgICAgICBzZXRJY29uKG91dGxpbmVUaXRsZSwnbGluaycpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgb3V0bGluZVRpdGxlLnN0eWxlLnBhZGRpbmdMZWZ0ID0nMC41ZW0nO1xyXG4gICAgICAgICAgICAgICAgb3V0bGluZVRpdGxlLmNyZWF0ZURpdihcInRyZWUtaXRlbS1pbm5lciBuYXYtZmlsZS10aXRsZS1jb250ZW50XCIpLnNldFRleHQoaW5mb1tpXS5mcm9udG1hdHRlckxpbmtzW2pdLmRpc3BsYXlUZXh0KTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvL1x1MzBBRlx1MzBFQVx1MzBDM1x1MzBBRlx1NjY0MlxyXG4gICAgICAgICAgICAgICAgb3V0bGluZVRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKGZpbGVzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vaG92ZXIgcHJldmlld1xyXG4gICAgICAgICAgICAgICAgb3V0bGluZVRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5rVGFyZ2V0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cdTMwRUFcdTMwRjNcdTMwQUZcdTYwQzVcdTU4MzFcdTMwNkJzdWJwYXRoXHVGRjA4XHU4OThCXHU1MUZBXHUzMDU3XHUzMDc4XHUzMDZFXHUzMEVBXHUzMEYzXHUzMEFGXHVGRjA5XHUzMDRDXHU1NDJCXHUzMDdFXHUzMDhDXHUzMDhCXHU1ODM0XHU1NDA4XHUzMDAxXHUzMDVEXHUzMDZFXHU0RjREXHU3RjZFXHUzMDkyXHU1M0Q2XHU1Rjk3XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwb3NJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxpbmtTdWJwYXRoKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1YnBhdGhQb3NpdGlvbiA9IGdldFN1YnBhdGhQb3NpdGlvbih0aGlzLmFwcCwgbGlua1RhcmdldCwgbGlua1N1YnBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnBhdGhQb3NpdGlvbj8uc3RhcnQ/LmxpbmUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc0luZm8gPSB7IHNjcm9sbDogc3VicGF0aFBvc2l0aW9uLnN0YXJ0LmxpbmV9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdob3Zlci1saW5rJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IERhaWx5Tm90ZU91dGxpbmVWaWV3VHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdmVyUGFyZW50OiByb290RWwsICAgLy8gcm9vdEVsXHUyMTkycGFyZW50RWxcdTMwNkJcdTMwNTdcdTMwNUZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEVsOiBvdXRsaW5lVGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rdGV4dDogbGlua1RhcmdldC5wYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHBvc0luZm9cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY29udGV4dG1lbnVcclxuICAgICAgICAgICAgICAgIG91dGxpbmVUaXRsZS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY29udGV4dG1lbnVcIixcclxuICAgICAgICAgICAgICAgICAgICAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVudSA9IG5ldyBNZW51KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1x1NjJCRFx1NTFGQSBmaWx0ZXJcdTk1QTJcdTkwMjNcdTMwQjNcdTMwRTFcdTMwRjNcdTMwQzhcdTMwQTJcdTMwQTZcdTMwQzhcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIkV4dHJhY3RcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcInNlYXJjaFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9FeHRyYWN0ID0gaW5mb1tpXS5mcm9udG1hdHRlckxpbmtzW2pdLmRpc3BsYXlUZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRyYWN0TW9kZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdFRhc2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCJPcGVuIGxpbmtlZCBmaWxlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJsaW5rcy1nb2luZy1vdXRcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYygpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUobGlua1RhcmdldCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlua1N1YnBhdGgpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VicGF0aFBvc2l0aW9uID0gZ2V0U3VicGF0aFBvc2l0aW9uKHRoaXMuYXBwLCBsaW5rVGFyZ2V0LCBsaW5rU3VicGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb0VsZW1lbnQoc3VicGF0aFBvc2l0aW9uLnN0YXJ0Py5saW5lLDAsdGhpcy5hcHApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXHUzMEVBXHUzMEYzXHUzMEFGXHU1MTQ4XHUzMDkyXHU2NUIwXHU4OThGXHUzMEJGXHUzMEQ2XHUzMDZCXHU5NThCXHUzMDRGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIk9wZW4gbGlua2VkIGZpbGUgaW4gbmV3IHRhYlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiZmlsZS1wbHVzXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3RhYicpLm9wZW5GaWxlKGxpbmtUYXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlua1N1YnBhdGgpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGlua1N1YnBhdGhcdTMwNENcdTMwNDJcdTMwOEJcdTMwNjhcdTMwNERcdTMwNkZcdTMwNURcdTMwNTNcdTMwN0VcdTMwNjdcdTMwQjlcdTMwQUZcdTMwRURcdTMwRkNcdTMwRUJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1YnBhdGhQb3NpdGlvbiA9IGdldFN1YnBhdGhQb3NpdGlvbih0aGlzLmFwcCwgbGlua1RhcmdldCwgbGlua1N1YnBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9FbGVtZW50KHN1YnBhdGhQb3NpdGlvbi5zdGFydD8ubGluZSwgMCwgdGhpcy5hcHApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cdTMwRUFcdTMwRjNcdTMwQUZcdTUxNDhcdTMwOTJcdTUzRjNcdTMwNkJcdTk1OEJcdTMwNEZcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKT0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiT3BlbiBsaW5rZWQgZmlsZSB0byB0aGUgcmlnaHRcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcInNlcGFyYXRvci12ZXJ0aWNhbFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jKCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCdzcGxpdCcpLm9wZW5GaWxlKGxpbmtUYXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlua1N1YnBhdGgpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VicGF0aFBvc2l0aW9uID0gZ2V0U3VicGF0aFBvc2l0aW9uKHRoaXMuYXBwLCBsaW5rVGFyZ2V0LCBsaW5rU3VicGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb0VsZW1lbnQoc3VicGF0aFBvc2l0aW9uLnN0YXJ0Py5saW5lLCAwLCB0aGlzLmFwcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1x1MzBFQVx1MzBGM1x1MzBBRlx1NTE0OFx1MzA5Mlx1NjVCMFx1ODk4Rlx1MzBBNlx1MzBBM1x1MzBGM1x1MzBDOVx1MzBBNlx1MzA2Qlx1OTU4Qlx1MzA0RlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCJPcGVuIGxpbmtlZCBmaWxlIGluIG5ldyB3aW5kb3dcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcInNjYW5cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYygpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZignd2luZG93Jykub3BlbkZpbGUobGlua1RhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuUG9wb3V0TGVhZih7c2l6ZTp7d2lkdGg6dGhpcy5zZXR0aW5ncy5wb3BvdXRTaXplLndpZHRoLGhlaWdodDp0aGlzLnNldHRpbmdzLnBvcG91dFNpemUuaGVpZ2h0fX0pLm9wZW5GaWxlKGxpbmtUYXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlua1N1YnBhdGgpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VicGF0aFBvc2l0aW9uID0gZ2V0U3VicGF0aFBvc2l0aW9uKHRoaXMuYXBwLCBsaW5rVGFyZ2V0LCBsaW5rU3VicGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb0VsZW1lbnQoc3VicGF0aFBvc2l0aW9uLnN0YXJ0Py5saW5lLCAwLCB0aGlzLmFwcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MucG9wb3V0QWx3YXlzT25Ub3Ape1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UG9wb3V0QWx3YXlzT25Ub3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1x1NjVCMFx1ODk4Rlx1MzBCRlx1MzBENlx1MzA2Qlx1OTU4Qlx1MzA0RlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCJPcGVuIGluIG5ldyB0YWJcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcImZpbGUtcGx1c1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jKCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd0YWInKS5vcGVuRmlsZShmaWxlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cdTUzRjNcdTMwNkJcdTk1OEJcdTMwNEZcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKT0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiT3BlbiB0byB0aGUgcmlnaHRcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcInNlcGFyYXRvci12ZXJ0aWNhbFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jKCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCdzcGxpdCcpLm9wZW5GaWxlKGZpbGVzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1x1NjVCMFx1ODk4Rlx1MzBBNlx1MzBBM1x1MzBGM1x1MzBDOVx1MzBBNlx1MzA2Qlx1OTU4Qlx1MzA0RlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCJPcGVuIGluIG5ldyB3aW5kb3dcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcInNjYW5cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYygpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZignd2luZG93Jykub3BlbkZpbGUoZmlsZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8vXHUzMEEyXHUzMEE2XHUzMEM4XHUzMEU5XHUzMEE0XHUzMEYzXHU4OTgxXHU3RDIwXHUzMDZFXHU2M0NGXHU3NTNCXHUzMDAyZGF0YVtpXVx1MzA0Q1x1ODk4MVx1N0QyMDBcdTMwNkFcdTMwODlcdTMwQjlcdTMwQURcdTMwQzNcdTMwRDdcclxuICAgICAgICAvL1x1NEU4Q1x1OTFDRFx1MzBFQlx1MzBGQ1x1MzBEN1x1MzA0Qlx1MzA4OVx1NjI5Q1x1MzA1MVx1MzA4Qlx1MzA1Rlx1MzA4MVx1MzBFOVx1MzBEOVx1MzBFQmVsZW1lbnRsb29wXHUzMDkyXHUzMDY0XHUzMDUxXHUzMDVGXHJcbiAgICAgICAgaWYgKGRhdGFbaV0ubGVuZ3RoID4gMCl7XHJcblxyXG4gICAgICAgICAgICBlbGVtZW50bG9vcDogZm9yIChsZXQgaj0wOyBqPGRhdGFbaV0ubGVuZ3RoOyBqKyspe1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1NzNGRVx1MzBBMlx1MzBBNlx1MzBDOFx1MzBFOVx1MzBBNFx1MzBGM1x1ODk4MVx1N0QyMFx1MzA2RVx1N0EyRVx1NTIyNVx1MzA5Mlx1NTNENlx1NUY5N1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRhdGFbaV1bal0udHlwZU9mRWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtUYXJnZXQgPSAoZWxlbWVudCAhPT0gJ2xpbmsnKT8gbnVsbCA6IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QocGFyc2VMaW5rdGV4dChkYXRhW2ldW2pdPy5saW5rKS5wYXRoLCBmaWxlc1tpXS5wYXRoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtTdWJwYXRoID0gKCFsaW5rVGFyZ2V0KT8gdW5kZWZpbmVkIDogcGFyc2VMaW5rdGV4dChkYXRhW2ldW2pdPy5saW5rKS5zdWJwYXRoO1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vLy8gaW5jbHVkZSBtb2RlXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5jbHVkZU1vZGUgJiYgdGhpcy5zZXR0aW5ncy5pbmNsdWRlT25seSA9PSBlbGVtZW50KXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNJbmNsdWRlZCA9PSB0cnVlICYmIGVsZW1lbnQgPT0gJ2hlYWRpbmcnICYmIGRhdGFbaV1bal0ubGV2ZWwgPiBpbmNsdWRlTW9kZUhlYWRpbmdMZXZlbCAgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cdTRFMEJcdTRGNERcdTg5OEJcdTUxRkFcdTMwNTdcdTMwNkVcdTU4MzRcdTU0MDhcdTMwNkZcdTUxRTZcdTc0MDZcdTMwOTJcdTMwQjlcdTMwQURcdTMwQzNcdTMwRDdcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTdENDRcdTMwN0ZcdTUxNjVcdTMwOENcdTMwOEJcdTMwRUZcdTMwRkNcdTMwQzlcdTMwNkJcdTMwREVcdTMwQzNcdTMwQzFcdTMwNTlcdTMwOEJcdTMwNEJcdTUyMjRcdTVCOUFcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNJbmNsdWRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuc2V0dGluZ3Mud29yZHNUb0luY2x1ZGUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAodmFsdWUpICYmIGRhdGFbaV1bal0uZGlzcGxheVRleHQuaW5jbHVkZXModmFsdWUpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0luY2x1ZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCA9PSAnaGVhZGluZycpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlTW9kZUhlYWRpbmdMZXZlbCA9IGRhdGFbaV1bal0ubGV2ZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCFpc0luY2x1ZGVkKXtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8vLyBleGNsdWRlIG1vZGVcclxuICAgICAgICAgICAgICAgIGlmICghaXNFeGNsdWRlZCB8fCAoaXNFeGNsdWRlZCAmJiAoZXhjbHVkZVR5cGUgPT0gZWxlbWVudCB8fCBwcmltZVR5cGUgPT0gZWxlbWVudCkpKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCA9PSAnaGVhZGluZycgJiYgZGF0YVtpXVtqXS5sZXZlbCA+IGV4Y2x1ZGVNb2RlSGVhZGluZ0xldmVsKXtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTRFMEJcdTRGNERcdTg5OEJcdTUxRkFcdTMwNTdcdTMwNkVcdTU4MzRcdTU0MDhcdTMwNkZcdTUxRTZcdTc0MDZcdTMwOTJcdTMwQjlcdTMwQURcdTMwQzNcdTMwRDdcdFxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRXhjbHVkZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLnNldHRpbmdzLndvcmRzVG9FeGNsdWRlW2VsZW1lbnRdKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggKHZhbHVlKSAmJiBkYXRhW2ldW2pdLmRpc3BsYXlUZXh0LmluY2x1ZGVzKHZhbHVlKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNFeGNsdWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjbHVkZVR5cGUgPSBlbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ID09ICdoZWFkaW5nJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2x1ZGVNb2RlSGVhZGluZ0xldmVsID0gZGF0YVtpXVtqXS5sZXZlbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSAgXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNFeGNsdWRlZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy9cdTg5ODFcdTdEMjBcdTMwNTRcdTMwNjhcdTMwNkVcdTk3NUVcdTg4NjhcdTc5M0FcdTUyMjRcdTVCOUEgIFx1OEEyRFx1NUI5QVx1MzA2N1x1OTc1RVx1ODg2OFx1NzkzQVx1MzA2Qlx1MzA2QVx1MzA2M1x1MzA2Nlx1MzA0NFx1MzA4Q1x1MzA3MFx1MzBCOVx1MzBBRFx1MzBDM1x1MzBEN1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5zaG93RWxlbWVudHNbZWxlbWVudF0gPT0gZmFsc2Upe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIHNpbXBsZSBmaWx0ZXIgXHU5NjY0XHU1OTE2XHUzMEVGXHUzMEZDXHUzMEM5XHUzMDZCXHUzMERFXHUzMEMzXHUzMEMxXHUzMDU5XHUzMDhDXHUzMDcwXHUzMEI5XHUzMEFEXHUzMEMzXHUzMEQ3XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLnNldHRpbmdzLndvcmRzVG9JZ25vcmVbZWxlbWVudF0pe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCAodmFsdWUpICYmIGRhdGFbaV1bal0uZGlzcGxheVRleHQuaW5jbHVkZXModmFsdWUpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUgZWxlbWVudGxvb3A7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vLy8gXHU2MkJEXHU1MUZBIGV4dHJhY3RcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5leHRyYWN0TW9kZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZXh0cmFjdFRhc2sgPT0gZmFsc2UgJiYgIWRhdGFbaV1bal0uZGlzcGxheVRleHQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0aGlzLnNldHRpbmdzLndvcmRzVG9FeHRyYWN0LnRvTG93ZXJDYXNlKCkpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmV4dHJhY3RUYXNrID09IHRydWUgJiYgZGF0YVtpXVtqXS50YXNrID09PSB2b2lkIDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0V4dHJhY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vLy8gXHU4OTgxXHU3RDIwXHU3QTJFXHU1MjI1XHUzMDU0XHUzMDY4XHUzMDZFXHU1MUU2XHU3NDA2XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIGhlYWRpbmdzXHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCA9PSAnaGVhZGluZycpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjcwMFx1NjVCMFx1MzA2RVx1ODk4Qlx1NTFGQVx1MzA1N1x1MzBFQ1x1MzBEOVx1MzBFQlx1MzA5Mlx1NTNENlx1NUY5N1xyXG4gICAgICAgICAgICAgICAgICAgIGxhdGVzdEhlYWRpbmdMZXZlbCA9IGRhdGFbaV1bal0ubGV2ZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU3Mjc5XHU1QjlBXHUzMDZFXHU4OThCXHU1MUZBXHUzMDU3XHUzMEVDXHUzMEQ5XHUzMEVCXHUzMDRDXHU5NzVFXHU4ODY4XHU3OTNBXHUzMDZFXHU1ODM0XHU1NDA4XHUzMDAxXHU4QTcyXHU1RjUzXHUzMDU5XHUzMDhDXHUzMDcwXHUzMEI5XHUzMEFEXHUzMEMzXHUzMEQ3XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhdGhpcy5zZXR0aW5ncy5oZWFkaW5nTGV2ZWxbZGF0YVtpXVtqXS5sZXZlbCAtIDFdKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGxpbmtzXHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCA9PSAnbGluaycpe1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIHRhZ3NcclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ID09ICd0YWcnKXtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gbGlzdEl0ZW1zXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT0gJ2xpc3RJdGVtcycpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NUI4Q1x1NEU4Nlx1MzBCRlx1MzBCOVx1MzBBRlx1OTc1RVx1ODg2OFx1NzkzQVx1OEEyRFx1NUI5QVx1MzA2N1x1MzA0Mlx1MzA4Q1x1MzA3MFx1NUI4Q1x1NEU4Nlx1MzBCRlx1MzBCOVx1MzBBRlx1MzA2Rlx1MzBCOVx1MzBBRFx1MzBDM1x1MzBEN1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmhpZGVDb21wbGV0ZWRUYXNrcyA9PSB0cnVlICYmIGRhdGFbaV1bal0udGFzayA9PSd4Jyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1OTc1RVx1MzBCRlx1MzBCOVx1MzBBRlx1OTc1RVx1ODg2OFx1NzkzQVx1OEEyRFx1NUI5QVx1MzA2N1x1MzA0Mlx1MzA4Q1x1MzA3MFx1OTc1RVx1MzBCRlx1MzBCOVx1MzBBRlx1MzA2Rlx1MzBCOVx1MzBBRFx1MzBDM1x1MzBEN1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZXR0aW5ncy50YXNrT25seSA9PSB0cnVlICYmIGRhdGFbaV1bal0udGFzayA9PT0gdm9pZCAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU5NzVFXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDZFXHU5MDFBXHU1RTM4XHUzMEVBXHUzMEI5XHUzMEM4XHUzMEEyXHUzMEE0XHUzMEM2XHUzMEUwXHUzMDAxXHUzMDdFXHUzMDVGXHUzMDZGIFx1MzBCRlx1MzBCOVx1MzBBRlx1MzA2Rlx1NTE2OFx1ODg2OFx1NzkzQVx1MzA2RVx1OEEyRFx1NUI5QVx1MzA2N1x1NzEyMVx1MzA1MVx1MzA4Q1x1MzA3MFx1MzBFQ1x1MzBEOVx1MzBFQlx1MzA2Qlx1NUZEQ1x1MzA1OFx1MzA2Nlx1MzBCOVx1MzBBRFx1MzBDM1x1MzBEN1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZXR0aW5ncy5hbGxUYXNrcyA9PSBmYWxzZSB8fCBkYXRhW2ldW2pdLnRhc2sgPT09IHZvaWQgMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggKGRhdGFbaV1bal0ubGV2ZWwgPT0gMikgfHwgKGRhdGFbaV1bal0ubGV2ZWwgPT0xICYmIHRoaXMuc2V0dGluZ3MuYWxsUm9vdEl0ZW1zID09IGZhbHNlKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL1x1MzBBMlx1MzBBNlx1MzBDOFx1MzBFOVx1MzBBNFx1MzBGM1x1ODk4MVx1N0QyMFx1OTBFOFx1NTIwNlx1NEY1Q1x1NjIxMFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0bGluZUVsOiBIVE1MRWxlbWVudCA9IGRhaWx5Tm90ZUNoaWxkcmVuRWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNyZWF0ZURpdihcInRyZWUtaXRlbSBuYXYtZmlsZVwiKTtcclxuICAgICAgICAgICAgICAgIC8vXHU0RTJEXHU4RUFCXHUzMDkyXHU4QTJEXHU1QjlBXHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRsaW5lVGl0bGU6IEhUTUxFbGVtZW50ID0gb3V0bGluZUVsLmNyZWF0ZURpdihcInRyZWUtaXRlbS1zZWxmIGlzLWNsaWNrYWJsZSBuYXYtZmlsZS10aXRsZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL1x1MzBBMlx1MzBBNFx1MzBCM1x1MzBGMyBpY29uXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2godGhpcy5zZXR0aW5ncy5pY29uW2VsZW1lbnRdKXtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdub25lJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaGVhZGluZ3dpdGhudW1iZXInOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRJY29uKG91dGxpbmVUaXRsZSwgYGhlYWRpbmctJHtkYXRhW2ldW2pdLmxldmVsfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdjdXN0b20nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRJY29uKG91dGxpbmVUaXRsZSwgdGhpcy5zZXR0aW5ncy5jdXN0b21JY29uW2VsZW1lbnRdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0SWNvbihvdXRsaW5lVGl0bGUsIHRoaXMuc2V0dGluZ3MuaWNvbltlbGVtZW50XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDYwXHUzMDYzXHUzMDVGXHU1ODM0XHU1NDA4XHUzMEEyXHUzMEE0XHUzMEIzXHUzMEYzXHU0RTBBXHU2NkY4XHUzMDREXHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCA9PSdsaXN0SXRlbXMnICYmIGRhdGFbaV1bal0udGFzayAhPT0gdm9pZCAwKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVtpXVtqXS50YXNrID09ICd4Jyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEljb24ob3V0bGluZVRpdGxlLCB0aGlzLnNldHRpbmdzLmljb24udGFza0RvbmUgPT0gJ2N1c3RvbScgPyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuY3VzdG9tSWNvbi50YXNrRG9uZSA6IHRoaXMuc2V0dGluZ3MuaWNvbi50YXNrRG9uZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0SWNvbihvdXRsaW5lVGl0bGUsIHRoaXMuc2V0dGluZ3MuaWNvbi50YXNrID09J2N1c3RvbScgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5jdXN0b21JY29uLnRhc2sgOiB0aGlzLnNldHRpbmdzLmljb24udGFzayk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1c3RvbVN0YXR1cyA9IE9iamVjdC5rZXlzKHRoaXMuc2V0dGluZ3MudGFza0ljb24pLmZpbmQoKGN1c3RvbVN0YXR1cyk9PiB0aGlzLnNldHRpbmdzLnRhc2tJY29uW2N1c3RvbVN0YXR1c10uc3ltYm9sID09PSBkYXRhW2ldW2pdLnRhc2spO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXN0b21TdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0SWNvbihvdXRsaW5lVGl0bGUsIHRoaXMuc2V0dGluZ3MudGFza0ljb25bY3VzdG9tU3RhdHVzXS5pY29uKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0SWNvbihvdXRsaW5lVGl0bGUsIHRoaXMuc2V0dGluZ3MudGFza0ljb25bT2JqZWN0LmtleXModGhpcy5zZXR0aW5ncy50YXNrSWNvbikuZmluZCgoaWNvbk5hbWUpPT4gdGhpcy5zZXR0aW5ncy50YXNrSWNvbltpY29uTmFtZV0gPT09IGRhdGFbaV1bal0udGFzayldKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vcHJlZml4XHUzMDAxXHUzMEE0XHUzMEYzXHUzMEM3XHUzMEYzXHUzMEM4XHJcbiAgICAgICAgICAgICAgICBsZXQgcHJlZml4ID0gdGhpcy5zZXR0aW5ncy5wcmVmaXhbZWxlbWVudF07XHJcbiAgICAgICAgICAgICAgICBpZiAoIGVsZW1lbnQgPT0gJ2hlYWRpbmcnKXtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMuc2V0dGluZ3MucmVwZWF0SGVhZGluZ1ByZWZpeCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xldmVsJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpeCA9IHByZWZpeC5yZXBlYXQoZGF0YVtpXVtqXS5sZXZlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGV2ZWxtaW51czEnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZml4ID0gcHJlZml4LnJlcGVhdChkYXRhW2ldW2pdLmxldmVsIC0gMSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCBpbmRlbnQ6IG51bWJlciA9IDAuNTtcclxuICAgICAgICAgICAgICAgIC8vIFx1ODk4Qlx1NTFGQVx1MzA1N1x1MzA2RVx1MzBBNFx1MzBGM1x1MzBDN1x1MzBGM1x1MzBDOFxyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT0naGVhZGluZycgJiYgdGhpcy5zZXR0aW5ncy5pbmRlbnQuaGVhZGluZyA9PSB0cnVlKXtcclxuICAgICAgICAgICAgICAgICAgICBpbmRlbnQgPSBpbmRlbnQgKyAoZGF0YVtpXVtqXS5sZXZlbCAtIChtYXhMZXZlbCArIDEpKSoxLjU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBcdTg5OEJcdTUxRkFcdTMwNTdcdTRFRTVcdTU5MTZcdTMwNkVcdTMwQTRcdTMwRjNcdTMwQzdcdTMwRjNcdTMwQzhcclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ICE9J2hlYWRpbmcnICYmIHRoaXMuc2V0dGluZ3MuaW5kZW50Rm9sbG93SGVhZGluZyl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkaXRpb25hbEluZGVudCA9IChsYXRlc3RIZWFkaW5nTGV2ZWwgLSAobWF4TGV2ZWwgKyAxKSArICh0aGlzLnNldHRpbmdzLmluZGVudEZvbGxvd0hlYWRpbmcgPT0gMiA/IDE6IDApKSoxLjU7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZW50ID0gaW5kZW50ICsgKGFkZGl0aW9uYWxJbmRlbnQgPiAwID8gYWRkaXRpb25hbEluZGVudCA6IDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gXHUzMEVBXHUzMEYzXHUzMEFGXHUzMDRDXHU1MjREXHUzMDZFXHUzMEE4XHUzMEVDXHUzMEUxXHUzMEYzXHUzMEM4XHUzMDY4XHU1NDBDXHUzMDU4XHU4ODRDXHUzMDYwXHUzMDYzXHUzMDVGXHU1ODM0XHU1NDA4XHUzMEE0XHUzMEYzXHUzMEM3XHUzMEYzXHUzMEM4XHU0RUQ4XHU1MkEwXHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCA9PSdsaW5rJyAmJiBkYXRhW2ldW2pdLnBvc2l0aW9uLnN0YXJ0LmxpbmUgPT0gZGF0YVtpXVtqLTFdPy5wb3NpdGlvbi5zdGFydC5saW5lKXtcclxuICAgICAgICAgICAgICAgICAgICBpbmRlbnQgPSBpbmRlbnQgKyAxLjU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgb3V0bGluZVRpdGxlLnN0eWxlLnBhZGRpbmdMZWZ0ID0gYCR7aW5kZW50fWVtYDtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT0nbGlzdEl0ZW1zJyAmJiBkYXRhW2ldW2pdLnRhc2sgIT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmaXggPSBkYXRhW2ldW2pdLnRhc2sgPT0gJ3gnID8gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnByZWZpeC50YXNrRG9uZSA6IHRoaXMuc2V0dGluZ3MucHJlZml4LnRhc2s7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmFkZENoZWNrYm94VGV4dCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmaXggPSBwcmVmaXggKyAnWycrZGF0YVtpXVtqXS50YXNrKyddICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBkaXNwVGV4dCA9IHRoaXMuc3RyaXBNYXJrZG93blN5bWJvbChkYXRhW2ldW2pdLmRpc3BsYXlUZXh0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lVGl0bGUuY3JlYXRlRGl2KFwidHJlZS1pdGVtLWlubmVyIG5hdi1maWxlLXRpdGxlLWNvbnRlbnRcIikuc2V0VGV4dChwcmVmaXggKyBkaXNwVGV4dCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gXHUzMEE0XHUzMEYzXHUzMEU5XHUzMEE0XHUzMEYzXHUzMEQ3XHUzMEVDXHUzMEQzXHUzMEU1XHUzMEZDXHJcbiAgICAgICAgICAgICAgICAvLyBcdTMwRUFcdTMwRjNcdTMwQUZcdTMwNjhcdTMwQkZcdTMwQjBcdTMwNkZcdTMwMDFcdTMwQTJcdTMwQTZcdTMwQzhcdTMwRTlcdTMwQTRcdTMwRjNcdTg5ODFcdTdEMjBcdTMwNkVcdTMwNDJcdTMwNjhcdTMwNkJcdTY1ODdcdTVCNTdcdTUyMTdcdTMwNENcdTdEOUFcdTMwNEZcdTU4MzRcdTU0MDhcdTMwNURcdTMwNkVcdTg4NENcdTMwOTJcdTMwRDdcdTMwRUNcdTMwRDNcdTMwRTVcdTMwRkNcdTMwMDFcdTMwNURcdTMwNDZcdTMwNjdcdTMwNkFcdTMwNTFcdTMwOENcdTMwNzBcdTZCMjFcdTMwNkVcdTg4NENcdTMwOTJcdTMwRDdcdTMwRUNcdTMwRDNcdTMwRTVcdTMwRkNcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmlubGluZVByZXZpZXcpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJldmlld1RleHQ6IHN0cmluZyA9Jyc7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChlbGVtZW50ID09ICdsaW5rJyB8fCBlbGVtZW50ID09ICd0YWcnKSAmJiBkYXRhW2ldW2pdLnBvc2l0aW9uLmVuZC5jb2wgPCBpbmZvW2ldLmxpbmVzWyBkYXRhW2ldW2pdLnBvc2l0aW9uLnN0YXJ0LmxpbmUgXS5sZW5ndGgpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3VGV4dCA9IGluZm9baV0ubGluZXNbIGRhdGFbaV1bal0ucG9zaXRpb24uc3RhcnQubGluZSBdLnNsaWNlKGRhdGFbaV1bal0ucG9zaXRpb24uZW5kLmNvbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld1RleHQgPSAoIGRhdGFbaV1bal0ucG9zaXRpb24uc3RhcnQubGluZSA8IGluZm9baV0ubnVtT2ZMaW5lcyAtMSApP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mb1tpXS5saW5lc1sgZGF0YVtpXVtqXS5wb3NpdGlvbi5zdGFydC5saW5lICsgMV0gOiBcIlwiOyBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0bGluZVRpdGxlLmNyZWF0ZURpdihcIm5hdi1maWxlLXRpdGxlLXByZXZpZXdcIikuc2V0VGV4dChwcmV2aWV3VGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBcdTMwQzRcdTMwRkNcdTMwRUJcdTMwQzFcdTMwQzNcdTMwRDdcdTMwRDdcdTMwRUNcdTMwRDNcdTMwRTVcdTMwRkNcclxuICAgICAgICAgICAgICAgIC8vIFx1MzA1RFx1MzA2RVx1ODk4MVx1N0QyMFx1MzA2RVx1ODg0Q1x1MzA0Qlx1MzA4OVx1NkIyMVx1MzA2RVx1ODk4MVx1N0QyMFx1MzA2RVx1NTI0RFx1MzA3RVx1MzA2N1x1MzA5Mlx1MzBEN1x1MzBFQ1x1MzBEM1x1MzBFNVx1MzBGQ1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MudG9vbHRpcFByZXZpZXcpe1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwcmV2aWV3VGV4dDI6c3RyaW5nID0nJztcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTMwN0VcdTMwNUFcdTZCMjFcdTMwNkVcdTg4NjhcdTc5M0FcdTg5ODFcdTdEMjBcdTMwNkVcdTVGMTVcdTY1NzBcdTMwOTJcdTcyNzlcdTVCOUFcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZW5kTGluZTpudW1iZXIgPSBpbmZvW2ldLm51bU9mTGluZXMgLSAxOyAgLy9cdTUyMURcdTY3MUZcdTUwMjRcdTMwNkZcdTY1ODdcdTdBRTBcdTY3MkJcclxuICAgICAgICAgICAgICAgICAgICBsZXQgayA9IGogKzE7IC8vIFx1NzNGRVx1NTcyOFx1MzA2RVx1MzBBMlx1MzBBNlx1MzBDOFx1MzBFOVx1MzBBNFx1MzBGM1x1NUYxNVx1NjU3MCsxXHUzMDRCXHUzMDg5XHUzMEVCXHUzMEZDXHUzMEQ3XHU5NThCXHU1OUNCXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kcHJldmlld2xvb3A6IHdoaWxlIChrPCBkYXRhW2ldLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1x1ODg2OFx1NzkzQVx1MzA1OVx1MzA4Qlx1MzBBOFx1MzBFQ1x1MzBFMVx1MzBGM1x1MzBDOFx1MzBCRlx1MzBBNFx1MzBEN1x1MzA2N1x1MzA0Mlx1MzA4Q1x1MzA3MFx1ODg0Q1x1MzA5Mlx1NTNENlx1NUY5N1x1MzA1N1x1MzA2Nlx1MzBFQlx1MzBGQ1x1MzBEN1x1MzA5Mlx1NjI1M1x1MzA2MVx1NTIwN1x1MzA4QlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5zaG93RWxlbWVudHNbZGF0YVtpXVtrXS50eXBlT2ZFbGVtZW50XSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1x1MzA1Rlx1MzA2MFx1MzA1N1x1NTQwNFx1N0EyRVx1MzA2RVx1NUI5Rlx1OTY5Qlx1MzA2Qlx1MzA2Rlx1OTc1RVx1ODg2OFx1NzkzQVx1MzA2OFx1MzA2QVx1MzA4Qlx1Njc2MVx1NEVGNlx1MzA5Mlx1NkU4MFx1MzA1Rlx1MzA1N1x1MzA2Nlx1MzA0NFx1MzA1Rlx1MzA4OVx1NjI1M1x1MzA2MVx1NTIwN1x1MzA4OVx1MzA2QVx1MzA0NFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHUzMEVBXHUzMEI5XHUzMEM4XHUzMDZFXHU4QTJEXHU1QjlBXHUzMDZCXHUzMDg4XHUzMDhCXHU5NzVFXHU4ODY4XHU3OTNBXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVtpXVtrXS50eXBlT2ZFbGVtZW50ID09ICdsaXN0SXRlbXMnICYmIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIGRhdGFbaV1ba10ubGV2ZWwgPj0yIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgodGhpcy5zZXR0aW5ncy5hbGxSb290SXRlbXMgPT0gZmFsc2UgJiYgZGF0YVtpXVtrXS5sZXZlbCA9PSAxKSAmJiAodGhpcy5zZXR0aW5ncy5hbGxUYXNrcyA9PSBmYWxzZSB8fCBkYXRhW2ldW2tdLnRhc2sgPT09IHZvaWQgMCkpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnNldHRpbmdzLnRhc2tPbmx5ICYmIGRhdGFbaV1ba10udGFzayA9PT0gdm9pZCAwKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5zZXR0aW5ncy5oaWRlQ29tcGxldGVkVGFza3MgJiYgZGF0YVtpXVtrXS50YXNrID09ICd4JykpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTg5OEJcdTUxRkFcdTMwNTdcdTMwNkVcdTMwRUNcdTMwRDlcdTMwRUJcdTMwNkJcdTMwODhcdTMwOEJcdTk3NUVcdTg4NjhcdTc5M0FcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YVtpXVtrXS50eXBlT2ZFbGVtZW50ID09ICdoZWFkaW5nJyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuaGVhZGluZ0xldmVsW2RhdGFbaV1ba10ubGV2ZWwgLSAxXSA9PSBmYWxzZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2ltcGxlIGZpbHRlclx1MzA2Qlx1MzA4OFx1MzA4Qlx1OTc1RVx1ODg2OFx1NzkzQVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuc2V0dGluZ3Mud29yZHNUb0lnbm9yZVtkYXRhW2ldW2tdLnR5cGVPZkVsZW1lbnRdKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoICh2YWx1ZSkgJiYgZGF0YVtpXVtrXS5kaXNwbGF5VGV4dC5pbmNsdWRlcyh2YWx1ZSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUgZW5kcHJldmlld2xvb3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSBkYXRhW2ldW2tdLnBvc2l0aW9uLnN0YXJ0LmxpbmUgLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaysrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBsID0gZGF0YVtpXVtqXS5wb3NpdGlvbi5zdGFydC5saW5lOyBsIDw9IGVuZExpbmU7IGwrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpZXdUZXh0MiA9IHByZXZpZXdUZXh0MiArIGluZm9baV0ubGluZXNbbF0gKydcXG4nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTdBN0FcdTg4NENcdTMwOTJcdTk2NjRcdTUzQkJcclxuICAgICAgICAgICAgICAgICAgICBwcmV2aWV3VGV4dDIgPSBwcmV2aWV3VGV4dDIucmVwbGFjZSgvXFxuJHxcXG4oPz1cXG4pL2csJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRvb2x0aXAob3V0bGluZVRpdGxlLCBwcmV2aWV3VGV4dDIsIHtjbGFzc2VzOlsnRE5PLXByZXZpZXcnXX0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBvdXRsaW5lVGl0bGUuZGF0YXNldC50b29sdGlwUG9zaXRpb24gPSB0aGlzLnNldHRpbmdzLnRvb2x0aXBQcmV2aWV3RGlyZWN0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dGxpbmVUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdG9vbHRpcC1kZWxheScsJzEwJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgb3V0bGluZVRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUoZmlsZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb0VsZW1lbnQoZGF0YVtpXVtqXS5wb3NpdGlvbi5zdGFydC5saW5lLGRhdGFbaV1bal0ucG9zaXRpb24uc3RhcnQuY29sLCB0aGlzLmFwcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL2hvdmVyIHByZXZpZXcgXHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lVGl0bGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoJ2hvdmVyLWxpbmsnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IERhaWx5Tm90ZU91dGxpbmVWaWV3VHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG92ZXJQYXJlbnQ6IHJvb3RFbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RWw6IG91dGxpbmVUaXRsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGlua3RleHQ6IGZpbGVzW2ldLnBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOntzY3JvbGw6IGRhdGFbaV1bal0ucG9zaXRpb24uc3RhcnQubGluZX1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGNvbnRleHRtZW51XHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lVGl0bGUuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgICAgICAgICBcImNvbnRleHRtZW51XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1x1NjJCRFx1NTFGQVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiRXh0cmFjdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwic2VhcmNoXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mud29yZHNUb0V4dHJhY3QgPSBkYXRhW2ldW2pdLmRpc3BsYXlUZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRyYWN0TW9kZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdFRhc2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSxmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gKFx1MzBFQVx1MzBGM1x1MzBBRlx1MzA2RVx1MzA3Rlx1RkYwOVx1MzBFQVx1MzBGM1x1MzBBRlx1NTE0OFx1MzA5Mlx1NzZGNFx1NjNBNVx1OTU4Qlx1MzA0RlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCA9PSdsaW5rJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIk9wZW4gbGlua2VkIGZpbGVcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJsaW5rcy1nb2luZy1vdXRcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoKS5vcGVuRmlsZShsaW5rVGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5rU3VicGF0aCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VicGF0aFBvc2l0aW9uID0gZ2V0U3VicGF0aFBvc2l0aW9uKHRoaXMuYXBwLCBsaW5rVGFyZ2V0LCBsaW5rU3VicGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9FbGVtZW50KHN1YnBhdGhQb3NpdGlvbi5zdGFydD8ubGluZSwwLHRoaXMuYXBwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cdTMwRUFcdTMwRjNcdTMwQUZcdTUxNDhcdTMwOTJcdTY1QjBcdTg5OEZcdTMwQkZcdTMwRDZcdTMwNkJcdTk1OEJcdTMwNEZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiT3BlbiBsaW5rZWQgZmlsZSBpbiBuZXcgdGFiXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiZmlsZS1wbHVzXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jKCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigndGFiJykub3BlbkZpbGUobGlua1RhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlua1N1YnBhdGgpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1YnBhdGhQb3NpdGlvbiA9IGdldFN1YnBhdGhQb3NpdGlvbih0aGlzLmFwcCwgbGlua1RhcmdldCwgbGlua1N1YnBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvRWxlbWVudChzdWJwYXRoUG9zaXRpb24uc3RhcnQ/LmxpbmUsIDAsIHRoaXMuYXBwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuXHRcdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRcdC8vXHUzMEVBXHUzMEYzXHUzMEFGXHU1MTQ4XHUzMDkyXHU1M0YzXHUzMDZCXHU5NThCXHUzMDRGXHJcblx0XHRcdFx0XHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKT0+XHJcblx0XHRcdFx0XHRcdFx0XHRpdGVtXHJcblx0XHRcdFx0XHRcdFx0XHRcdC5zZXRUaXRsZShcIk9wZW4gbGlua2VkIGZpbGUgdG8gdGhlIHJpZ2h0XCIpXHJcblx0XHRcdFx0XHRcdFx0XHRcdC5zZXRJY29uKFwic2VwYXJhdG9yLXZlcnRpY2FsXCIpXHJcblx0XHRcdFx0XHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jKCk9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGxpbmtUYXJnZXQgIT0gdGhpcy5hY3RpdmVGaWxlKXtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuaG9sZFVwZGF0ZU9uY2UgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZignc3BsaXQnKS5vcGVuRmlsZShsaW5rVGFyZ2V0KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAobGlua1N1YnBhdGgpe1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc3VicGF0aFBvc2l0aW9uID0gZ2V0U3VicGF0aFBvc2l0aW9uKHRoaXMuYXBwLCBsaW5rVGFyZ2V0LCBsaW5rU3VicGF0aCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxUb0VsZW1lbnQoc3VicGF0aFBvc2l0aW9uLnN0YXJ0Py5saW5lLCAwLCB0aGlzLmFwcCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHRcdFx0Ly9cdTMwRUFcdTMwRjNcdTMwQUZcdTUxNDhcdTMwOTJcdTY1QjBcdTg5OEZcdTMwQTZcdTMwQTNcdTMwRjNcdTMwQzlcdTMwQTZcdTMwNkJcdTk1OEJcdTMwNEZcclxuXHRcdFx0XHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuXHRcdFx0XHRcdFx0XHRcdGl0ZW1cclxuXHRcdFx0XHRcdFx0XHRcdFx0LnNldFRpdGxlKFwiT3BlbiBsaW5rZWQgZmlsZSBpbiBuZXcgd2luZG93XCIpXHJcblx0XHRcdFx0XHRcdFx0XHRcdC5zZXRJY29uKFwic2NhblwiKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHQub25DbGljayhhc3luYygpPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChsaW5rVGFyZ2V0ICE9IHRoaXMuYWN0aXZlRmlsZSl7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmhvbGRVcGRhdGVPbmNlID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3dpbmRvdycpLm9wZW5GaWxlKGxpbmtUYXJnZXQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuUG9wb3V0TGVhZih7c2l6ZTp7d2lkdGg6dGhpcy5zZXR0aW5ncy5wb3BvdXRTaXplLndpZHRoLGhlaWdodDp0aGlzLnNldHRpbmdzLnBvcG91dFNpemUuaGVpZ2h0fX0pLm9wZW5GaWxlKGxpbmtUYXJnZXQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChsaW5rU3VicGF0aCl7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBzdWJwYXRoUG9zaXRpb24gPSBnZXRTdWJwYXRoUG9zaXRpb24odGhpcy5hcHAsIGxpbmtUYXJnZXQsIGxpbmtTdWJwYXRoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbFRvRWxlbWVudChzdWJwYXRoUG9zaXRpb24uc3RhcnQ/LmxpbmUsIDAsIHRoaXMuYXBwKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MucG9wb3V0QWx3YXlzT25Ub3Ape1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0UG9wb3V0QWx3YXlzT25Ub3AoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0XHRtZW51LmFkZFNlcGFyYXRvcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXHU2NUIwXHU4OThGXHUzMEJGXHUzMEQ2XHUzMDZCXHU5NThCXHUzMDRGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIk9wZW4gaW4gbmV3IHRhYlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiZmlsZS1wbHVzXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3RhYicpLm9wZW5GaWxlKGZpbGVzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUb0VsZW1lbnQoZGF0YVtpXVtqXS5wb3NpdGlvbi5zdGFydC5saW5lLCBkYXRhW2ldW2pdLnBvc2l0aW9uLnN0YXJ0LmNvbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXHU1M0YzXHUzMDZCXHU5NThCXHUzMDRGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIk9wZW4gdG8gdGhlIHJpZ2h0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJzZXBhcmF0b3ItdmVydGljYWxcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYygpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZignc3BsaXQnKS5vcGVuRmlsZShmaWxlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9FbGVtZW50KGRhdGFbaV1bal0ucG9zaXRpb24uc3RhcnQubGluZSwgZGF0YVtpXVtqXS5wb3NpdGlvbi5zdGFydC5jb2wpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXHU2NUIwXHU4OThGXHUzMEE2XHUzMEEzXHUzMEYzXHUzMEM5XHUzMEE2XHUzMDZCXHU5NThCXHUzMDRGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIk9wZW4gaW4gbmV3IHdpbmRvd1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwic2NhblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jKCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd3aW5kb3cnKS5vcGVuRmlsZShmaWxlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9FbGVtZW50KGRhdGFbaV1bal0ucG9zaXRpb24uc3RhcnQubGluZSwgZGF0YVtpXVtqXS5wb3NpdGlvbi5zdGFydC5jb2wpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy9cdTg5ODFcdTdEMjAwXHUzMDYwXHUzMDYzXHUzMDVGXHUzMDY4XHUzMDREXHUzMDZFXHU1MUU2XHU3NDA2XHJcbiAgICAgICAgICAgIC8vXHU1NDA0XHU4ODRDXHUzMDkyXHUzMEMxXHUzMEE3XHUzMEMzXHUzMEFGXHUzMDU3XHUzMDAxXHU3QTdBXHU4ODRDXHUzMDY3XHUzMDZBXHUzMDQ0XHU1MjFEXHUzMDgxXHUzMDZFXHU4ODRDXHUzMDkyXHU4ODY4XHU3OTNBXHUzMDU5XHUzMDhCKFx1NjJCRFx1NTFGQVx1MzBFMlx1MzBGQ1x1MzBDOVx1MzA2N1x1MzA2Rlx1ODg0Q1x1MzA4Rlx1MzA2QVx1MzA0NClcclxuICAgICAgICAgICAgaWYgKHRoaXMuZXh0cmFjdE1vZGUgPT0gZmFsc2Upe1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpbmZvW2ldLmxpbmVzLmxlbmd0aDsgaisrKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZm9baV0ubGluZXNbal0gPT0gXCJcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dGxpbmVFbDogSFRNTEVsZW1lbnQgPSBkYWlseU5vdGVDaGlsZHJlbkVsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNyZWF0ZURpdihcInRyZWUtaXRlbSBuYXYtZmlsZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0bGluZVRpdGxlOiBIVE1MRWxlbWVudCA9IG91dGxpbmVFbC5jcmVhdGVEaXYoXCJ0cmVlLWl0ZW0tc2VsZiBpcy1jbGlja2FibGUgbmF2LWZpbGUtdGl0bGVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dGxpbmVUaXRsZS5jcmVhdGVEaXYoXCJ0cmVlLWl0ZW0taW5uZXIgbmF2LWZpbGUtdGl0bGUtY29udGVudFwiKS5zZXRUZXh0KGluZm9baV0ubGluZXNbal0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRsaW5lVGl0bGUuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzeW5jKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKGZpbGVzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vYmFja2xpbmsgZmlsZXNcdTMwNkVcdTUxRTZcdTc0MDZcclxuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZ2V0QmFja2xpbmtzIHx8ICF0aGlzLnNldHRpbmdzLnNob3dCYWNrbGlua3Mpe1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpbmZvW2ldLmJhY2tsaW5rcz8ubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2MkJEXHU1MUZBIGV4dHJhY3RcclxuICAgICAgICAgICAgaWYgKHRoaXMuZXh0cmFjdE1vZGUgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZXh0cmFjdFRhc2sgPT0gdHJ1ZSB8fCAhaW5mb1tpXS5iYWNrbGlua3Nbal0uYmFzZW5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0aGlzLnNldHRpbmdzLndvcmRzVG9FeHRyYWN0LnRvTG93ZXJDYXNlKCkpKXtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNFeHRyYWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgY29uc3Qgb3V0bGluZUVsOiBIVE1MRWxlbWVudCA9IGRhaWx5Tm90ZUNoaWxkcmVuRWwuY3JlYXRlRGl2KFwidHJlZS1pdGVtIG5hdi1maWxlXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRsaW5lVGl0bGU6IEhUTUxFbGVtZW50ID0gb3V0bGluZUVsLmNyZWF0ZURpdihcInRyZWUtaXRlbS1zZWxmIGlzLWNsaWNrYWJsZSBuYXYtZmlsZS10aXRsZVwiKTtcclxuICAgICAgICAgICAgc2V0SWNvbihvdXRsaW5lVGl0bGUsJ2xpbmtzLWNvbWluZy1pbicpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIG91dGxpbmVUaXRsZS5zdHlsZS5wYWRkaW5nTGVmdCA9JzAuNWVtJztcclxuICAgICAgICAgICAgb3V0bGluZVRpdGxlLmNyZWF0ZURpdihcInRyZWUtaXRlbS1pbm5lciBuYXYtZmlsZS10aXRsZS1jb250ZW50XCIpLnNldFRleHQoaW5mb1tpXS5iYWNrbGlua3Nbal0uYmFzZW5hbWUpO1xyXG4gICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIC8vXHUzMEFGXHUzMEVBXHUzMEMzXHUzMEFGXHU2NjQyXHJcbiAgICAgICAgICAgIG91dGxpbmVUaXRsZS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICAgICAgYXN5bmMoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKGluZm9baV0uYmFja2xpbmtzW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vaG92ZXIgcHJldmlldyBcclxuICAgICAgICAgICAgb3V0bGluZVRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoJ2hvdmVyLWxpbmsnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBEYWlseU5vdGVPdXRsaW5lVmlld1R5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgaG92ZXJQYXJlbnQ6IHJvb3RFbCwgICAvLyByb290RWxcdTIxOTJwYXJlbnRFbFx1MzA2Qlx1MzA1N1x1MzA1RlxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEVsOiBvdXRsaW5lVGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbGlua3RleHQ6IGluZm9baV0uYmFja2xpbmtzW2pdLnBhdGgsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cdFx0XHQvLyBjb250ZXh0bWVudVxyXG5cdFx0XHRvdXRsaW5lVGl0bGUuYWRkRXZlbnRMaXN0ZW5lcihcclxuXHRcdFx0XHRcImNvbnRleHRtZW51XCIsXHJcblx0XHRcdFx0KGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuXHRcdFx0XHRcdC8vXHUzMEVBXHUzMEYzXHUzMEFGXHU1MTQzXHUzMDkyXHU2NUIwXHU4OThGXHUzMEJGXHUzMEQ2XHUzMDZCXHU5NThCXHUzMDRGXHJcblx0XHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuXHRcdFx0XHRcdFx0aXRlbVxyXG5cdFx0XHRcdFx0XHRcdC5zZXRUaXRsZShcIk9wZW4gYmFja2xpbmsgZmlsZSBpbiBuZXcgdGFiXCIpXHJcblx0XHRcdFx0XHRcdFx0LnNldEljb24oXCJmaWxlLXBsdXNcIilcclxuXHRcdFx0XHRcdFx0XHQub25DbGljayhhc3luYygpPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3RhYicpLm9wZW5GaWxlKGluZm9baV0uYmFja2xpbmtzW2pdKTtcclxuXHRcdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdC8vXHUzMEVBXHUzMEYzXHUzMEFGXHU1MTQ4XHUzMDkyXHU1M0YzXHUzMDZCXHU5NThCXHUzMDRGXHJcblx0XHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuXHRcdFx0XHRcdFx0aXRlbVxyXG5cdFx0XHRcdFx0XHRcdC5zZXRUaXRsZShcIk9wZW4gbGlua2VkIGZpbGUgdG8gdGhlIHJpZ2h0XCIpXHJcblx0XHRcdFx0XHRcdFx0LnNldEljb24oXCJzZXBhcmF0b3ItdmVydGljYWxcIilcclxuXHRcdFx0XHRcdFx0XHQub25DbGljayhhc3luYygpPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3NwbGl0Jykub3BlbkZpbGUoaW5mb1tpXS5iYWNrbGlua3Nbal0pO1xyXG5cdFx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0Ly9cdTMwRUFcdTMwRjNcdTMwQUZcdTUxNDhcdTMwOTJcdTY1QjBcdTg5OEZcdTMwQTZcdTMwQTNcdTMwRjNcdTMwQzlcdTMwQTZcdTMwNkJcdTk1OEJcdTMwNEZcclxuXHRcdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG5cdFx0XHRcdFx0XHRpdGVtXHJcblx0XHRcdFx0XHRcdFx0LnNldFRpdGxlKFwiT3BlbiBsaW5rZWQgZmlsZSBpbiBuZXcgd2luZG93XCIpXHJcblx0XHRcdFx0XHRcdFx0LnNldEljb24oXCJzY2FuXCIpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMoKT0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd3aW5kb3cnKS5vcGVuRmlsZShpbmZvLmJhY2tsaW5rc1tpXSk7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlblBvcG91dExlYWYoe3NpemU6e3dpZHRoOnRoaXMuc2V0dGluZ3MucG9wb3V0U2l6ZS53aWR0aCxoZWlnaHQ6dGhpcy5zZXR0aW5ncy5wb3BvdXRTaXplLmhlaWdodH19KS5vcGVuRmlsZShpbmZvW2ldLmJhY2tsaW5rc1tqXSk7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5wb3BvdXRBbHdheXNPblRvcCl7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNldFBvcG91dEFsd2F5c09uVG9wKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHRtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xyXG5cdFx0XHRcdH0pO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8vIG5vdGVET01cdTMwNkVcdTVGOENcdTUxRTZcdTc0MDZcclxuXHJcbiAgICAgICAgLy8gXHU2Mjk4XHUzMDhBXHUzMDVGXHUzMDVGXHUzMDdFXHUzMDhDXHUzMDY2XHUzMDQ0XHUzMDhDXHUzMDcwXHU1QjUwXHU4OTgxXHU3RDIwXHUzMDkyXHU5NzVFXHU4ODY4XHU3OTNBXHUzMDZCXHUzMDU5XHUzMDhCXHJcbiAgICAgICAgaWYgKHRoaXMuY29sbGFwc2VBbGx8fCB0aGlzLnNldHRpbmdzLmZpbGVGbGFnPy5bZmlsZXNbaV0ucGF0aF0/LmZvbGQpe1xyXG4gICAgICAgICAgICBkYWlseU5vdGVFbC5jbGFzc0xpc3QuYWRkKCdpcy1jb2xscGFzZWQnKTtcclxuICAgICAgICAgICAgbm90ZUNvbGxhcHNlSWNvbi5jbGFzc0xpc3QuYWRkKCdpcy1jb2xsYXBzZWQnKTtcclxuICAgICAgICAgICAgaW5mb1tpXS5pc0ZvbGRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGRhaWx5Tm90ZUNoaWxkcmVuRWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbmZvW2ldLmlzRm9sZGVkID1mYWxzZTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAvLyBcdTYyQkRcdTUxRkFcdTMwRTJcdTMwRkNcdTMwQzlcdTMwNjdcdTYyQkRcdTUxRkFcdTMwNTdcdTMwNUZcdTg5ODFcdTdEMjBcdTMwNENcdTMwNkFcdTMwNDRcdTU4MzRcdTU0MDhcdTMwMDFcdTMwQ0VcdTMwRkNcdTMwQzhcdTgxRUFcdTRGNTNcdTMwOTJcdTk3NUVcdTg4NjhcdTc5M0FcdTMwNkJcdTMwMDJcclxuICAgICAgICBpZiAodGhpcy5leHRyYWN0TW9kZSA9PSB0cnVlICYmIGlzRXh0cmFjdGVkID09IGZhbHNlKXtcclxuICAgICAgICAgICAgZGFpbHlOb3RlRWwucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gXHUzMEEyXHUzMEE2XHUzMEM4XHUzMEU5XHUzMEE0XHUzMEYzXHU5MEU4XHU1MjA2XHUzMDZFXHU2M0NGXHU3NTNCXHU1QjlGXHU4ODRDXHJcbiAgICB0aGlzLmNvbnRlbnRFbC5hcHBlbmRDaGlsZChjb250YWluZXJFbCk7XHJcbn1cclxuXHJcblxyXG4vLyBcdTMwQjlcdTMwQUZcdTMwRURcdTMwRkNcdTMwRUJcclxuZXhwb3J0IGZ1bmN0aW9uIHNjcm9sbFRvRWxlbWVudChsaW5lOiBudW1iZXIsIGNvbDogbnVtYmVyLCBhcHA6IEFwcCk6IHZvaWQge1xyXG4gICAgY29uc3QgdmlldyA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG4gICAgaWYgKHZpZXcpIHtcclxuICAgICAgICB2aWV3LmVkaXRvci5mb2N1cygpO1xyXG4gICAgICAgIHZpZXcuZWRpdG9yLnNldEN1cnNvciAobGluZSwgY29sKTtcclxuICAgICAgICB2aWV3LmVkaXRvci5zY3JvbGxJbnRvVmlldygge1xyXG4gICAgICAgICAgICBmcm9tOiB7XHJcbiAgICAgICAgICAgICAgICBsaW5lOiBsaW5lLFxyXG4gICAgICAgICAgICAgICAgY2g6MFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0bzoge1xyXG4gICAgICAgICAgICAgICAgbGluZTogbGluZSxcclxuICAgICAgICAgICAgICAgIGNoOjBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRydWUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRQb3BvdXRBbHdheXNPblRvcCgpe1xyXG4gICAgY29uc3QgeyByZW1vdGUgfSA9IHJlcXVpcmUoJ2VsZWN0cm9uJyk7XHJcbiAgICBjb25zdCBhY3RpdmVXaW5kb3cgPSByZW1vdGUuQnJvd3NlcldpbmRvdy5nZXRGb2N1c2VkV2luZG93KCk7XHJcbiAgICBhY3RpdmVXaW5kb3cuc2V0QWx3YXlzT25Ub3AodHJ1ZSk7XHJcbn0iLCAiaW1wb3J0IHsgQXBwLCBQb3MsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IERhaWx5Tm90ZU91dGxpbmVTZXR0aW5ncyB9IGZyb20gXCIuL21haW5cIjtcclxuXHJcbi8vIGRhdGEuanNvblx1MzA2RWZpbGVGbGFnXHUzMDkyXHU2MzgzXHU5NjY0XHVGRjFBXHU1MDI0XHUzMDRDXHU3QTdBXHU5MTREXHU1MjE3XHUzMDZFXHUzMEQ3XHUzMEVEXHUzMEQxXHUzMEM2XHUzMEEzXHUzMDkyXHU1MjRBXHU5NjY0XHJcbmV4cG9ydCBmdW5jdGlvbiBjbGVhbkZpbGVGbGFnKGZpbGU6VEZpbGUsIHNldHRpbmdzOkRhaWx5Tm90ZU91dGxpbmVTZXR0aW5ncyk6IHZvaWQge1xyXG4gICAgaWYgKE9iamVjdC5rZXlzKHNldHRpbmdzLmZpbGVGbGFnW2ZpbGUucGF0aF0pLmxlbmd0aCA9PSAwKXtcclxuICAgICAgICBkZWxldGUgc2V0dGluZ3MuZmlsZUZsYWdbZmlsZS5wYXRoXTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gZGF0YS5qc29uXHUzMDZFZmlsZUZsYWdcdTMwNkJcdTMwNjRcdTMwNDRcdTMwNjZcdTMwMDFmaWxlLnBhdGhcdTMwNkVcdTMwRDdcdTMwRURcdTMwRDFcdTMwQzZcdTMwQTNcdTMwNkJmbGFnXHUzMDY3XHU2MzA3XHU1QjlBXHUzMDU3XHUzMDVGXHUzMEQ1XHUzMEU5XHUzMEIwXHUzMDRDXHU1QjU4XHU1NzI4XHUzMDU5XHUzMDhCXHUzMDRCXHUzMEMxXHUzMEE3XHUzMEMzXHUzMEFGXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja0ZsYWcoZmlsZTpURmlsZSwgZmxhZzogJ2ZvbGQnLCBzZXR0aW5nczogRGFpbHlOb3RlT3V0bGluZVNldHRpbmdzKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gc2V0dGluZ3MuZmlsZUZsYWdbZmlsZS5wYXRoXT8uW2ZsYWddO1xyXG59XHJcblxyXG4vLyBmaWxlRmxhZ1x1MzA2Qlx1NjMwN1x1NUI5QVx1MzA1N1x1MzA1Rlx1MzBENVx1MzBFOVx1MzBCMFx1MzA5Mlx1OEZGRFx1NTJBMFxyXG5leHBvcnQgZnVuY3Rpb24gYWRkRmxhZyhmaWxlOlRGaWxlLCBmbGFnOiAnZm9sZCcsIHNldHRpbmdzOiBEYWlseU5vdGVPdXRsaW5lU2V0dGluZ3MpOiB2b2lkIHtcclxuICAgIGlmKCFzZXR0aW5ncy5maWxlRmxhZy5oYXNPd25Qcm9wZXJ0eShmaWxlLnBhdGgpKXtcclxuICAgICAgICBzZXR0aW5ncy5maWxlRmxhZ1tmaWxlLnBhdGhdID0ge307XHJcbiAgICB9XHJcbiAgICBzZXR0aW5ncy5maWxlRmxhZ1tmaWxlLnBhdGhdW2ZsYWddID0gdHJ1ZTtcclxufVxyXG5cclxuLy9maWxlRmxhZ1x1MzA0Qlx1MzA4OVx1NjMwN1x1NUI5QVx1MzA1N1x1MzA1Rlx1MzBENVx1MzBFOVx1MzBCMFx1MzA5Mlx1OTY2NFx1NTNCQlxyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRmxhZyhmaWxlOlRGaWxlLCBmbGFnOiAnZm9sZCcsIHNldHRpbmdzOiBEYWlseU5vdGVPdXRsaW5lU2V0dGluZ3MpOiB2b2lkIHtcclxuICAgIGRlbGV0ZSBzZXR0aW5ncy5maWxlRmxhZ1tmaWxlLnBhdGhdW2ZsYWddO1xyXG4gICAgY2xlYW5GaWxlRmxhZyhmaWxlLCBzZXR0aW5ncyk7XHJcbn1cclxuXHJcbi8vZmlsZUZsYWdcdTMwNkVcdTYzMDdcdTVCOUFcdTMwNTdcdTMwNUZcdTMwRDVcdTMwRTlcdTMwQjBcdTMwOTJcdTMwQzhcdTMwQjBcdTMwRUJcclxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUZsYWcoZmlsZTpURmlsZSwgZmxhZzogJ2ZvbGQnLCBzZXR0aW5nczogRGFpbHlOb3RlT3V0bGluZVNldHRpbmdzKTogdm9pZCB7XHJcbiAgICBpZiAoY2hlY2tGbGFnKGZpbGUsIGZsYWcsIHNldHRpbmdzKSA9PSB0cnVlKXtcclxuICAgICAgICByZW1vdmVGbGFnKGZpbGUsIGZsYWcsIHNldHRpbmdzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYWRkRmxhZyhmaWxlLCBmbGFnLCBzZXR0aW5ncyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIHN1YnBhdGhcdTMwOTJcdTU0MkJcdTMwODBcdTMwRUFcdTMwRjNcdTMwQUZcdTMwNkVcdTMwRUFcdTMwRjNcdTMwQUZcdTUxNDhcdTMwNkVwb3NpdGlvblx1MzA5Mlx1NTNENlx1NUY5N1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3VicGF0aFBvc2l0aW9uIChhcHA6QXBwLCBmaWxlOlRGaWxlLCBzdWJwYXRoOnN0cmluZyk6UG9zfG51bGx7XHJcbiAgICBjb25zdCBjYWNoZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcclxuICAgIGlmICghY2FjaGUpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IGNoZWNrcGF0aCA9IHN1YnBhdGgucmVwbGFjZSgvWyNeXS9nLCcnKTtcclxuICAgIGlmIChjYWNoZS5oZWFkaW5ncz8ubGVuZ3RoKXtcclxuICAgICAgICBjb25zdCBpbmRleCA9IGNhY2hlLmhlYWRpbmdzLmZpbmRJbmRleCgoZWxlbWVudCkgPT4gZWxlbWVudC5oZWFkaW5nLnJlcGxhY2UoL1sjXl0vZywnJykgPT0gY2hlY2twYXRoKTtcclxuICAgICAgICBpZiAoaW5kZXggPj0gMCl7XHJcbiAgICAgICAgICAgIHJldHVybiBjYWNoZS5oZWFkaW5nc1tpbmRleF0ucG9zaXRpb247XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGNhY2hlLnNlY3Rpb25zPy5sZW5ndGgpe1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gY2FjaGUuc2VjdGlvbnMuZmluZEluZGV4KChlbGVtZW50KSA9PiBlbGVtZW50LmlkPy5yZXBsYWNlKC9bI15dL2csJycpID09IGNoZWNrcGF0aCk7XHJcbiAgICAgICAgaWYgKGluZGV4ID49IDApe1xyXG4gICAgICAgICAgICByZXR1cm4gY2FjaGUuc2VjdGlvbnNbaW5kZXhdLnBvc2l0aW9uO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59IiwgImltcG9ydCBEYWlseU5vdGVPdXRsaW5lUGx1Z2luLCB7IERFRkFVTFRfU0VUVElOR1MgfSBmcm9tIFwic3JjL21haW5cIjtcclxuaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IGFwcEhhc0RhaWx5Tm90ZXNQbHVnaW5Mb2FkZWQgfSBmcm9tIFwib2JzaWRpYW4tZGFpbHktbm90ZXMtaW50ZXJmYWNlXCI7XHJcblxyXG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgRGFpbHlOb3RlT3V0bGluZVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuICAgIHBsdWdpbjogRGFpbHlOb3RlT3V0bGluZVBsdWdpbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBEYWlseU5vdGVPdXRsaW5lUGx1Z2luKSB7XHJcbiAgICAgICAgc3VwZXIgKGFwcCwgcGx1Z2luKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgIH1cclxuXHJcbiAgICBkaXNwbGF5KCk6IHZvaWQge1xyXG4gICAgICAgIGxldCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG5cclxuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuICAgICAgICAvLyBcdTMwQzdcdTMwQTRcdTMwRUFcdTMwRkNcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwNkVcdTMwQzFcdTMwQTdcdTMwQzNcdTMwQUYocGVyaW9kaWMgbm90ZXMgXHUzMDYwXHUzMDUxXHUzMDY3XHUzMDgyb25cdTMwNkJcdTMwNkFcdTMwNjNcdTMwNjZcdTMwNDRcdTMwOENcdTMwNzBcdTU2REVcdTkwN0YpXHJcbiAgICAgICAgaWYgKCFhcHAuaW50ZXJuYWxQbHVnaW5zLnBsdWdpbnNbJ2RhaWx5LW5vdGVzJ10/LmVuYWJsZWQgJiYgIWFwcC5wbHVnaW5zLnBsdWdpbnNbJ3BlcmlvZGljLW5vdGVzJ10pIHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoXCJzZXR0aW5ncy1iYW5uZXJcIiwgKGJhbm5lcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgYmFubmVyLmNyZWF0ZUVsKFwiaDNcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IFwiTmVpdGhlciBEYWlseSBOb3RlIHBsdWdpbiBub3IgUGVyaW9kaWMgTm90ZXMgY29tbXVuaXR5IHBsdWdpbiBpcyBlbmFibGVkXCIsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDRcIiwge1xyXG4gICAgICAgICAgICB0ZXh0OiBcIkJhc2ljc1wiLFxyXG4gICAgICAgICAgICBjbHM6ICdzZXR0aW5nLWNhdGVnb3J5J1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJJbml0aWFsIHNlYXJjaCB0eXBlXCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwic2VhcmNoIGJhY2t3YXJkIGZyb20gdG9kYXkgLyBmb3J3YXJkIGZyb20gYSBzcGVjaWZpYyBkYXRlXCIpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImJhY2t3YXJkXCIsIFwiYmFja3dhcmRcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiZm9yd2FyZFwiLFwiZm9yd2FyZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbml0aWFsU2VhcmNoVHlwZSlcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluaXRpYWxTZWFyY2hUeXBlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZXNldFNlYXJjaFJhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsdHJ1ZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2VhcmNoIGR1cmF0aW9uXCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwibnVtYmVyIG9mIGRheXMgdG8gc2VhcmNoIHBlciBwYWdlIChkZWZhdWx0ID0gMjgpXCIpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ251bWJlcicpO1xyXG4gICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihTdHJpbmcoREVGQVVMVF9TRVRUSU5HUy5kdXJhdGlvbi5kYXkpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MuZHVyYXRpb24uZGF5KSlcclxuXHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcGFyc2VkID0gcGFyc2VJbnQoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlLDEwKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkIDw9IDAgfHwgcGFyc2VkID49MzY2KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkID0gREVGQVVMVF9TRVRUSU5HUy5kdXJhdGlvbi5kYXlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZHVyYXRpb24uZGF5ID0gcGFyc2VkO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVzZXRTZWFyY2hSYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsdHJ1ZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkluY2x1ZGUgZnV0dXJlIGRhaWx5IG5vdGVzXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygnc2V0dGluZy1pbmRlbnQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhcImluIGJhY2t3YXJkIHNlYXJjaCwgaW5jbHVkZSBuIGRheXMgb2YgZnV0dXJlIGRhaWx5IG5vdGVzIChkZWZhdWx0ID0gNSlcIilcclxuICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyKCd0eXBlJywnbnVtYmVyJyk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFN0cmluZyhERUZBVUxUX1NFVFRJTkdTLm9mZnNldCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vZmZzZXQpKVxyXG5cclxuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnB1dGVkVmFsdWUgPSBOdW1iZXIoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXRlZFZhbHVlIDwgMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0ZWRWYWx1ZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dGVkVmFsdWUgPj0zNjYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRlZFZhbHVlID0gMzY2XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9mZnNldCA9IGlucHV0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlc2V0U2VhcmNoUmFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLHRydWUsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJPbnNldCBkYXRlXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygnc2V0dGluZy1pbmRlbnQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhcIm9uc2V0IGRhdGUgaW4gZm9yd2FyZCBzZWFyY2ggKFlZWVktTU0tREQpXCIpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKERFRkFVTFRfU0VUVElOR1Mub25zZXQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9uc2V0KVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vbnNldCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZXNldFNlYXJjaFJhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsdHJ1ZSx0cnVlKTsgICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTE2NVx1NTI5Qlx1NTgzNFx1OTc2Mlx1MzA2N1x1MzA2RVx1MzBEMFx1MzBFQVx1MzBDN1x1MzBGQ1x1MzBCN1x1MzBFN1x1MzBGM1x1MzAwMVx1NjVBRFx1NUZGNVx1MjAyNlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9tZW50KHZhbHVlICwgXCJZWVlZLU1NLUREXCIpLmlzVmFsaWQoKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vbnNldCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDRcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFwiaW52YWxpZCBkYXRlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIlNob3cgaGVhZGluZ3NcIilcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLmhlYWRpbmcpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RWxlbWVudHMuaGVhZGluZyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJTaG93IGxpbmtzXCIpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy5saW5rKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLmxpbmsgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJTaG93IHRhZ3NcIilcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLnRhZylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy50YWcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2hvdyBsaXN0IGl0ZW1zICYgdGFza3NcIilcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLmxpc3RJdGVtcylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy5saXN0SXRlbXMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLmxpc3RJdGVtcyl7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJTaG93IGFsbCByb290IGxpc3QgaXRlbXNcIilcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiaWYgZGlzYWJsZWQsIG9ubHkgdG9wIGl0ZW0gb2YgdGhlIGxpc3QgaXMgZGlzcGxheWVkXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Q2xhc3MoJ3NldHRpbmctaW5kZW50JylcclxuICAgICAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYWxsUm9vdEl0ZW1zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbGxSb290SXRlbXMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJTaG93IGFsbCB0YXNrc1wiKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJzaG93IGFsbCB0YXNrIGl0ZW1zIHJlZ2FyZGxlc3Mgb2YgdGhlaXIgbGV2ZWxcIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcygnc2V0dGluZy1pbmRlbnQnKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbGxUYXNrcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYWxsVGFza3MgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIlRhc2sgb25seVwiKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJpZiBlbmFibGVkLCBub3JtYWwgbGlzdCBpdGVtcyBhcmUgaGlkZGVuXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Q2xhc3MoJ3NldHRpbmctaW5kZW50JylcclxuICAgICAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza09ubHkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tPbmx5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJIaWRlIGNvbXBsZXRlZCB0YXNrc1wiKVxyXG4gICAgICAgICAgICAgICAgLnNldENsYXNzKCdzZXR0aW5nLWluZGVudCcpXHJcbiAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVDb21wbGV0ZWRUYXNrcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUNvbXBsZXRlZFRhc2tzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0TmFtZShcIlNob3cgbGlua3MgaW4gcHJvcGVydGllc1wiKVxyXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93UHJvcGVydHlMaW5rcylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93UHJvcGVydHlMaW5rcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsdHJ1ZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoXCJTaG93IGJhY2tsaW5rIGZpbGVzXCIpXHJcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dCYWNrbGlua3MpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0JhY2tsaW5rcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsdHJ1ZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkNvbGxhcHNlIGFsbCBhdCBzdGFydHVwXCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwiZW5hYmxlIGNvbGxhcHNlIGFsbCBmdW5jdGlvbiBhdCBzdGFydHVwXCIpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbGxhcHNlQWxsQXRTdGFydHVwKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29sbGFwc2VBbGxBdFN0YXJ0dXAgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdTg4NjhcdTc5M0FcdTMwNTlcdTMwOEJcdTYwQzVcdTU4MzFcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0TmFtZShcIkRpc3BsYXkgZmlsZSBpbmZvcm1hdGlvbiBmb3IgZGFpbHkgbm90ZXNcIilcclxuICAgICAgICAuc2V0RGVzYyhcImNob29zZSB0eXBlIG9mIGZpbGUgaW5mb3JtYXRpb24gdG8gZGlzcGxheSB3aXRoIHRoZSBmaWxlIG5hbWUgZm9yIGRhaWx5IG5vdGVzXCIpXHJcbiAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIm5vbmVcIiwgXCJub25lXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibGluZXNcIixcImxpbmVzIG9mIHRoZSBub3RlXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiZGF5c1wiLFwiZGF5cyBmcm9tIGJhc2UgZGF0ZVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImRvd1wiLFwiZGF5IG9mIHRoZSB3ZWVrXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiZG93c2hvcnRcIiwgXCJkYXkgb2YgdGhlIHdlZWsoc2hvcnQpXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwid2Vla251bWJlclwiLCBcIndlZWsgbnVtYmVyXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwidGFnXCIsXCJmaXJzdCB0YWdcIikgIFxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRpc3BsYXlGaWxlSW5mb0RhaWx5KVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRpc3BsYXlGaWxlSW5mb0RhaWx5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wZXJpb2RpY05vdGVzRW5hYmxlZCl7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkRpc3BsYXkgZmlsZSBpbmZvcm1hdGlvbiBmb3IgcGVyaW9kaWMgbm90ZXNcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJjaG9vc2UgdHlwZSBvZiBmaWxlIGluZm9ybWF0aW9uIHRvIGRpc3BsYXkgZm9yIHBlcmlvZGljIG5vdGVzIG90aGVyIHRoYW4gZGFpbHkgbm90ZXNcIilcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibm9uZVwiLCBcIm5vbmVcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibGluZXNcIixcImxpbmVzIG9mIHRoZSBub3RlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImRheXNcIixcImRpc3RhbmNlIGZyb20gYmFzZSBkYXRlXCIpICAgLy8gcGVyaW9kaWMgbm90ZXMgXHUzMDZCXHU1QkZFXHU1RkRDXHUzMDU5XHUzMDhCXHUzMDZBXHUzMDg5ZGF5cyBcdTMwNkJcdTk2NTBcdTMwODlcdTMwNkFcdTMwNEZcdTMwNkFcdTMwOEJcdTMwNkVcdTMwNjdkaXN0YW5jZVx1MzA2OFx1MzA1N1x1MzA1RlxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJ0YWdcIixcImZpcnN0IHRhZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kaXNwbGF5RmlsZUluZm9QZXJpb2RpYylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRpc3BsYXlGaWxlSW5mb1BlcmlvZGljID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIC8vIHZpZXdcdTMwOTJcdTg4NjhcdTc5M0FcdTMwNTlcdTMwOEJcdTRGNERcdTdGNkUgXHVGRjA4XHU1M0YzXHUzMEI1XHUzMEE0XHUzMEM5XHUzMEQwXHUzMEZDXHUzMDAxXHU1REU2XHUzMEI1XHUzMEE0XHUzMEM5XHUzMEQwXHUzMEZDXHUzMDAxXHUzMEUxXHUzMEE0XHUzMEYzXHUzMERBXHUzMEE0XHUzMEYzXHVGRjA5XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoXCJQb3NpdGlvbiBvZiB0aGUgcGx1Z2luIHZpZXdcIilcclxuICAgICAgICAuc2V0RGVzYyhcIlNwZWNpZnkgZGVmYXVsdCBwb3NpdGlvbiB3aGVyZSB0aGlzIHBsdWdpbidzIHZpZXcgYXBwZWFyc1wiKVxyXG4gICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJyaWdodFwiLCBcInJpZ2h0IHNpZGUgcGFuZVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImxlZnRcIixcImxlZnQgc2lkZSBwYW5lXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwidGFiXCIsXCJuZXcgdGFiIGluIG1haW4gcGFuZVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcInNwbGl0XCIsXCJzcGxpdHRlZCBwYW5lXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwicG9wb3V0XCIsXCJwb3BvdXQgd2luZG93XCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mudmlld1Bvc2l0aW9uKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnZpZXdQb3NpdGlvbiA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgLy8gUGVyaW9kaWMgTm90ZXNcdTVCRkVcdTVGRENcdTMwNkVcdTMwQUFcdTMwRjNcdTMwQUFcdTMwRDVcclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDRcIiwge1xyXG4gICAgICAgICAgICB0ZXh0OiBcIlBlcmlvZGljIE5vdGVzXCIsXHJcbiAgICAgICAgICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICghYXBwLnBsdWdpbnMucGx1Z2luc1sncGVyaW9kaWMtbm90ZXMnXSl7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiUGVyaW9kaWMgTm90ZXMgY29tbXVuaXR5IHBsdWdpbiBpcyBub3QgZW5hYmxlZFwiLFxyXG4gICAgICAgICAgICAgICAgY2xzOlwic2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uXCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZlckNoZWNrID0gIE51bWJlcihhcHAucGx1Z2lucy5wbHVnaW5zWydwZXJpb2RpYy1ub3RlcyddPy5tYW5pZmVzdC52ZXJzaW9uLnNwbGl0KFwiLlwiKVswXSk7XHJcbiAgICAgICAgICAgIGlmICh2ZXJDaGVjayA+PSAxKSB7ICAgXHJcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZShcImNhbGVuZGFyIHNldHNcIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYyhcImVuYWJsZSBjYWxlbmRhciBzZXRzIGZlYXR1cmUuIFlvdSBoYXZlIHRvIGFjdGl2YXRlIGFuZCBjb25maWd1cmUgdGhlIGJldGEgdmVyc2lvbiBvZiB0aGUgUGVyaW9kaWMgTm90ZXMgUGx1Z2luIGZpcnN0LlwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhclNldHNFbmFibGVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNhbGVuZGFyU2V0c0VuYWJsZWQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlc2V0U2VhcmNoUmFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KHRydWUsdHJ1ZSx0cnVlKTsgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwicGVyaW9kaWMgbm90ZXNcIilcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiZW5hYmxlIHdlZWtseS9tb250aGx5L3F1YXJ0ZXJseS95ZWFybHkgbm90ZXMuIFlvdSBoYXZlIHRvIGFjdGl2YXRlIGFuZCBjb25maWd1cmUgdGhlIFBlcmlvZGljIE5vdGVzIFBsdWdpbiBmaXJzdC5cIilcclxuICAgICAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucGVyaW9kaWNOb3Rlc0VuYWJsZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnBlcmlvZGljTm90ZXNFbmFibGVkID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZXNldFNlYXJjaFJhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KHRydWUsdHJ1ZSx0cnVlKTsgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnBlcmlvZGljTm90ZXNFbmFibGVkKXtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogXCJTZWFyY2ggZHVyYXRpb24gZm9yIHBlcmlvZGljIG5vdGVzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAnc2V0dGluZy1jYXRlZ29yeSdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJ3ZWVrbHkgbm90ZXNcIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcygnc2V0dGluZy1pbmRlbnQnKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJudW1iZXIgb2Ygd2Vla3MgdG8gc2VhcmNoIHBlciBwYWdlIChkZWZhdWx0ID0gMTIpXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyKCd0eXBlJywnbnVtYmVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoU3RyaW5nKERFRkFVTFRfU0VUVElOR1MuZHVyYXRpb24ud2VlaykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MuZHVyYXRpb24ud2VlaykpXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJzZWQgPSBwYXJzZUludCgoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUsMTApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkIDw9IDAgfHwgcGFyc2VkID49MzY2KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZCA9IERFRkFVTFRfU0VUVElOR1MuZHVyYXRpb24ud2Vla1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmR1cmF0aW9uLndlZWsgPSBwYXJzZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlc2V0U2VhcmNoUmFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSx0cnVlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJtb250aGx5IG5vdGVzXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Q2xhc3MoJ3NldHRpbmctaW5kZW50JylcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwibnVtYmVyIG9mIG1vbnRocyB0byBzZWFyY2ggcGVyIHBhZ2UgKGRlZmF1bHQgPSAxMilcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdudW1iZXInKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihTdHJpbmcoREVGQVVMVF9TRVRUSU5HUy5kdXJhdGlvbi5tb250aCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MuZHVyYXRpb24ubW9udGgpKVxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFyc2VkID0gcGFyc2VJbnQoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlLDEwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZCA8PSAwIHx8IHBhcnNlZCA+PTM2Nil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWQgPSBERUZBVUxUX1NFVFRJTkdTLmR1cmF0aW9uLm1vbnRoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZHVyYXRpb24ubW9udGggPSBwYXJzZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlc2V0U2VhcmNoUmFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSx0cnVlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJxdWFydGVybHkgbm90ZXNcIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcygnc2V0dGluZy1pbmRlbnQnKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJudW1iZXIgb2YgcXVhcnRlcnMgdG8gc2VhcmNoIHBlciBwYWdlIChkZWZhdWx0ID0gOClcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdudW1iZXInKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihTdHJpbmcoREVGQVVMVF9TRVRUSU5HUy5kdXJhdGlvbi5xdWFydGVyKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXJhdGlvbi5xdWFydGVyKSlcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnNlZCA9IHBhcnNlSW50KChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSwxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWQgPD0gMCB8fCBwYXJzZWQgPj0zNjYpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkID0gREVGQVVMVF9TRVRUSU5HUy5kdXJhdGlvbi5xdWFydGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZHVyYXRpb24ucXVhcnRlciA9IHBhcnNlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVzZXRTZWFyY2hSYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLHRydWUsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcInllYXJseSBub3Rlc1wiKVxyXG4gICAgICAgICAgICAgICAgLnNldENsYXNzKCdzZXR0aW5nLWluZGVudCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcIm51bWJlciBvZiB5ZWFycyB0byBzZWFyY2ggcGVyIHBhZ2UgKGRlZmF1bHQgPSAxMilcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdudW1iZXInKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihTdHJpbmcoREVGQVVMVF9TRVRUSU5HUy5kdXJhdGlvbi55ZWFyKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXJhdGlvbi55ZWFyKSlcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnNlZCA9IHBhcnNlSW50KChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSwxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWQgPD0gMCB8fCBwYXJzZWQgPj0zNjYpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkID0gREVGQVVMVF9TRVRUSU5HUy5kdXJhdGlvbi55ZWFyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZHVyYXRpb24ueWVhciA9IHBhcnNlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVzZXRTZWFyY2hSYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLHRydWUsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJhdHRhY2ggZGF0ZSByYW5nZSB0byB3ZWVrbHkgbm90ZXNcIilcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiZGlzcGxheSBkYXRlIHJhbmdlIG5leHQgdG8gd2Vla2x5IG5vdGVzJyBuYW1lXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmF0dGFjaFdlZWtseU5vdGVzTmFtZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXR0YWNoV2Vla2x5Tm90ZXNOYW1lID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9cdTg4NjhcdTc5M0FcdTMwNTlcdTMwOEJcdTg5OEJcdTUxRkFcdTMwNTdcdTMwRUNcdTMwRDlcdTMwRUJcclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDRcIiwge1xyXG4gICAgICAgICAgICB0ZXh0OiBcIkhlYWRpbmdzXCIsXHJcbiAgICAgICAgICAgIGNsczpcInNldHRpbmctY2F0ZWdvcnlcIixcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLmhlYWRpbmcpe1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIkhlYWRpbmcgbGV2ZWwgdG8gZGlzcGxheVwiLFxyXG4gICAgICAgICAgICAgICAgY2xzOlwic2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uXCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oZWFkaW5nTGV2ZWwuZm9yRWFjaCggKHZhbHVlLCBpbmRleCwgYXJyeSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoYExldmVsJHsgaW5kZXggKyAxfWApXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldENsYXNzKCdzZXR0aW5nLWluZGVudCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGVhZGluZ0xldmVsW2luZGV4XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oZWFkaW5nTGV2ZWxbIGluZGV4IF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJUbyBkaXNwbGF5IHRoaXMgc2VjdGlvbiwgYWN0aXZhdGUgJ1Nob3cgaGVhZGluZ3MnIGluIEJhc2ljcyBzZWN0aW9uLlwiLFxyXG4gICAgICAgICAgICAgICAgY2xzOlwic2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uXCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHUzMEQ3XHUzMEVDXHUzMEQzXHUzMEU1XHUzMEZDXHJcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcImg0XCIsIHtcclxuICAgICAgICAgICAgdGV4dDogXCJQcmV2aWV3XCIsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKFwiSW5saW5lIHByZXZpZXdcIilcclxuICAgICAgICAuc2V0RGVzYyhcIlNob3cgYSBmZXcgc3Vic2VxdWVudCB3b3JkcyBuZXh0IHRvIHRoZSBvdXRsaW5lIGVsZW1lbnQgbmFtZVwiKVxyXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmxpbmVQcmV2aWV3KVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmlubGluZVByZXZpZXcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKFwiVG9vbHRpcCBwcmV2aWV3XCIpXHJcbiAgICAgICAgLnNldERlc2MoXCJTaG93IHN1YnNlcXVlbnQgc2VudGVuY2VzIGFzIGEgdG9vbHRpcCB3aGVuIGhvdmVyXCIpXHJcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRvb2x0aXBQcmV2aWV3KVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRvb2x0aXBQcmV2aWV3ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MudG9vbHRpcFByZXZpZXcpe1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJUb29sdGlwIHByZXZpZXcgZGlyZWN0aW9uXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygnc2V0dGluZy1pbmRlbnQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhcInNwZWNpZnkgdGhlIGRpcmVjdGlvbiB0byBkaXNwbGF5IHRvb2x0aXAgcHJldmlld1wiKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJsZWZ0XCIsIFwibGVmdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJyaWdodFwiLFwicmlnaHRcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiYm90dG9tXCIsXCJib3R0b21cIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwidG9wXCIsXCJ0b3BcIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudG9vbHRpcFByZXZpZXdEaXJlY3Rpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRvb2x0aXBQcmV2aWV3RGlyZWN0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFBvcG91dCBXaW5kb3dcclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDRcIiwge1xyXG4gICAgICAgICAgICB0ZXh0OiBcIlBvcG91dCB3aW5kb3dcIixcclxuICAgICAgICAgICAgY2xzOiAnc2V0dGluZy1jYXRlZ29yeSdcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IFwiUG9wb3V0IHdpbmRvdyBzaXplXCIsXHJcbiAgICAgICAgICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiV2lkdGhcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJkZWZhdWx0ICYgbWluID0gNjAwXCIpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ251bWJlcicpO1xyXG4gICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihTdHJpbmcoREVGQVVMVF9TRVRUSU5HUy5wb3BvdXRTaXplLndpZHRoKSlcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcG91dFNpemUud2lkdGgpKVxyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnNlZCA9IHBhcnNlSW50KChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSwxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZCA8PSA2MDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWQgPSBERUZBVUxUX1NFVFRJTkdTLnBvcG91dFNpemUud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcG91dFNpemUud2lkdGggPSBwYXJzZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJIZWlnaHRcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJkZWZhdWx0ID0gODAwIG1pbiA9IDYwMFwiKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdudW1iZXInKTtcclxuICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoU3RyaW5nKERFRkFVTFRfU0VUVElOR1MucG9wb3V0U2l6ZS5oZWlnaHQpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MucG9wb3V0U2l6ZS5oZWlnaHQpKVxyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnNlZCA9IHBhcnNlSW50KChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSwxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZCA8PSA2MDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZCA9IERFRkFVTFRfU0VUVElOR1MucG9wb3V0U2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcG91dFNpemUuaGVpZ2h0ID0gcGFyc2VkO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2V0IHBvcG91dCB3aW5kb3cgYWx3YXlzIG9uIHRvcFwiKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wb3BvdXRBbHdheXNPblRvcClcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcG91dEFsd2F5c09uVG9wID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIC8vIFx1MzBENVx1MzBBM1x1MzBFQlx1MzBCRlx1MzBGQ1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoNFwiLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IFwiU2ltcGxlIGZpbHRlclwiLFxyXG4gICAgICAgICAgICBjbHM6ICdzZXR0aW5nLWNhdGVnb3J5J1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RWxlbWVudHMuaGVhZGluZyl7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkhlYWRpbmdzIHRvIGlnbm9yZVwiKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkhlYWRpbmdzIHdoaWNoIGluY2x1ZGUgbGlzdGVkIHdvcmRzIHdpbGwgbm90IGJlIGRpc3BsYXllZC4gU2VwYXJhdGUgd2l0aCBhIG5ldyBsaW5lLlwiKVxyXG4gICAgICAgICAgICAuYWRkVGV4dEFyZWEoKHRleHRBcmVhKSA9PntcclxuICAgICAgICAgICAgICAgIHRleHRBcmVhLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9JZ25vcmUuaGVhZGluZy5qb2luKCdcXG4nKSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50ICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvSWdub3JlLmhlYWRpbmcgPSBpbnB1dGVkVmFsdWUuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy5saW5rKXtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiTGlua3MgdG8gaWdub3JlXCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwiTGlua3Mgd2hpY2ggaW5jbHVkZSBsaXN0ZWQgd29yZHMgd2lsbCBub3QgYmUgZGlzcGxheWVkLiBTZXBhcmF0ZSB3aXRoIGEgbmV3IGxpbmUuXCIpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0QXJlYSgodGV4dEFyZWEpID0+e1xyXG4gICAgICAgICAgICAgICAgdGV4dEFyZWEuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mud29yZHNUb0lnbm9yZS5saW5rLmpvaW4oJ1xcbicpKTtcclxuICAgICAgICAgICAgICAgIHRleHRBcmVhLmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9JZ25vcmUubGluayA9IGlucHV0ZWRWYWx1ZS5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLnRhZyl7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIlRhZ3MgdG8gaWdub3JlXCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwidGFncyB3aGljaCBpbmNsdWRlIGxpc3RlZCB3b3JkcyB3aWxsIG5vdCBiZSBkaXNwbGF5ZWQuIFNlcGFyYXRlIHdpdGggYSBuZXcgbGluZS5cIilcclxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKCh0ZXh0QXJlYSkgPT57XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvSWdub3JlLnRhZy5qb2luKCdcXG4nKSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50ICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvSWdub3JlLnRhZyA9IGlucHV0ZWRWYWx1ZS5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLmxpc3RJdGVtcyl7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkxpc3QgaXRlbXMgdG8gaWdub3JlXCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwiTGlzdCBpdGVtcyB3aGljaCBpbmNsdWRlIGxpc3RlZCB3b3JkcyB3aWxsIG5vdCBiZSBkaXNwbGF5ZWQuIFNlcGFyYXRlIHdpdGggYSBuZXcgbGluZS5cIilcclxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKCh0ZXh0QXJlYSkgPT57XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvSWdub3JlLmxpc3RJdGVtcy5qb2luKCdcXG4nKSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50ICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvSWdub3JlLmxpc3RJdGVtcyA9IGlucHV0ZWRWYWx1ZS5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJbmNsdWRlIC8gRXhjbHVkZVxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoNFwiLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IFwiSW5jbHVkZVwiLFxyXG4gICAgICAgICAgICBjbHM6ICdzZXR0aW5nLWNhdGVnb3J5J1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuICAgICAgICAgICAgdGV4dDogXCJJZiB5b3Ugc3BlY2lmeSBvbmUgb3V0bGluZSBlbGVtZW50IHR5cGUgYW5kIHdvcmRzIHRvIGluY2x1ZGUsIG9ubHkgZWxlbWVudHMgd2hpY2ggYmVsb25nIHRvIHRoZSBpbmNsdWRlZCBlbGVtZW50cyBhcmUgZGlzcGxheWVkLlwiLFxyXG4gICAgICAgICAgICBjbHM6XCJzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb25cIixcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IFwiKipOT1RFKio6IElmIEluY2x1ZGUgZmlsdGVyIGlzIHNldCBpbmNvcnJlY3RseSwgYSBudW1iZXIgb2Ygb3V0bGluZXMgbWF5IG5vdCBiZSBkaXNwbGF5ZWQuIEluIHN1Y2ggYSBjYXNlLCB0cnkgc2V0dGluZyAnRWxlbWVudCB0eXBlIGZvciBpbmNsdWRlJyB0byAnbm8gSW5jbHVkZSBmaWx0ZXInLlwiLFxyXG4gICAgICAgICAgICBjbHM6XCJzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb25cIixcclxuICAgICAgICB9KTtcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0TmFtZShcIkVsZW1lbnQgdHlwZSBmb3IgaW5jbHVkZVwiKVxyXG4gICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJub25lXCIsIFwibm8gSW5jbHVkZSBmaWx0ZXJcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJoZWFkaW5nXCIsXCJoZWFkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibGlua1wiLFwibGlua1wiKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcInRhZ1wiLFwidGFnXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibGlzdEl0ZW1zXCIsXCJsaXN0SXRlbXNcIilcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmNsdWRlT25seSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5jbHVkZU9ubHkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmluY2x1ZGVPbmx5ICE9ICdub25lJyl7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIldvcmRzIHRvIGluY2x1ZGVcIilcclxuICAgICAgICAgICAgLnNldENsYXNzKCdzZXR0aW5nLWluZGVudCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwiT25seSBlbGVtZW50cyBzcGVjaWZpZWQgaW4gJ0VsZW1lbnQgdHlwZSBmb3IgaW5jbHVkZScgd2hpY2ggaW5jbHVkZSBsaXN0ZWQgd29yZHMgd2lsbCBiZSBkaXNwbGF5ZWQuIFNlcGFyYXRlIHdpdGggYSBuZXcgbGluZS5cIilcclxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKCh0ZXh0QXJlYSkgPT57XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvSW5jbHVkZS5qb2luKCdcXG4nKSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50ICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvSW5jbHVkZSA9IGlucHV0ZWRWYWx1ZS5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJJbmNsdWRlIHRoZSBiZWdpbm5pbmcgcGFydFwiKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ3NldHRpbmctaW5kZW50JylcclxuICAgICAgICAgICAgLnNldERlc2MoXCJTcGVjaWZ5IHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUgYmVnaW5uaW5nIHBhcnRzIG9mIGVhY2ggZGFpbHkgbm90ZSB3aXRoIG5vIGVsZW1lbnQgdG8gaW5jbHVkZSBcIilcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5jbHVkZUJlZ2lubmluZylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluY2x1ZGVCZWdpbm5pbmcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoNFwiLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IFwiRXhjbHVkZVwiLFxyXG4gICAgICAgICAgICBjbHM6ICdzZXR0aW5nLWNhdGVnb3J5J1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuICAgICAgICAgICAgdGV4dDogXCJTcGVjaWZpZWQgb3V0bGluZSBlbGVtZW50cyBhbmQgZWxlbWVudHMgYmVsb25naW5nIHRvIHRoYXQgZWxlbWVudCB3aWxsIG5vdCBiZSBkaXNwbGF5ZWQuXCIsXHJcbiAgICAgICAgICAgIGNsczpcInNldHRpbmctaXRlbS1kZXNjcmlwdGlvblwiLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKFwiRXhjbHVzaW9uIGVuZHMgYXRcIilcclxuICAgICAgICAuc2V0RGVzYyhcIkV4Y2x1ZGluZyBlbGVtZW50cyBzcGVjaWZpZWQgYmVsb3cgZW5kcyBhdCB0aGUgc2VsZWN0ZWQgdHlwZSBvZiBlbGVtZW50cy4gSWYgeW91IHNwZWNpZmllZCAnRWxlbWVudCB0eXBlIGZvciBpbmNsdWRlJyBhYm92ZSwgdGhpcyB2YWx1ZSBpcyBpZ25vcmVkIGFuZCBleGNsdWRlaW5nIGVsZW1lbnRzIGVuZHMgYXQgdGhhdCB0eXBlIG9mIGVsZW1lbnRzLlwiKVxyXG4gICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJub25lXCIsIFwibm9uZVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImhlYWRpbmdcIixcImhlYWRpbmdcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJsaW5rXCIsXCJsaW5rXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwidGFnXCIsXCJ0YWdcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJsaXN0SXRlbXNcIixcImxpc3RJdGVtc1wiKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByaW1lRWxlbWVudClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJpbWVFbGVtZW50ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RWxlbWVudHMuaGVhZGluZyl7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkhlYWRpbmdzIHRvIGV4Y2x1ZGVcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJIZWFkaW5ncyB3aGljaCBpbmNsdWRlIGxpc3RlZCB3b3JkcyBhbmQgZWxlbWVudHMgd2hpY2ggYmVsb25nIHRvIHRoZW0gd2lsbCBub3QgYmUgZGlzcGxheWVkLiBTZXBhcmF0ZSB3aXRoIGEgbmV3IGxpbmUuXCIpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0QXJlYSgodGV4dEFyZWEpID0+e1xyXG4gICAgICAgICAgICAgICAgdGV4dEFyZWEuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mud29yZHNUb0V4Y2x1ZGUuaGVhZGluZy5qb2luKCdcXG4nKSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50ICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvRXhjbHVkZS5oZWFkaW5nID0gaW5wdXRlZFZhbHVlLnNwbGl0KCdcXG4nKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RWxlbWVudHMubGluayl7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkxpbmtzIHRvIGV4Y2x1ZGVcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJMaW5rcyB3aGljaCBpbmNsdWRlIGxpc3RlZCB3b3JkcyBhbmQgZWxlbWVudHMgd2hpY2ggYmVsb25nIHRvIHRoZW0gd2lsbCBub3QgYmUgZGlzcGxheWVkLiBTZXBhcmF0ZSB3aXRoIGEgbmV3IGxpbmUuXCIpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0QXJlYSgodGV4dEFyZWEpID0+e1xyXG4gICAgICAgICAgICAgICAgdGV4dEFyZWEuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mud29yZHNUb0V4Y2x1ZGUubGluay5qb2luKCdcXG4nKSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50ICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvRXhjbHVkZS5saW5rID0gaW5wdXRlZFZhbHVlLnNwbGl0KCdcXG4nKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLnRhZyl7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIlRhZ3MgdG8gZXhjbHVkZVwiKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhcInRhZ3Mgd2hpY2ggaW5jbHVkZSBsaXN0ZWQgd29yZHMgYW5kIGVsZW1lbnRzIHdoaWNoIGJlbG9uZyB0byB0aGVtIHdpbGwgbm90IGJlIGRpc3BsYXllZC4gU2VwYXJhdGUgd2l0aCBhIG5ldyBsaW5lLlwiKVxyXG4gICAgICAgICAgICAuYWRkVGV4dEFyZWEoKHRleHRBcmVhKSA9PntcclxuICAgICAgICAgICAgICAgIHRleHRBcmVhLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9FeGNsdWRlLnRhZy5qb2luKCdcXG4nKSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50ICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvRXhjbHVkZS50YWcgPSBpbnB1dGVkVmFsdWUuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy5saXN0SXRlbXMpe1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJMaXN0IGl0ZW1zIHRvIGV4Y2x1ZGVcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJMaXN0IGl0ZW1zIHdoaWNoIGluY2x1ZGUgbGlzdGVkIHdvcmRzIGFuZCBlbGVtZW50cyB3aGljaCBiZWxvbmcgdG8gdGhlbSB3aWxsIG5vdCBiZSBkaXNwbGF5ZWQuIFNlcGFyYXRlIHdpdGggYSBuZXcgbGluZS5cIilcclxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKCh0ZXh0QXJlYSkgPT57XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvRXhjbHVkZS5saXN0SXRlbXMuam9pbignXFxuJykpO1xyXG4gICAgICAgICAgICAgICAgdGV4dEFyZWEuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCApID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mud29yZHNUb0V4Y2x1ZGUubGlzdEl0ZW1zID0gaW5wdXRlZFZhbHVlLnNwbGl0KCdcXG4nKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1NTkxNlx1ODlCM1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoNFwiLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IFwiQXBwZWFyYW5jZVwiLFxyXG4gICAgICAgICAgICBjbHM6ICdzZXR0aW5nLWNhdGVnb3J5J1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBoZWFkaW5nXHUzMDZFXHUzMEE0XHUzMEYzXHUzMEM3XHUzMEYzXHUzMEM4XHUzMEVDXHUzMEQ5XHUzMEVCXHUzMDZCXHUzMDQyXHUzMDhGXHUzMDVCXHUzMDY2XHU0RUQ2XHUzMDZFXHU4OTgxXHU3RDIwXHUzMDkyXHUzMEE0XHUzMEYzXHUzMEM3XHUzMEYzXHUzMEM4XHUzMDU5XHUzMDhCXHUzMDRCXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoXCJJbmRlbnQgb3RoZXIgdGhhbiBoZWFkaW5nc1wiKVxyXG4gICAgICAgIC5zZXREZXNjKFwiV2hldGhlciBvdGhlciBlbGVtZW50cyBzaG91bGQgYmUgaW5kZW50ZWQgdG8gcHJlY2VkaW5nIGhlYWRpbmdzXCIpXHJcbiAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIjBcIixcIm5vbmVcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCIxXCIsXCJmb2xsb3cgcHJlY2VkaW5nIGhlYWRpbmdcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCIyXCIsXCJwcmVjZWRpbmcgaGVhZGluZyArIDFcIilcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kZW50Rm9sbG93SGVhZGluZykpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kZW50Rm9sbG93SGVhZGluZyA9IE51bWJlcih2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1MzBDRVx1MzBGQ1x1MzBDOFx1MzBCRlx1MzBBNFx1MzBDOFx1MzBFQlx1MzA2RVx1ODBDQ1x1NjY2Rlx1ODI3MlxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKFwiTm90ZSB0aXRsZSBiYWNrZ3JvdW5kIGNvbG9yXCIpXHJcbiAgICAgICAgLnNldERlc2MoXCJObyBjaGFuZ2U6IHVzZSB0aGUgY3VycmVudCBDU1MgdGhlbWUgc2V0dGluZyB2YWx1ZXMuIEFjY2VudDogaGlnaGxpZ2h0IGZpbGUgbmFtZXMuIEN1c3RvbTogU3BlY2lmeSBhbnkgY29sb3IgY29kZS4gUGxlYXNlIHVwZGF0ZSB0aGUgdmlldyB3aGVuIHlvdSB0b2dnbGVkIE9ic2lkaWFuJ3MgYmFzZSB0aGVtZShsaWdodC9kYXJrKS4gKGRlZmF1bHQgPSBubyBjaGFuZ2UpXCIpXHJcbiAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIm5vbmVcIiwgXCJubyBjaGFuZ2VcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJhY2NlbnRcIixcImFjY2VudFwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImN1c3RvbVwiLFwiY3VzdG9tXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZVRpdGxlQmFja2dyb3VuZENvbG9yKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVUaXRsZUJhY2tncm91bmRDb2xvciA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZVRpdGxlQmFja2dyb3VuZENvbG9yID09J2N1c3RvbScpe1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJDdXN0b20gbm90ZSB0aXRsZSBiYWNrZ3JvdW5kIGNvbG9yIChsaWdodClcIilcclxuICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnRcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJTcGVjaWZ5IGJhY2tncm91bmQgY29sb3IgKGV4LiAjRkZGRkZGIG9yIHJnYigyNTUsMjU1LDI1NSkpXCIpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ3N0cmluZycpO1xyXG4gICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21Ob3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3IuY3VzdG9tLmxpZ2h0KTtcclxuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCk9PntcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tTm90ZVRpdGxlQmFja2dyb3VuZENvbG9yLmN1c3RvbS5saWdodCA9IGlucHV0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkN1c3RvbSBub3RlIHRpdGxlIGJhY2tncm91bmQgY29sb3IgKGxpZ2h0LCBvbiBob3ZlcilcIilcclxuICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnRcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJTcGVjaWZ5IGJhY2tncm91bmQgY29sb3Igb24gaG92ZXIgKGV4LiAjRkZGRkZGIG9yIHJnYigyNTUsMjU1LDI1NSkpXCIpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ3N0cmluZycpO1xyXG4gICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21Ob3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3JIb3Zlci5jdXN0b20ubGlnaHQpO1xyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21Ob3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3JIb3Zlci5jdXN0b20ubGlnaHQgPSBpbnB1dGVkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkN1c3RvbSBub3RlIHRpdGxlIGJhY2tncm91bmQgY29sb3IgKGRhcmspXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwiU3BlY2lmeSBiYWNrZ3JvdW5kIGNvbG9yIChleC4gI0ZGRkZGRiBvciByZ2IoMjU1LDI1NSwyNTUpKVwiKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdzdHJpbmcnKTtcclxuICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tTm90ZVRpdGxlQmFja2dyb3VuZENvbG9yLmN1c3RvbS5kYXJrKTtcclxuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCk9PntcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tTm90ZVRpdGxlQmFja2dyb3VuZENvbG9yLmN1c3RvbS5kYXJrID0gaW5wdXRlZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQ3VzdG9tIG5vdGUgdGl0bGUgYmFja2dyb3VuZCBjb2xvciAoZGFyaywgb24gaG92ZXIpXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwiU3BlY2lmeSBiYWNrZ3JvdW5kIGNvbG9yIG9uIGhvdmVyIChleC4gI0ZGRkZGRiBvciByZ2IoMjU1LDI1NSwyNTUpKVwiKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdzdHJpbmcnKTtcclxuICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tTm90ZVRpdGxlQmFja2dyb3VuZENvbG9ySG92ZXIuY3VzdG9tLmRhcmspO1xyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21Ob3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3JIb3Zlci5jdXN0b20uZGFyayA9IGlucHV0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1MzBDN1x1MzBBNFx1MzBFQVx1MzBGQ1x1MzBDRVx1MzBGQ1x1MzBDOFxyXG4gICAgICAgIC8vIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuICAgICAgICAvLyAgICAgdGV4dDogXCJOb3Rlc1wiLFxyXG4gICAgICAgIC8vICAgICBjbHM6ICdzZXR0aW5nLWNhdGVnb3J5J1xyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC8vIC5zZXROYW1lKFwiSWNvblwiKVxyXG4gICAgICAgIC8vIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgLy8gLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgIC8vICAgICBkcm9wZG93blxyXG4gICAgICAgIC8vICAgICAgICAgLmFkZE9wdGlvbihcIm5vbmVcIiwgXCJub25lXCIpXHJcbiAgICAgICAgLy8gICAgICAgICAuYWRkT3B0aW9uKFwiZmlsZVwiLFwiZmlsZVwiKVxyXG4gICAgICAgIC8vICAgICAgICAgLmFkZE9wdGlvbihcImNhbGVuZGFyXCIsXCJjYWxlbmRhclwiKVxyXG4gICAgICAgIC8vICAgICAgICAgLmFkZE9wdGlvbihcImNhbGVuZGFyLWRheXNcIixcImNhbGVuZGFyLWRheXNcIilcclxuICAgICAgICAvLyAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLm5vdGUpXHJcbiAgICAgICAgLy8gICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvbi5ub3RlID0gdmFsdWU7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAvLyAgICAgICAgIH0pXHJcbiAgICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAgIC8vIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLm5vdGUgPT0gJ2N1c3RvbScpe1xyXG4gICAgICAgIC8vICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAvLyAgICAgLnNldE5hbWUoXCJDdXN0b20gaWNvblwiKVxyXG4gICAgICAgIC8vICAgICAuc2V0Q2xhc3MoXCJzZXR0aW5nLWluZGVudC0yXCIpXHJcbiAgICAgICAgLy8gICAgIC5zZXREZXNjKFwiZW50ZXIgTHVjaWRlIEljb24gbmFtZVwiKVxyXG4gICAgICAgIC8vICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdzdHJpbmcnKTtcclxuICAgICAgICAvLyAgICAgICAgIHRleHRcclxuICAgICAgICAvLyAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoREVGQVVMVF9TRVRUSU5HUy5jdXN0b21JY29uLm5vdGUpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUljb24ubm90ZSk7XHJcbiAgICAgICAgLy8gICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tSWNvbi5ub3RlID0gaW5wdXRlZFZhbHVlO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgLy8gICAgICAgICB9O1xyXG4gICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1ODk4Qlx1NTFGQVx1MzA1N1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RWxlbWVudHMuaGVhZGluZyl7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiSGVhZGluZ3NcIixcclxuICAgICAgICAgICAgICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJJY29uXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIm5vbmVcIiwgXCJub25lXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8uYWRkT3B0aW9uKFwiaGVhZGluZ1wiLFwiaGVhZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJoYXNoXCIsXCJoYXNoXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImNoZXZyb24tcmlnaHRcIixcImNoZXZyb24tcmlnaHRcIilcclxuICAgICAgICAgICAgICAgICAgICAvLy5hZGRPcHRpb24oXCJoZWFkaW5nd2l0aG51bWJlclwiLFwiaGVhZGluZyB3aXRoIG51bWJlclwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJjdXN0b21cIixcImN1c3RvbVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLmhlYWRpbmcpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvbi5oZWFkaW5nID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLmhlYWRpbmcgPT0gJ2N1c3RvbScpe1xyXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIkN1c3RvbSBpY29uXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Q2xhc3MoXCJzZXR0aW5nLWluZGVudC0yXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcImVudGVyIEx1Y2lkZSBJY29uIG5hbWVcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdzdHJpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLmN1c3RvbUljb24uaGVhZGluZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUljb24uaGVhZGluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tSWNvbi5oZWFkaW5nID0gaW5wdXRlZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJQcmVmaXhcIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyKCd0eXBlJywnc3RyaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoREVGQVVMVF9TRVRUSU5HUy5wcmVmaXguaGVhZGluZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZpeC5oZWFkaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmaXguaGVhZGluZyA9IGlucHV0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmaXguaGVhZGluZyAhPSAnJyl7XHJcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZShcIlJlcGVhdCBoZWFkaW5nIHByZWZpeFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50LTJcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibm9uZVwiLCBcIm5vbmVcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJsZXZlbFwiLFwiYXMgbWFueSB0aW1lcyBhcyBpdHMgbGV2ZWxcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJsZXZlbG1pbnVzMVwiLFwibGV2ZWwgLSAxXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwZWF0SGVhZGluZ1ByZWZpeClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwZWF0SGVhZGluZ1ByZWZpeCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkFkZCBpbmRlbnRcIilcclxuICAgICAgICAgICAgLnNldENsYXNzKCdzZXR0aW5nLWluZGVudCcpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGVudC5oZWFkaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kZW50LmhlYWRpbmcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1MzBFQVx1MzBGM1x1MzBBRlxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RWxlbWVudHMubGluayl7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiTGlua3NcIixcclxuICAgICAgICAgICAgICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJJY29uXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIm5vbmVcIiwgXCJub25lXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImxpbmtcIixcImxpbmtcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibGluay0yXCIsXCJsaW5rLTJcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiY3VzdG9tXCIsXCJjdXN0b21cIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvbi5saW5rKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24ubGluayA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvbi5saW5rID09ICdjdXN0b20nKXtcclxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJDdXN0b20gaWNvblwiKVxyXG4gICAgICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnQtMlwiKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJlbnRlciBMdWNpZGUgSWNvbiBuYW1lXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyKCd0eXBlJywnc3RyaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoREVGQVVMVF9TRVRUSU5HUy5jdXN0b21JY29uLmxpbmspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21JY29uLmxpbmspO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUljb24ubGluayA9IGlucHV0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiUHJlZml4XCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Q2xhc3MoXCJzZXR0aW5nLWluZGVudFwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ3N0cmluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKERFRkFVTFRfU0VUVElOR1MucHJlZml4LmxpbmspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmaXgubGluayk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJlZml4LmxpbmsgPSBpbnB1dGVkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHUzMEJGXHUzMEIwXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy50YWcpe1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlRhZ3NcIixcclxuICAgICAgICAgICAgICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJJY29uXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIm5vbmVcIiwgXCJub25lXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcInRhZ1wiLFwidGFnXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImhhc2hcIixcImhhc2hcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiY3VzdG9tXCIsXCJjdXN0b21cIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvbi50YWcpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvbi50YWcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24udGFnID09ICdjdXN0b20nKXtcclxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJDdXN0b20gaWNvblwiKVxyXG4gICAgICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnQtMlwiKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJlbnRlciBMdWNpZGUgSWNvbiBuYW1lXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyKCd0eXBlJywnc3RyaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoREVGQVVMVF9TRVRUSU5HUy5jdXN0b21JY29uLnRhZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUljb24udGFnKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21JY29uLnRhZyA9IGlucHV0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiUHJlZml4XCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Q2xhc3MoXCJzZXR0aW5nLWluZGVudFwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ3N0cmluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKERFRkFVTFRfU0VUVElOR1MucHJlZml4LnRhZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZpeC50YWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZpeC50YWcgPSBpbnB1dGVkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHUzMEVBXHUzMEI5XHUzMEM4XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy5saW5rKXtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJMaXN0IGl0ZW1zXCIsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdzZXR0aW5nLWNhdGVnb3J5J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiSWNvblwiKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoXCJzZXR0aW5nLWluZGVudFwiKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJub25lXCIsIFwibm9uZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJsaXN0XCIsXCJsaXN0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImNoZXZyb24tcmlnaHRcIixcImNoZXZyb24tcmlnaHRcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibWludXNcIixcIm1pbnVzXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImNpcmNsZS1kb3RcIixcImNpcmNsZS1kb3RcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiYXN0ZXJpc2tcIixcImFzdGVyaXNrXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImN1c3RvbVwiLFwiY3VzdG9tXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24ubGlzdEl0ZW1zKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24ubGlzdEl0ZW1zID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLmxpc3RJdGVtcyA9PSAnY3VzdG9tJyl7XHJcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiQ3VzdG9tIGljb25cIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50LTJcIilcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiZW50ZXIgTHVjaWRlIEljb24gbmFtZVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ3N0cmluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKERFRkFVTFRfU0VUVElOR1MuY3VzdG9tSWNvbi5saXN0SXRlbXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21JY29uLmxpc3RJdGVtcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tSWNvbi5saXN0SXRlbXMgPSBpbnB1dGVkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIlByZWZpeFwiKVxyXG4gICAgICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnRcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdzdHJpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLnByZWZpeC5saXN0SXRlbXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmaXgubGlzdEl0ZW1zKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmaXgubGlzdEl0ZW1zID0gaW5wdXRlZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vXHU2NzJBXHU1QjhDXHU0RTg2XHUzMEJGXHUzMEI5XHUzMEFGXHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiVGFza3NcIixcclxuICAgICAgICAgICAgICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJJY29uXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIm5vbmVcIiwgXCJub25lXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcInNxdWFyZVwiLFwic3F1YXJlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImNpcmNsZVwiLFwiY2lyY2xlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImxpc3QtY2hlY2tzXCIsXCJsaXN0LWNoZWNrc1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJjdXN0b21cIixcImN1c3RvbVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLnRhc2spXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvbi50YXNrID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLnRhc2sgPT0gJ2N1c3RvbScpe1xyXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIkN1c3RvbSBpY29uXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Q2xhc3MoXCJzZXR0aW5nLWluZGVudC0yXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcImVudGVyIEx1Y2lkZSBJY29uIG5hbWVcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdzdHJpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLmN1c3RvbUljb24udGFzaylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUljb24udGFzayk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tSWNvbi50YXNrID0gaW5wdXRlZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJQcmVmaXhcIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyKCd0eXBlJywnc3RyaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoREVGQVVMVF9TRVRUSU5HUy5wcmVmaXgudGFzaylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZpeC50YXNrKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmaXgudGFzayA9IGlucHV0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkFkZCBjaGVja2JveCB0ZXh0IHRvIHByZWZpeFwiKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhcImFkZCBbIF0gb3IgW3hdXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygnc2V0dGluZy1pbmRlbnQnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hZGRDaGVja2JveFRleHQpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hZGRDaGVja2JveFRleHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy9cdTVCOENcdTRFODZcdTZFMDhcdTMwN0ZcdTMwQkZcdTMwQjlcdTMwQUZcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJDb21wbGV0ZWQgdGFza3NcIixcclxuICAgICAgICAgICAgICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJJY29uXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIm5vbmVcIiwgXCJub25lXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImNoZWNrLXNxdWFyZVwiLFwiY2hlY2stc3F1YXJlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImNoZWNrLWNpcmNsZVwiLFwiY2hlY2stY2lyY2xlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImNoZWNrXCIsXCJjaGVja1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJjdXN0b21cIixcImN1c3RvbVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLnRhc2tEb25lKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24udGFza0RvbmUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24udGFza0RvbmUgPT0gJ2N1c3RvbScpe1xyXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIkN1c3RvbSBpY29uXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Q2xhc3MoXCJzZXR0aW5nLWluZGVudC0yXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcImVudGVyIEx1Y2lkZSBJY29uIG5hbWVcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdzdHJpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLmN1c3RvbUljb24udGFza0RvbmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21JY29uLnRhc2tEb25lKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21JY29uLnRhc2tEb25lID0gaW5wdXRlZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJQcmVmaXhcIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyKCd0eXBlJywnc3RyaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoREVGQVVMVF9TRVRUSU5HUy5wcmVmaXgudGFza0RvbmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmaXgudGFza0RvbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZpeC50YXNrRG9uZSA9IGlucHV0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcImg0XCIsIHtcclxuICAgICAgICAgICAgdGV4dDogXCJPdGhlcnNcIixcclxuICAgICAgICAgICAgY2xzOiAnc2V0dGluZy1jYXRlZ29yeSdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoXCJTaG93IG9ubHkgLm1kIGZpbGVzXCIpXHJcbiAgICAgICAgLnNldERlc2MoXCJUdXJuIG9uIGlmIG5vbi1tZCBmaWxlcyBhcmUgZGlzcGxheWVkIGluIHRoZSB2aWV3XCIpXHJcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1hcmtkb3duT25seSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXJrZG93bk9ubHkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoXCJTaG93IG9ubHkgZXhhY3RseSBtYXRjaGVkIGZpbGVzXCIpXHJcbiAgICAgICAgLnNldERlc2MoXCJUdXJuIG9uIGlmIHlvdSBkbyBub3Qgd2FudCB0byBzZWUgZmlsZXMgdGhhdCBkbyBub3QgZXhhY3RseSBtYXRjaCB0aGUgZm9ybWF0XCIpXHJcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmV4YWN0TWF0Y2hPbmx5KVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmV4YWN0TWF0Y2hPbmx5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDRcIiwge1xyXG4gICAgICAgICAgICB0ZXh0OiBcIkRlYnVnXCIsXHJcbiAgICAgICAgICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJzaG93IGRlYnVnIGluZm9ybWF0aW9uXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcImRpc3BsYXkgZGVidWcgaW5mb3JtYXRpb24gaW4gdGhlIGNvbnNvbGVcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0RlYnVnSW5mbylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0RlYnVnSW5mbyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFFQSxXQUFPLGVBQWUsU0FBUyxjQUFjLEVBQUUsT0FBTztBQUV0RCxRQUFJLFdBQVcsUUFBUTtBQUV2QixRQUFNLDRCQUE0QjtBQUNsQyxR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
